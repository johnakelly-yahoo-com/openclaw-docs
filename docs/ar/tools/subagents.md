---
summary: "Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙˆÙ†: Ø¥Ù†Ø´Ø§Ø¡ ØªØ´ØºÙŠÙ„Ø§Øª ÙˆÙƒÙ„Ø§Ø¡ Ù…Ø¹Ø²ÙˆÙ„Ø© ØªÙØ¹Ù„Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¥Ù„Ù‰ Ù‚Ù†Ø§Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ø§Ù„Ø¨"
read_when:
  - ØªØ±ÙŠØ¯ ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©/Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ Ø¹Ø¨Ø± Ø§Ù„ÙˆÙƒÙŠÙ„
  - ØªÙ‚ÙˆÙ… Ø¨ØªØºÙŠÙŠØ± Ø³ÙŠØ§Ø³Ø© sessions_spawn Ø£Ùˆ Ø£Ø¯Ø§Ø© Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„ÙØ±Ø¹ÙŠ
title: "Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙˆÙ†"
---

# Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙˆÙ†

ØªØªÙŠØ­ Ù„Ùƒ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙˆÙ† ØªØ´ØºÙŠÙ„ Ù…Ù‡Ø§Ù… ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¯ÙˆÙ† Ø­Ø¬Ø¨ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©. Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙƒÙŠÙ„ ÙØ±Ø¹ÙŠØŒ ÙŠØ¹Ù…Ù„ ÙÙŠ Ø¬Ù„Ø³Ø© Ù…Ø¹Ø²ÙˆÙ„Ø© Ø®Ø§ØµØ© Ø¨Ù‡ØŒ ÙˆÙŠÙ†ÙØ° Ø¹Ù…Ù„Ù‡ØŒ Ø«Ù… ÙŠØ¹Ù„Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.

**Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:**

- Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø§ Ø¨ÙŠÙ†Ù…Ø§ ÙŠÙˆØ§ØµÙ„ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
- ØªØ´ØºÙŠÙ„ Ø¹Ø¯Ø© Ù…Ù‡Ø§Ù… Ø·ÙˆÙŠÙ„Ø© Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ (Ø§Ø³ØªØ®Ù„Ø§Øµ Ø§Ù„ÙˆÙŠØ¨ØŒ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´ÙŠÙØ±Ø©ØŒ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„ÙØ§Øª)
- ØªÙÙˆÙŠØ¶ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¥Ù„Ù‰ ÙˆÙƒÙ„Ø§Ø¡ Ù…ØªØ®ØµØµÙŠÙ† ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡

## Ø§Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø±ÙŠØ¹

Ø£Ø¨Ø³Ø· Ø·Ø±ÙŠÙ‚Ø© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ† Ù‡ÙŠ Ø£Ù† ØªØ·Ù„Ø¨ Ù…Ù† ÙˆÙƒÙŠÙ„Ùƒ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ:

> "Ø£Ù†Ø´Ø¦ ÙˆÙƒÙŠÙ„Ù‹Ø§ ÙØ±Ø¹ÙŠÙ‹Ø§ Ù„Ù„Ø¨Ø­Ø« ÙÙŠ Ø£Ø­Ø¯Ø« Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥ØµØ¯Ø§Ø± Node.js"

Ø³ÙŠØ³ØªØ¯Ø¹ÙŠ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø£Ø¯Ø§Ø© `sessions_spawn` ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©. Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„ÙØ±Ø¹ÙŠØŒ ÙŠØ¹Ù„Ù† Ù†ØªØ§Ø¦Ø¬Ù‡ ÙÙŠ Ø¯Ø±Ø¯Ø´ØªÙƒ.

ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ù‹Ø§ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ±ÙŠØ­:

> "Ø£Ù†Ø´Ø¦ ÙˆÙƒÙŠÙ„Ù‹Ø§ ÙØ±Ø¹ÙŠÙ‹Ø§ Ù„ØªØ­Ù„ÙŠÙ„ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ÙŠÙˆÙ….
> Ø§Ø³ØªØ®Ø¯Ù… gpt-5.2 ÙˆØ§Ø¶Ø¨Ø· Ù…Ù‡Ù„Ø© Ù‚Ø¯Ø±Ù‡Ø§ 5 Ø¯Ù‚Ø§Ø¦Ù‚." ÙŠØ³ØªØ¯Ø¹ÙŠ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ `sessions_spawn` Ù…Ø¹ ÙˆØµÙ Ù„Ù„Ù…Ù‡Ù…Ø©.

## ÙƒÙŠÙ ÙŠØ¹Ù…Ù„

<Steps>
  <Step title="Main agent spawns">
    Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ **ØºÙŠØ± Ø­Ø§Ø¬Ø¨** â€” ÙŠØ­ØµÙ„ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙÙˆØ±Ù‹Ø§ Ø¹Ù„Ù‰ `{ status: "accepted", runId, childSessionKey }`. 
    ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ù…Ø¹Ø²ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© (`agent:
    :subagent:
    `) Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø®ØµØµ `subagent`.
  
  </Step>
  <Step title="Sub-agent runs in the background">Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„ÙØ±Ø¹ÙŠØŒ ÙŠØ¹Ù„Ù† Ù†ØªØ§Ø¦Ø¬Ù‡ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙÙŠ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø·Ø§Ù„Ø¨.<agentId>ÙŠÙ†Ø´Ø± Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ù„Ø®ØµÙ‹Ø§ Ø¨Ù„ØºØ© Ø·Ø¨ÙŠØ¹ÙŠØ©.<uuid>ØªØªÙ… Ø£Ø±Ø´ÙØ© Ø¬Ù„Ø³Ø© Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„ÙØ±Ø¹ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ 60 Ø¯Ù‚ÙŠÙ‚Ø© (Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø¶Ø¨Ø·).</Step>
  <Step title="Result is announced">
    ÙŠØªÙ… Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù†ØµÙˆØµ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª. Ù„ÙƒÙ„ ÙˆÙƒÙŠÙ„ ÙØ±Ø¹ÙŠ Ø³ÙŠØ§Ù‚Ù‡ **Ø§Ù„Ø®Ø§Øµ** ÙˆØ§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡.
  </Step>
  <Step title="Session is archived">
    Ø¹ÙŠÙ‘Ù† Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§ Ø£Ù‚Ù„ ØªÙƒÙ„ÙØ© Ù„Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ† Ù„ØªÙˆÙÙŠØ± Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ â€” Ø±Ø§Ø¬Ø¹ [Setting a Default Model](#setting-a-default-model) Ø£Ø¯Ù†Ø§Ù‡. ØªØ¹Ù…Ù„ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙˆÙ† Ù…Ø¨Ø§Ø´Ø±Ø© Ø¯ÙˆÙ† Ø£ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯.
  </Step>
</Steps>

<Tip>
Ø§Ù„Ù†Ù…ÙˆØ°Ø¬: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù‡Ø¯Ù (Ù…Ø§ Ù„Ù… ÙŠØªÙ… ØªØ¹ÙŠÙŠÙ† `subagents.model`) Ø§Ù„ØªÙÙƒÙŠØ±: Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ¬Ø§ÙˆØ² Ù„Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„ÙØ±Ø¹ÙŠ (Ù…Ø§ Ù„Ù… ÙŠØªÙ… ØªØ¹ÙŠÙŠÙ† `subagents.thinking`)
</Tip>

## Ø§Ù„ØªÙ‡ÙŠØ¦Ø©

Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„ØªØ²Ø§Ù…Ù†: 8 Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©:

- Ø§Ù„Ø£Ø±Ø´ÙØ© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©: Ø¨Ø¹Ø¯ 60 Ø¯Ù‚ÙŠÙ‚Ø©
- ØªØ¹ÙŠÙŠÙ† Ù†Ù…ÙˆØ°Ø¬ Ø§ÙØªØ±Ø§Ø¶ÙŠ
- Ø§Ø³ØªØ®Ø¯Ù… Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§ Ø£Ù‚Ù„ ØªÙƒÙ„ÙØ© Ù„Ù„ÙˆÙƒÙ„Ø§Ø¡ Ø§Ù„ÙØ±Ø¹ÙŠÙŠÙ† Ù„ØªÙ‚Ù„ÙŠÙ„ ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø±Ù…ÙˆØ²:
- {
  agents: {
  defaults: {
  subagents: {
  model: "minimax/MiniMax-M2.1",
  },
  },
  },
  }

### ØªØ¹ÙŠÙŠÙ† Ù…Ø³ØªÙˆÙ‰ ØªÙÙƒÙŠØ± Ø§ÙØªØ±Ø§Ø¶ÙŠ

Use a cheaper model for sub-agents to save on token costs:

```json5
{
  agents: {
    defaults: {
      subagents: {
        model: "minimax/MiniMax-M2.1",
      },
    },
  },
}
```

### Setting a Default Thinking Level

```json5
{
  agents: {
    defaults: {
      subagents: {
        thinking: "low",
      },
    },
  },
}
```

### Per-Agent Overrides

In a multi-agent setup, you can set sub-agent defaults per agent:

```json5
{
  agents: {
    list: [
      {
        id: "researcher",
        subagents: {
          model: "anthropic/claude-sonnet-4",
        },
      },
      {
        id: "assistant",
        subagents: {
          model: "minimax/MiniMax-M2.1",
        },
      },
    ],
  },
}
```

### Ø§Ù„ØªØ²Ø§Ù…Ù†

Control how many sub-agents can run at the same time:

```json5
{
  agents: {
    defaults: {
      subagents: {
        maxConcurrent: 4, // default: 8
      },
    },
  },
}
```

Sub-agents use a dedicated queue lane (`subagent`) separate from the main agent queue, so sub-agent runs don't block inbound replies.

### Auto-Archive

Sub-agent sessions are automatically archived after a configurable period:

```json5
{
  agents: {
    defaults: {
      subagents: {
        archiveAfterMinutes: 120, // default: 60
      },
    },
  },
}
```

<Note>
Archive renames the transcript to `*.deleted.<timestamp>` (same folder) â€” transcripts are preserved, not deleted. Auto-archive timers are best-effort; pending timers are lost if the gateway restarts.
</Note>

## The `sessions_spawn` Tool

This is the tool the agent calls to create sub-agents.

### Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª

| Parameter           | Ø§Ù„Ù†ÙˆØ¹                    | Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ                             | Ø§Ù„ÙˆØµÙ                                                                                             |
| ------------------- | ------------------------ | ------------------------------------- | ------------------------------------------------------------------------------------------------- |
| `task`              | string                   | _(required)_       | What the sub-agent should do                                                                      |
| `Ø§Ù„ØªØ³Ù…ÙŠØ©`           | string                   | â€”                                     | Short label for identification                                                                    |
| `agentId`           | string                   | _(caller's agent)_ | Spawn under a different agent id (must be allowed)                             |
| `Ø§Ù„Ù†Ù…ÙˆØ°Ø¬`           | string                   | _(optional)_       | Override the model for this sub-agent                                                             |
| `thinking`          | string                   | _(optional)_       | Override thinking level (`off`, `low`, `medium`, `high`, etc.) |
| `runTimeoutSeconds` | number                   | `0` (no limit)     | Abort the sub-agent after N seconds                                                               |
| `Ø§Ù„ØªÙ†Ø¸ÙŠÙ`           | `"delete"` \\| `"keep"` | `"keep"`                              | `"delete"` archives immediately after announce                                                    |

### Model Resolution Order

The sub-agent model is resolved in this order (first match wins):

1. Explicit `model` parameter in the `sessions_spawn` call
2. Per-agent config: `agents.list[].subagents.model`
3. Global default: `agents.defaults.subagents.model`
4. Target agentâ€™s normal model resolution for that new session

Thinking level is resolved in this order:

1. Explicit `thinking` parameter in the `sessions_spawn` call
2. Per-agent config: `agents.list[].subagents.thinking`
3. Global default: `agents.defaults.subagents.thinking`
4. Otherwise no sub-agent-specific thinking override is applied

<Note>
Invalid model values are silently skipped â€” the sub-agent runs on the next valid default with a warning in the tool result.
</Note>

### Cross-Agent Spawning

By default, sub-agents can only spawn under their own agent id. To allow an agent to spawn sub-agents under other agent ids:

```json5
{
  agents: {
    list: [
      {
        id: "orchestrator",
        subagents: {
          allowAgents: ["researcher", "coder"], // or ["*"] to allow any
        },
      },
    ],
  },
}
```

<Tip>
Use the `agents_list` tool to discover which agent ids are currently allowed for `sessions_spawn`.
</Tip>

## Managing Sub-Agents (`/subagents`)

Use the `/subagents` slash command to inspect and control sub-agent runs for the current session:

| Ø§Ù„Ø£Ù…Ø±                                      | Ø§Ù„ÙˆØµÙ                                                             |
| ------------------------------------------ | ----------------------------------------------------------------- |
| `/subagents list`                          | List all sub-agent runs (active and completed) |
| `/subagents stop <id\\|#\\|all>`         | Stop a running sub-agent                                          |
| `/subagents log <id\\|#> [limit] [tools]` | View sub-agent transcript                                         |
| `/subagents info <id\\|#>`                | Show detailed run metadata                                        |
| `/subagents send <id\\|#> <message>`      | Send a message to a running sub-agent                             |

You can reference sub-agents by list index (`1`, `2`), run id prefix, full session key, or `last`.

<AccordionGroup>
  <Accordion title="Example: list and stop a sub-agent">
    ```
    /subagents list
    ```

    ````
    ```
    ğŸ§­ Subagents (current session)
    Active: 1 Â· Done: 2
    1) âœ… Â· research logs Â· 2m31s Â· run a1b2c3d4 Â· agent:main:subagent:...
    2) âœ… Â· check deps Â· 45s Â· run e5f6g7h8 Â· agent:main:subagent:...
    3) ğŸ”„ Â· deploy staging Â· 1m12s Â· run i9j0k1l2 Â· agent:main:subagent:...
    ```
    
    ```
    /subagents stop 3
    ```
    
    ```
    âš™ï¸ Stop requested for deploy staging.
    ```
    ````

  </Accordion>
  <Accordion title="Example: inspect a sub-agent">
    ```
    /subagents info 1
    ```

    ````
    ```
    â„¹ï¸ Subagent info
    Status: âœ…
    Label: research logs
    Task: Research the latest server error logs and summarize findings
    Run: a1b2c3d4-...
    Session: agent:main:subagent:...
    Runtime: 2m31s
    Cleanup: keep
    Outcome: ok
    ```
    ````

  </Accordion>
  <Accordion title="Example: view sub-agent log">
    ```
    /subagents log 1 10
    ```

    ````
    Shows the last 10 messages from the sub-agent's transcript. Add `tools` to include tool call messages:
    
    ```
    /subagents log 1 10 tools
    ```
    ````

  </Accordion>
  <Accordion title="Example: send a follow-up message">
    ```
    /subagents send 3 "Also check the staging environment"
    ```

    ```
    Sends a message into the running sub-agent's session and waits up to 30 seconds for a reply.
    ```

  </Accordion>
</AccordionGroup>

## Announce (How Results Come Back)

When a sub-agent finishes, it goes through an **announce** step:

1. The sub-agent's final reply is captured
2. A summary message is sent to the main agent's session with the result, status, and stats
3. The main agent posts a natural-language summary to your chat

ØªØ­Ø§ÙØ¸ Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¹Ù„Ù‰ ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø®ÙŠÙˆØ·/Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¹Ù†Ø¯ ØªÙˆÙØ±Ù‡ (Ø®ÙŠÙˆØ· SlackØŒ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª TelegramØŒ Ø®ÙŠÙˆØ· Matrix).

### Announce Stats

Each announce includes a stats line with:

- Runtime duration
- Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ù…ÙˆØ² (Ø¥Ø¯Ø®Ø§Ù„/Ø¥Ø®Ø±Ø§Ø¬/Ø¥Ø¬Ù…Ø§Ù„ÙŠ)
- Estimated cost (when model pricing is configured via `models.providers.*.models[].cost`)
- Session key, session id, and transcript path

### Announce Status

The announce message includes a status derived from the runtime outcome (not from model output):

- **successful completion** (`ok`) â€” task completed normally
- **error** â€” task failed (error details in notes)
- **timeout** â€” task exceeded `runTimeoutSeconds`
- **unknown** â€” status could not be determined

<Tip>
If no user-facing announcement is needed, the main-agent summarize step can return `NO_REPLY` and nothing is posted.
This is different from `ANNOUNCE_SKIP`, which is used in agent-to-agent announce flow (`sessions_send`).
</Tip>

## Tool Policy

By default, sub-agents get **all tools except** a set of denied tools that are unsafe or unnecessary for background tasks:

<AccordionGroup>
  <Accordion title="Default denied tools">
    | Denied tool | Reason |
    |-------------|--------|
    | `sessions_list` | Session management â€” main agent orchestrates |
    | `sessions_history` | Session management â€” main agent orchestrates |
    | `sessions_send` | Session management â€” main agent orchestrates |
    | `sessions_spawn` | No nested fan-out (sub-agents cannot spawn sub-agents) |
    | `gateway` | System admin â€” dangerous from sub-agent |
    | `agents_list` | System admin |
    | `whatsapp_login` | Interactive setup â€” not a task |
    | `session_status` | Status/scheduling â€” main agent coordinates |
    | `cron` | Status/scheduling â€” main agent coordinates |
    | `memory_search` | Pass relevant info in spawn prompt instead |
    | `memory_get` | Pass relevant info in spawn prompt instead |
  </Accordion>
</AccordionGroup>

### Customizing Sub-Agent Tools

You can further restrict sub-agent tools:

```json5
{
  tools: {
    subagents: {
      tools: {
        // deny always wins over allow
        deny: ["browser", "firecrawl"],
      },
    },
  },
}
```

To restrict sub-agents to **only** specific tools:

```json5
{
  tools: {
    subagents: {
      tools: {
        allow: ["read", "exec", "process", "write", "edit", "apply_patch"],
        // deny still wins if set
      },
    },
  },
}
```

<Note>
Custom deny entries are **added to** the default deny list. If `allow` is set, only those tools are available (the default deny list still applies on top).
</Note>

## Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©

ØªÙØ­Ù„ Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„ÙØ±Ø¹ÙŠ Ø¨Ø­Ø³Ø¨ **Ù…Ø¹Ø±Ù‘Ù Ø§Ù„ÙˆÙƒÙŠÙ„**ØŒ ÙˆÙ„ÙŠØ³ Ø¨Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù„Ø³Ø©:

- The auth store is loaded from the target agent's `agentDir`
- The main agent's auth profiles are merged in as a **fallback** (agent profiles win on conflicts)
- The merge is additive â€” main profiles are always available as fallbacks

<Note>
Fully isolated auth per sub-agent is not currently supported.
</Note>

## Context and System Prompt

Sub-agents receive a reduced system prompt compared to the main agent:

- **Included:** Tooling, Workspace, Runtime sections, plus `AGENTS.md` and `TOOLS.md`
- **Not included:** `SOUL.md`, `IDENTITY.md`, `USER.md`, `HEARTBEAT.md`, `BOOTSTRAP.md`

The sub-agent also receives a task-focused system prompt that instructs it to stay focused on the assigned task, complete it, and not act as the main agent.

## Stopping Sub-Agents

| Method                 | Effect                                                                    |
| ---------------------- | ------------------------------------------------------------------------- |
| `/stop` in the chat    | Aborts the main session **and** all active sub-agent runs spawned from it |
| `/subagents stop <id>` | Stops a specific sub-agent without affecting the main session             |
| `runTimeoutSeconds`    | Automatically aborts the sub-agent run after the specified time           |

<Note>
`runTimeoutSeconds` does **not** auto-archive the session. The session remains until the normal archive timer fires.
</Note>

## Full Configuration Example

<Accordion title="Complete sub-agent configuration">
```json5
{
  agents: {
    defaults: {
      model: { primary: "anthropic/claude-sonnet-4" },
      subagents: {
        model: "minimax/MiniMax-M2.1",
        thinking: "low",
        maxConcurrent: 4,
        archiveAfterMinutes: 30,
      },
    },
    list: [
      {
        id: "main",
        default: true,
        name: "Personal Assistant",
      },
      {
        id: "ops",
        name: "Ops Agent",
        subagents: {
          model: "anthropic/claude-sonnet-4",
          allowAgents: ["main"], // ops can spawn sub-agents under "main"
        },
      },
    ],
  },
  tools: {
    subagents: {
      tools: {
        deny: ["browser"], // sub-agents can't use the browser
      },
    },
  },
}
```
</Accordion>

## Ø§Ù„Ù‚ÙŠÙˆØ¯

<Warning>
- **Best-effort announce:** If the gateway restarts, pending announce work is lost.
- **No nested spawning:** Sub-agents cannot spawn their own sub-agents.
- **Shared resources:** Sub-agents share the gateway process; use `maxConcurrent` as a safety valve.
- **Auto-archive is best-effort:** Pending archive timers are lost on gateway restart.
</Warning>

## See Also

- [Session Tools](/concepts/session-tool) â€” details on `sessions_spawn` and other session tools
- [Multi-Agent Sandbox and Tools](/tools/multi-agent-sandbox-tools) â€” per-agent tool restrictions and sandboxing
- [Configuration](/gateway/configuration) â€” `agents.defaults.subagents` reference
- [Queue](/concepts/queue) â€” how the `subagent` lane works
