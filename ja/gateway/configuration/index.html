
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="OpenClaw documentation in 22 languages">
      
      
        <meta name="author" content="John Kelly">
      
      
        <link rel="canonical" href="https://johnakelly-yahoo-com.github.io/openclaw-docs/ja/gateway/configuration/">
      
      
        <link rel="prev" href="../configuration-examples/">
      
      
        <link rel="next" href="../discovery/">
      
      
        
          <link rel="alternate" href="/openclaw-docs/" hreflang="en">
        
          <link rel="alternate" href="/openclaw-docs/ja/" hreflang="ja">
        
          <link rel="alternate" href="/openclaw-docs/ko/" hreflang="ko">
        
          <link rel="alternate" href="/openclaw-docs/zh-TW/" hreflang="zh-TW">
        
          <link rel="alternate" href="/openclaw-docs/zh-CN/" hreflang="zh-CN">
        
          <link rel="alternate" href="/openclaw-docs/es/" hreflang="es">
        
          <link rel="alternate" href="/openclaw-docs/fr/" hreflang="fr">
        
          <link rel="alternate" href="/openclaw-docs/de/" hreflang="de">
        
          <link rel="alternate" href="/openclaw-docs/pt-BR/" hreflang="pt-BR">
        
          <link rel="alternate" href="/openclaw-docs/vi/" hreflang="vi">
        
          <link rel="alternate" href="/openclaw-docs/sv/" hreflang="sv">
        
          <link rel="alternate" href="/openclaw-docs/tl/" hreflang="tl">
        
          <link rel="alternate" href="/openclaw-docs/nl/" hreflang="nl">
        
          <link rel="alternate" href="/openclaw-docs/ur/" hreflang="ur">
        
          <link rel="alternate" href="/openclaw-docs/ar/" hreflang="ar">
        
          <link rel="alternate" href="/openclaw-docs/hi/" hreflang="hi">
        
          <link rel="alternate" href="/openclaw-docs/da/" hreflang="da">
        
          <link rel="alternate" href="/openclaw-docs/pl/" hreflang="pl">
        
          <link rel="alternate" href="/openclaw-docs/th/" hreflang="th">
        
          <link rel="alternate" href="/openclaw-docs/tr/" hreflang="tr">
        
          <link rel="alternate" href="/openclaw-docs/my/" hreflang="my">
        
          <link rel="alternate" href="/openclaw-docs/ru/" hreflang="ru">
        
          <link rel="alternate" href="/openclaw-docs/uz/" hreflang="uz">
        
      
      
      <link rel="icon" href="../../../assets/sage-icon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>設定 - OpenClaw Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
These translations are community-maintained. Help improve them on
<a href="https://crowdin.com/project/66aa453b091ff31e16a4cecfeef31b17">Crowdin</a>.

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="OpenClaw Documentation" class="md-header__button md-logo" aria-label="OpenClaw Documentation" data-md-component="logo">
      <img src="../../../assets/sage-icon.png" alt="OpenDocs" style="height: 1.2rem; width: auto;">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenClaw Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              設定
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/openclaw-docs/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/ja/" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/ko/" hreflang="ko" class="md-select__link">
              한국어
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/zh-TW/" hreflang="zh-TW" class="md-select__link">
              繁體中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/zh-CN/" hreflang="zh-CN" class="md-select__link">
              简体中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/es/" hreflang="es" class="md-select__link">
              Español
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/fr/" hreflang="fr" class="md-select__link">
              Français
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/de/" hreflang="de" class="md-select__link">
              Deutsch
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/pt-BR/" hreflang="pt-BR" class="md-select__link">
              Português (Brasil)
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/vi/" hreflang="vi" class="md-select__link">
              Tiếng Việt
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/sv/" hreflang="sv" class="md-select__link">
              Svenska
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/tl/" hreflang="tl" class="md-select__link">
              Filipino
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/nl/" hreflang="nl" class="md-select__link">
              Nederlands
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/ur/" hreflang="ur" class="md-select__link">
              اردو
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/ar/" hreflang="ar" class="md-select__link">
              العربية
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/hi/" hreflang="hi" class="md-select__link">
              हिन्दी
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/da/" hreflang="da" class="md-select__link">
              Dansk
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/pl/" hreflang="pl" class="md-select__link">
              Polski
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/th/" hreflang="th" class="md-select__link">
              ไทย
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/tr/" hreflang="tr" class="md-select__link">
              Türkçe
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/my/" hreflang="my" class="md-select__link">
              မြန်မာ
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/ru/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/openclaw-docs/uz/" hreflang="uz" class="md-select__link">
              O'zbek
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
  
    
  
  OpenClaw

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../brave-search/" class="md-tabs__link">
        
  
  
    
  
  Brave Search

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../date-time/" class="md-tabs__link">
        
  
  
    
  
  日付と時刻

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../logging/" class="md-tabs__link">
        
  
  
    
  
  ログ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../network/" class="md-tabs__link">
        
  
  
    
  
  ネットワーク

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../perplexity/" class="md-tabs__link">
        
  
  
    
  
  Perplexity Sonar

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../pi-dev/" class="md-tabs__link">
        
  
  
    
  
  Pi 開発ワークフロー

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../pi/" class="md-tabs__link">
        
  
  
    
  
  Pi 統合アーキテクチャ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../prose/" class="md-tabs__link">
        
  
  
    
  
  OpenProse

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../tts/" class="md-tabs__link">
        
  
  
    
  
  テキスト読み上げ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../vps/" class="md-tabs__link">
        
  
  
    
  
  VPS ホスティング

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../automation/auth-monitoring/" class="md-tabs__link">
          
  
  
  Automation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../channels/" class="md-tabs__link">
          
  
  
  Channels

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cli/" class="md-tabs__link">
          
  
  
  Cli

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../concepts/agent-loop/" class="md-tabs__link">
          
  
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../debug/node-issue/" class="md-tabs__link">
          
  
  
  Debug

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../diagnostics/flags/" class="md-tabs__link">
          
  
  
  Diagnostics

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../experiments/onboarding-config-protocol/" class="md-tabs__link">
          
  
  
  Experiments

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Gateway

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../help/" class="md-tabs__link">
          
  
  
  Help

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../hooks/soul-evil/" class="md-tabs__link">
          
  
  
  Hooks

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../install/" class="md-tabs__link">
          
  
  
  Install

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../nodes/" class="md-tabs__link">
          
  
  
  Nodes

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../platforms/" class="md-tabs__link">
          
  
  
  Platforms

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../plugins/agent-tools/" class="md-tabs__link">
          
  
  
  Plugins

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../providers/" class="md-tabs__link">
          
  
  
  Providers

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../refactor/clawnet/" class="md-tabs__link">
          
  
  
  Refactor

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/AGENTS.default/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../security/CONTRIBUTING-THREAT-MODEL/" class="md-tabs__link">
          
  
  
  Security

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../start/bootstrapping/" class="md-tabs__link">
          
  
  
  Start

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/" class="md-tabs__link">
          
  
  
  Tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../web/" class="md-tabs__link">
          
  
  
  Web

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="OpenClaw Documentation" class="md-nav__button md-logo" aria-label="OpenClaw Documentation" data-md-component="logo">
      <img src="../../../assets/sage-icon.png" alt="OpenDocs" style="height: 1.2rem; width: auto;">
    </a>
    OpenClaw Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenClaw
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../brave-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Brave Search
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../date-time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    日付と時刻
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ログ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ネットワーク
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../perplexity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Perplexity Sonar
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi-dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pi 開発ワークフロー
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pi 統合アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenProse
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テキスト読み上げ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VPS ホスティング
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Automation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Automation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/auth-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    認証監視
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/cron-jobs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cron ジョブ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/cron-vs-heartbeat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cron vs Heartbeat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/gmail-pubsub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gmail Pub/Sub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/poll/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    投票
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    オートメーションのトラブルシューティング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../automation/webhook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Webhooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Channels
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    Channels
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    チャットチャンネル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/bluebubbles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BlueBubbles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/broadcast-groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Broadcast Groups
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--experimental"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/channel-routing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    チャンネルルーティング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/discord/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Discord
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/feishu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Feishu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/googlechat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google Chat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/grammy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    grammY
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/group-messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    グループメッセージ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/groups/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    グループ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/imessage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    iMessage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/line/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LINE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/location/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    チャンネルの位置情報解析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/matrix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Matrix
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/mattermost/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mattermost
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/msteams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Microsoft Teams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/nextcloud-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nextcloud Talk
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/nostr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nostr
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/pairing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pairing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/signal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Signal
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/slack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Slack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/telegram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telegram
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/tlon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tlon
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    チャンネルのトラブルシューティング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/twitch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Twitch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/whatsapp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WhatsApp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/zalo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zalo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../channels/zalouser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zalo Personal
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cli
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cli
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI リファレンス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/acp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    acp
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エージェント
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/approvals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    approvals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/browser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ブラウザー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    channels
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    設定
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/configure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    configure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/cron/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    cron
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ダッシュボード
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/devices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デバイス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/directory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    docs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/doctor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドクター
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ゲートウェイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/health/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ヘルス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    フック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/logs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    logs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    メモリ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    メッセージ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    モデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    node
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ノード
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/onboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    オンボード
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/pairing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ペアリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プラグイン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/reset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リセット
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/sandbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    サンドボックス CLI
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--active"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セッション
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セットアップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/skills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    skills
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    status
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    system
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/tui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    tui
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/uninstall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アンインストール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    update
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/voicecall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    voicecall
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/webhooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ウェブフック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/agent-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Loop
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/agent-workspace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エージェント ワークスペース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エージェント ランタイム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway アーキテクチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/compaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コンパクション
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コンテキスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    機能
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/markdown-formatting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Markdown フォーマット
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    メモリ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    メッセージ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/model-failover/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    モデルフェイルオーバー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/model-providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    モデルプロバイダー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/multi-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    マルチエージェント ルーティング
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--active"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OAuth
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/presence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Presence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/queue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    コマンドキュー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/retry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    再試行ポリシー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/session-pruning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セッションプルーニング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/session-tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セッション ツール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/session/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セッション管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/sessions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セッション
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ストリーミングとチャンク化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/system-prompt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Prompt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/timezone/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    タイムゾーン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/typebox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeBox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/typing-indicators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    タイピングインジケーター
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/usage-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    使用状況のトラッキング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Debug
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    Debug
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debug/node-issue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node + tsx クラッシュ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Diagnostics
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    Diagnostics
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostics/flags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    診断フラグ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Experiments
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            
  
    Experiments
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../experiments/onboarding-config-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    オンボーディングと設定プロトコル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_18_2" >
        
          
          <label class="md-nav__link" for="__nav_18_2" id="__nav_18_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Plans
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_18_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Plans
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../experiments/plans/cron-add-hardening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cron Add のハードニング
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../experiments/plans/group-policy-hardening/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Telegram 許可リストの強化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../experiments/plans/openresponses-gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenResponses Gateway 計画
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_18_3" >
        
          
          <label class="md-nav__link" for="__nav_18_3" id="__nav_18_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Proposals
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_18_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Proposals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../experiments/proposals/model-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    モデル設定の探索
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_18_4" >
        
          
          <label class="md-nav__link" for="__nav_18_4" id="__nav_18_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Research
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_18_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Research
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../experiments/research/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ワークスペース メモリ 研究
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_19" checked>
        
          
          <label class="md-nav__link" for="__nav_19" id="__nav_19_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Gateway
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_19_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_19">
            <span class="md-nav__icon md-icon"></span>
            
  
    Gateway
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway ランブック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    認証
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../background-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    バックグラウンド Exec とプロセスツール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bonjour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bonjour 検出
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bridge-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ブリッジプロトコル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli-backends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI バックエンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    設定例
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    設定
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    設定
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        厳格な設定検証
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    <span class="md-ellipsis">
      
        スキーマ + UI ヒント
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        適用 + 再起動（RPC）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rpc_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        部分更新（RPC）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        最小設定（推奨の開始点）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        セルフチャットモード（グループ制御に推奨）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#include" class="md-nav__link">
    <span class="md-ellipsis">
      
        設定インクルード（$include）
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="設定インクルード（$include）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        基本的な使い方
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        統合の動作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        ネストされたものを含む
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        パス解決
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        エラーハンドリング
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        例：マルチクライアントの法務向け構成
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        共通オプション
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="共通オプション">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#env-vars-env" class="md-nav__link">
    <span class="md-ellipsis">
      
        Env vars + .env
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#envshellenv" class="md-nav__link">
    <span class="md-ellipsis">
      
        env.shellEnv（任意）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        設定内での環境変数置換
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        認証ストレージ（OAuth + API キー）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        auth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentslistidentity" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.list[].identity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wizard" class="md-nav__link">
    <span class="md-ellipsis">
      
        wizard
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        logging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappdmpolicy" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.dmPolicy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappallowfrom" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.allowFrom
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappsendreceipts" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.sendReceipts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappaccounts-multi-account" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.accounts (multi-account)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelstelegramaccounts-channelsdiscordaccounts-channelsgooglechataccounts-channelsslackaccounts-channelsmattermostaccounts-channelssignalaccounts-channelsimessageaccounts" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.telegram.accounts / channels.discord.accounts / channels.googlechat.accounts / channels.slack.accounts / channels.mattermost.accounts / channels.signal.accounts / channels.imessage.accounts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentslistgroupchat-messagesgroupchat" class="md-nav__link">
    <span class="md-ellipsis">
      
        グループチャットメンションゲート(agents.list[].groupChat + messages.groupChat )
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="グループチャットメンションゲート(agents.list[].groupChat + messages.groupChat )">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dm" class="md-nav__link">
    <span class="md-ellipsis">
      
        DM履歴の制限
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        グループポリシー (チャネルごと)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentslist-bindings" class="md-nav__link">
    <span class="md-ellipsis">
      
        マルチエージェントルーティング (agents.list + bindings)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="マルチエージェントルーティング (agents.list + bindings)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        エージェント別アクセスプロファイル（マルチエージェント）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolsagenttoagent" class="md-nav__link">
    <span class="md-ellipsis">
      
        tools.agentToAgent (任意)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messagesqueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        messages.queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messagesinbound" class="md-nav__link">
    <span class="md-ellipsis">
      
        messages.inbound
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        commands (チャットコマンドの処理)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-whatsapp-web-channel-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        web (WhatsApp Web channel runtime)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelstelegram-bot" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.telegram (botのトランスポート)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsdiscord-bot" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.discord (botのトランスポート)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsgooglechat-chat-api-webhook" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.googlechat (Chat API webhook)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsslack" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.slack (ソケットモード)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsmattermost-bot" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.mattermost (botトークン)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelssignal-signal-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.signal (signal-cli)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsimessage-imsg-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.imessage (imsg CLI)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsworkspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsreporoot" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.repoRoot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsskipbootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.skipBootstrap
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsbootstrapmaxchars" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.bootstrapMaxChars
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsusertimezone" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.userTimezone
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultstimeformat" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.timeFormat
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        メッセージ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メッセージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        テンプレート変数
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messagestts" class="md-nav__link">
    <span class="md-ellipsis">
      
        messages.tts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#talk" class="md-nav__link">
    <span class="md-ellipsis">
      
        talk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaults" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="agents.defaults">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsclibackends-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.cliBackends (CLI フォールバック)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultscontextpruning-tool-result-pruning" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.contextPruning (tool-result pruning)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultscompaction-headroom-memory-flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.compaction (headroom + memory flushを予約)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultssandbox" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.sandbox
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        models (カスタム プロバイダー + ベース URL)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opencode-zen" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenCode Zen (マルチモデル プロキシ)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zai-glm-47" class="md-nav__link">
    <span class="md-ellipsis">
      
        Z.AI (GLM-4.7) — プロバイダエイリアスのサポート
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moonshot-aikimi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Moonshot AI（Kimi）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kimi-coding" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kimi Coding
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anthropic" class="md-nav__link">
    <span class="md-ellipsis">
      
        合成（Anthropic互換）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lm" class="md-nav__link">
    <span class="md-ellipsis">
      
        ローカルモデル (LMスタジオ) — 推奨設定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimax-m21" class="md-nav__link">
    <span class="md-ellipsis">
      
        MiniMax M2.1
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cerebras-glm-46-47" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cerebras (GLM 4.6 / 4.7)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        セッション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skills-skillsconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        skills (skillsconfig)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugins-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        plugins (extensions)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser-openclaw-managed-browser" class="md-nav__link">
    <span class="md-ellipsis">
      
        browser (openclaw-managed browser)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ui_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ui（外観）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-bind" class="md-nav__link">
    <span class="md-ellipsis">
      
        gateway (ゲートウェイサーバーモード + bind)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gatewayreload-config-hot-reload" class="md-nav__link">
    <span class="md-ellipsis">
      
        gateway.reload (Config hot reload)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="gateway.reload (Config hot reload)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hot-reload-matrix-files-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hot reload matrix (files + impact)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        複数インスタンスの単離性
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-webhooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        フック (Gateway webhooks)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canvashost-lantailnet-canvas" class="md-nav__link">
    <span class="md-ellipsis">
      
        canvasHost (LAN/tailnet Canvas ファイルサーバー + ライブリロード)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bridge-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      
        bridge (レガシーTCPブリッジ、削除)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discoverymdns-bonjour-mdns" class="md-nav__link">
    <span class="md-ellipsis">
      
        discovery.mdns (Bonjour / mDNS ブロードキャストモード)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discoverywidearea-area-bonjour-dnssd" class="md-nav__link">
    <span class="md-ellipsis">
      
        discovery.wideArea (ワイド-Area Bonjour / ユニキャストDNS‐SD)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        メディアモデルテンプレート変数
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cron (ゲートウェイスケジューラ)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ディスカバリーとトランスポート
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../doctor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Doctor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gateway-lock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway ロック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../health/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ヘルスチェック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../heartbeat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Heartbeat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../local-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ローカルモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ログ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multiple-gateways/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    複数の Gateway（ゲートウェイ）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ネットワークモデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openai-http-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenAI Chat Completions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openresponses-http-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenResponses API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pairing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway 所有のペアリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway プロトコル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../remote-gateway-readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リモートゲートウェイのセットアップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../remote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リモートアクセス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox-vs-tool-policy-vs-elevated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    サンドボックス vs ツールポリシー vs 昇格
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--active"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandboxing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    サンドボックス化
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--active"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tailscale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tailscale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools-invoke-http-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tools Invoke API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    トラブルシューティング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_19_29" >
        
          
          <label class="md-nav__link" for="__nav_19_29" id="__nav_19_29_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_19_29_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_19_29">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セキュリティ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_20" >
        
          
          <label class="md-nav__link" for="__nav_20" id="__nav_20_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Help
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_20">
            <span class="md-nav__icon md-icon"></span>
            
  
    Help
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ヘルプ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デバッグ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    環境変数
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    よくある質問
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/scripts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    スクリプト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/submitting-a-pr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PR の提出
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/submitting-an-issue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Issue の提出
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    トラブルシューティング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_21" >
        
          
          <label class="md-nav__link" for="__nav_21" id="__nav_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Hooks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_21">
            <span class="md-nav__icon md-icon"></span>
            
  
    Hooks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hooks/soul-evil/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOUL Evil フック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_22" >
        
          
          <label class="md-nav__link" for="__nav_22" id="__nav_22_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_22">
            <span class="md-nav__icon md-icon"></span>
            
  
    Install
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インストール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/ansible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ansible
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/bun/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bun（実験的）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/development-channels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    開発チャンネル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/exe-dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    exe.dev
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/fly/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fly.io
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/gcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GCP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/hetzner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hetzner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/installer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    インストーラーの内部
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/macos-vm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS VM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/migrating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    移行ガイド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/nix/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nix
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node.js
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/uninstall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アンインストール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/updating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    更新
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_23" >
        
          
          <label class="md-nav__link" for="__nav_23" id="__nav_23_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Nodes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_23">
            <span class="md-nav__icon md-icon"></span>
            
  
    Nodes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nodes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/audio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    音声とボイスノート
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/camera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    カメラキャプチャ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/images/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    画像およびメディアのサポート
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/location-command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Location コマンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/media-understanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    メディア理解
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Talk モード
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ノードのトラブルシューティング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/voicewake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Voice Wake
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_24" >
        
          
          <label class="md-nav__link" for="__nav_24" id="__nav_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Platforms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_24">
            <span class="md-nav__icon md-icon"></span>
            
  
    Platforms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プラットフォーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/android/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Android アプリ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/digitalocean/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DigitalOcean
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/ios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    iOS アプリ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Linux アプリ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/macos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS アプリ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/oracle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Oracle Cloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/raspberry-pi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raspberry Pi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows（WSL2）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_24_10" >
        
          
          <label class="md-nav__link" for="__nav_24_10" id="__nav_24_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Mac
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_24_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_24_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Mac
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/bundled-gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS 上の Gateway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/canvas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Canvas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/child-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway（ゲートウェイ）のライフサイクル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/dev-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS 開発者セットアップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/health/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ヘルスチェック
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/icon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    メニューバーアイコン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS のログ記録
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/menu-bar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    メニューバー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/peekaboo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Peekaboo Bridge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS の権限
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS リリース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/remote/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リモートコントロール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/signing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS 署名
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/skills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skills
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/voice-overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    音声オーバーレイ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/voicewake/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    音声ウェイク
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/webchat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WebChat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../platforms/mac/xpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS IPC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_25" >
        
          
          <label class="md-nav__link" for="__nav_25" id="__nav_25_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Plugins
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_25_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_25">
            <span class="md-nav__icon md-icon"></span>
            
  
    Plugins
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/agent-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プラグインのエージェントツール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/manifest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プラグインマニフェスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/voice-call/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    音声通話プラグイン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../plugins/zalouser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zalo Personal プラグイン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_26" >
        
          
          <label class="md-nav__link" for="__nav_26" id="__nav_26_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Providers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_26_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_26">
            <span class="md-nav__icon md-icon"></span>
            
  
    Providers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    モデルプロバイダー
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/anthropic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anthropic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/bedrock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Amazon Bedrock
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/claude-max-api-proxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Claude Max API プロキシ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/cloudflare-ai-gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloudflare AI Gateway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/deepgram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deepgram
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/github-copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Copilot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/glm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GLM モデル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/minimax/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MiniMax
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    モデルプロバイダー クイックスタート
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/moonshot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Moonshot AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/ollama/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ollama
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/openai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenAI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/opencode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenCode Zen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/openrouter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenRouter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/qianfan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qianfan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/qwen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qwen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/synthetic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synthetic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/venice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Venice AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/vercel-ai-gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vercel AI Gateway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/xiaomi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Xiaomi MiMo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../providers/zai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Z.AI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_27" >
        
          
          <label class="md-nav__link" for="__nav_27" id="__nav_27_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Refactor
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_27_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_27">
            <span class="md-nav__icon md-icon"></span>
            
  
    Refactor
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../refactor/clawnet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clawnet リファクタ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../refactor/exec-host/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exec ホストのリファクタリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../refactor/outbound-session-mirroring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    アウトバウンド セッション ミラーリングのリファクタリング（Issue #1520）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../refactor/plugin-sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プラグイン SDK リファクタ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../refactor/strict-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    厳格な設定バリデーション
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_28" >
        
          
          <label class="md-nav__link" for="__nav_28" id="__nav_28_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_28_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_28">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/AGENTS.default/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AGENTS.md — OpenClaw 個人アシスタント（デフォルト）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/RELEASING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    リリースチェックリスト（npm + macOS）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/api-usage-costs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API 使用量とコスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/credits/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    クレジット
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/device-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    デバイスモデル データベース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/rpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RPC アダプター
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/session-management-compaction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セッション管理の詳細解説
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    テスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/token-use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    トークン使用量とコスト
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/transcript-hygiene/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    トランスクリプト衛生
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/wizard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    オンボーディング ウィザード リファレンス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_28_12" >
        
          
          <label class="md-nav__link" for="__nav_28_12" id="__nav_28_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_28_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_28_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/AGENTS.dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AGENTS.md - OpenClaw ワークスペース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/AGENTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AGENTS.md - あなたのワークスペース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/BOOT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BOOT.md
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/BOOTSTRAP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BOOTSTRAP.md - Hello, World
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/HEARTBEAT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HEARTBEAT.md
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/IDENTITY.dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IDENTITY.md - エージェントのアイデンティティ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/IDENTITY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    IDENTITY.md - 私は誰？
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/SOUL.dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOUL.md - C-3PO の魂
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/SOUL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOUL.md - あなたは何者か
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/TOOLS.dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TOOLS.md - ユーザーツールに関するメモ（編集可）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/TOOLS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TOOLS.md - ローカルノート
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/USER.dev/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    USER.md - ユーザープロファイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/templates/USER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    USER.md - あなたが支援する人について
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_29" >
        
          
          <label class="md-nav__link" for="__nav_29" id="__nav_29_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_29_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_29">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/CONTRIBUTING-THREAT-MODEL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenClaw 脅威モデルへの貢献
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/THREAT-MODEL-ATLAS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenClaw 脅威モデル v1.0
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_30" >
        
          
          <label class="md-nav__link" for="__nav_30" id="__nav_30_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Start
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_30_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_30">
            <span class="md-nav__icon md-icon"></span>
            
  
    Start
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/bootstrapping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エージェントのブートストラップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/docs-directory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドキュメントディレクトリ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    はじめに
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/hubs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ドキュメントハブ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/lore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenClaw ロア
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/onboarding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    オンボーディング（macOS アプリ）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/openclaw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    パーソナルアシスタントのセットアップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    クイックスタート
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    セットアップ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/showcase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ショーケース
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/wizard-cli-automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI 自動化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/wizard-cli-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI オンボーディング リファレンス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../start/wizard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    オンボーディングウィザード（CLI）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_31" >
        
          
          <label class="md-nav__link" for="__nav_31" id="__nav_31_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_31_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_31">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ツール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/agent-send/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    エージェント送信
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/apply-patch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    apply_patch ツール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/browser-linux-troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ブラウザーのトラブルシューティング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/browser-login/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ブラウザーログイン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/browser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Browser（OpenClaw 管理）
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/chrome-extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chrome 拡張機能
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/clawhub/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ClawHub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/creating-skills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skills の作成
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/elevated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    昇格モード
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/exec-approvals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exec 承認
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/exec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exec ツール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/firecrawl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Firecrawl
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/llm-task/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM タスク
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/lobster/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lobster
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/multi-agent-sandbox-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    マルチエージェントのサンドボックス & ツール
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--active"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/plugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    プラグイン
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/reactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reactions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/skills-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skills 設定
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/skills/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skills
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/slash-commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    スラッシュコマンド
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/subagents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    サブエージェント
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/thinking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    思考レベル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web ツール
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_32" >
        
          
          <label class="md-nav__link" for="__nav_32" id="__nav_32_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Web
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_32_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_32">
            <span class="md-nav__icon md-icon"></span>
            
  
    Web
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Web
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web/control-ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Control UI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web/dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ダッシュボード
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web/tui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TUI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../web/webchat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    WebChat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        厳格な設定検証
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ui" class="md-nav__link">
    <span class="md-ellipsis">
      
        スキーマ + UI ヒント
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rpc" class="md-nav__link">
    <span class="md-ellipsis">
      
        適用 + 再起動（RPC）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rpc_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        部分更新（RPC）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        最小設定（推奨の開始点）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        セルフチャットモード（グループ制御に推奨）
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#include" class="md-nav__link">
    <span class="md-ellipsis">
      
        設定インクルード（$include）
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="設定インクルード（$include）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        基本的な使い方
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        統合の動作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        ネストされたものを含む
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        パス解決
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        エラーハンドリング
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        例：マルチクライアントの法務向け構成
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        共通オプション
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="共通オプション">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#env-vars-env" class="md-nav__link">
    <span class="md-ellipsis">
      
        Env vars + .env
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#envshellenv" class="md-nav__link">
    <span class="md-ellipsis">
      
        env.shellEnv（任意）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        設定内での環境変数置換
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth-api" class="md-nav__link">
    <span class="md-ellipsis">
      
        認証ストレージ（OAuth + API キー）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auth" class="md-nav__link">
    <span class="md-ellipsis">
      
        auth
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentslistidentity" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.list[].identity
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wizard" class="md-nav__link">
    <span class="md-ellipsis">
      
        wizard
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        logging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappdmpolicy" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.dmPolicy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappallowfrom" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.allowFrom
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappsendreceipts" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.sendReceipts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelswhatsappaccounts-multi-account" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.whatsapp.accounts (multi-account)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelstelegramaccounts-channelsdiscordaccounts-channelsgooglechataccounts-channelsslackaccounts-channelsmattermostaccounts-channelssignalaccounts-channelsimessageaccounts" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.telegram.accounts / channels.discord.accounts / channels.googlechat.accounts / channels.slack.accounts / channels.mattermost.accounts / channels.signal.accounts / channels.imessage.accounts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentslistgroupchat-messagesgroupchat" class="md-nav__link">
    <span class="md-ellipsis">
      
        グループチャットメンションゲート(agents.list[].groupChat + messages.groupChat )
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="グループチャットメンションゲート(agents.list[].groupChat + messages.groupChat )">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dm" class="md-nav__link">
    <span class="md-ellipsis">
      
        DM履歴の制限
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        グループポリシー (チャネルごと)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentslist-bindings" class="md-nav__link">
    <span class="md-ellipsis">
      
        マルチエージェントルーティング (agents.list + bindings)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="マルチエージェントルーティング (agents.list + bindings)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        エージェント別アクセスプロファイル（マルチエージェント）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolsagenttoagent" class="md-nav__link">
    <span class="md-ellipsis">
      
        tools.agentToAgent (任意)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messagesqueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        messages.queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messagesinbound" class="md-nav__link">
    <span class="md-ellipsis">
      
        messages.inbound
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commands" class="md-nav__link">
    <span class="md-ellipsis">
      
        commands (チャットコマンドの処理)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-whatsapp-web-channel-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        web (WhatsApp Web channel runtime)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelstelegram-bot" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.telegram (botのトランスポート)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsdiscord-bot" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.discord (botのトランスポート)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsgooglechat-chat-api-webhook" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.googlechat (Chat API webhook)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsslack" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.slack (ソケットモード)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsmattermost-bot" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.mattermost (botトークン)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelssignal-signal-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.signal (signal-cli)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#channelsimessage-imsg-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        channels.imessage (imsg CLI)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsworkspace" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.workspace
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsreporoot" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.repoRoot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsskipbootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.skipBootstrap
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsbootstrapmaxchars" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.bootstrapMaxChars
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsusertimezone" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.userTimezone
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultstimeformat" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.timeFormat
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        メッセージ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="メッセージ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        テンプレート変数
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messagestts" class="md-nav__link">
    <span class="md-ellipsis">
      
        messages.tts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#talk" class="md-nav__link">
    <span class="md-ellipsis">
      
        talk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaults" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="agents.defaults">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#agentsdefaultsclibackends-cli" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.cliBackends (CLI フォールバック)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultscontextpruning-tool-result-pruning" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.contextPruning (tool-result pruning)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultscompaction-headroom-memory-flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.compaction (headroom + memory flushを予約)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agentsdefaultssandbox" class="md-nav__link">
    <span class="md-ellipsis">
      
        agents.defaults.sandbox
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models-url" class="md-nav__link">
    <span class="md-ellipsis">
      
        models (カスタム プロバイダー + ベース URL)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opencode-zen" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenCode Zen (マルチモデル プロキシ)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zai-glm-47" class="md-nav__link">
    <span class="md-ellipsis">
      
        Z.AI (GLM-4.7) — プロバイダエイリアスのサポート
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moonshot-aikimi" class="md-nav__link">
    <span class="md-ellipsis">
      
        Moonshot AI（Kimi）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kimi-coding" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kimi Coding
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anthropic" class="md-nav__link">
    <span class="md-ellipsis">
      
        合成（Anthropic互換）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lm" class="md-nav__link">
    <span class="md-ellipsis">
      
        ローカルモデル (LMスタジオ) — 推奨設定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimax-m21" class="md-nav__link">
    <span class="md-ellipsis">
      
        MiniMax M2.1
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cerebras-glm-46-47" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cerebras (GLM 4.6 / 4.7)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        セッション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skills-skillsconfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        skills (skillsconfig)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plugins-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        plugins (extensions)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser-openclaw-managed-browser" class="md-nav__link">
    <span class="md-ellipsis">
      
        browser (openclaw-managed browser)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ui_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        ui（外観）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-bind" class="md-nav__link">
    <span class="md-ellipsis">
      
        gateway (ゲートウェイサーバーモード + bind)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gatewayreload-config-hot-reload" class="md-nav__link">
    <span class="md-ellipsis">
      
        gateway.reload (Config hot reload)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="gateway.reload (Config hot reload)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hot-reload-matrix-files-impact" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hot reload matrix (files + impact)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        複数インスタンスの単離性
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gateway-webhooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        フック (Gateway webhooks)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canvashost-lantailnet-canvas" class="md-nav__link">
    <span class="md-ellipsis">
      
        canvasHost (LAN/tailnet Canvas ファイルサーバー + ライブリロード)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bridge-tcp" class="md-nav__link">
    <span class="md-ellipsis">
      
        bridge (レガシーTCPブリッジ、削除)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discoverymdns-bonjour-mdns" class="md-nav__link">
    <span class="md-ellipsis">
      
        discovery.mdns (Bonjour / mDNS ブロードキャストモード)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discoverywidearea-area-bonjour-dnssd" class="md-nav__link">
    <span class="md-ellipsis">
      
        discovery.wideArea (ワイド-Area Bonjour / ユニキャストDNS‐SD)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      
        メディアモデルテンプレート変数
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cron (ゲートウェイスケジューラ)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">設定 🔧<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>OpenClaw は、<code>~/.openclaw/openclaw.json</code> から任意の <strong>JSON5</strong> 設定を読み込みます（コメントおよび末尾カンマを許可）。</p>
<p>ファイルが見つからない場合、OpenClawは安全なデフォルトを使用します(埋め込みPiエージェント+送信者ごとのセッション+ワークスペース<code>~/.openclaw/workspace</code>)。 通常は以下の設定のみが必要です:</p>
<ul>
<li>ボットをトリガーできるユーザーを制限する（<code>channels.whatsapp.allowFrom</code>、<code>channels.telegram.allowFrom</code> など）</li>
<li>グループの許可リストとメンション動作を制御する（<code>channels.whatsapp.groups</code>、<code>channels.telegram.groups</code>、<code>channels.discord.guilds</code>、<code>agents.list[].groupChat</code>）</li>
<li>メッセージのプレフィックスをカスタマイズする（<code>messages</code>）</li>
<li>エージェントのワークスペースを設定する（<code>agents.defaults.workspace</code> または <code>agents.list[].workspace</code>）</li>
<li>組み込みエージェントのデフォルト（<code>agents.defaults</code>）およびセッション動作（<code>session</code>）を調整する</li>
<li>エージェントごとのアイデンティティを設定する（<code>agents.list[].identity</code>）</li>
</ul>
<blockquote>
<p><strong>設定が初めてですか？</strong> 詳細な説明付きの完全な例については、<a href="../../gateway/configuration-examples">Configuration Examples</a> ガイドをご確認ください。</p>
</blockquote>
<h2 id="_2">厳格な設定検証<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>OpenClawはスキーマと完全に一致する設定のみを受け付けます。
不明なキー、不正な型、または不正な値により、ゲートウェイは安全のために起動を拒否します。</p>
<p>検証に失敗した場合：</p>
<ul>
<li>Gateway は起動しません。</li>
<li>診断コマンドのみが許可されます（例：<code>openclaw doctor</code>、<code>openclaw logs</code>、<code>openclaw health</code>、<code>openclaw status</code>、<code>openclaw service</code>、<code>openclaw help</code>）。</li>
<li>正確な問題点を確認するには <code>openclaw doctor</code> を実行してください。</li>
<li>マイグレーション／修復を適用するには <code>openclaw doctor --fix</code>（または <code>--yes</code>）を実行してください。</li>
</ul>
<p>Doctor は、<code>--fix</code>/<code>--yes</code> に明示的に同意しない限り、変更を書き込みません。</p>
<h2 id="ui">スキーマ + UI ヒント<a class="headerlink" href="#ui" title="Permanent link">&para;</a></h2>
<p>ゲートウェイは、UI エディターの <code>config.schema</code> を介して設定の JSON スキーマ表現を公開します。
Control UI はこのスキーマからフォームをレンダリングし、<strong>Raw JSON</strong> エディタをエスケープハッチとして使用します。</p>
<p>チャンネルプラグインや拡張は、設定用のスキーマと UI ヒントを登録できるため、ハードコードされたフォームに依存せず、アプリ間でスキーマ駆動の設定を維持できます。</p>
<p>ヒント（ラベル、グルーピング、機密フィールドなど）はスキーマと一緒に提供され、クライアントは設定知識をハードコードせずに、より良いフォームを描画できます。</p>
<h2 id="rpc">適用 + 再起動（RPC）<a class="headerlink" href="#rpc" title="Permanent link">&para;</a></h2>
<p>config.applyを使用すると、完全な設定を検証+書き込み、ゲートウェイを一度に再起動できます。
これは、再起動のセンチネルを書き込み、ゲートウェイが戻ってきた後の最後のアクティブセッションを ping させます。</p>
<p>警告: <code>config.apply</code> は <strong>config</strong> 全体を置き換えます。 24. いくつかのキーだけを変更したい場合は、<code>config.patch</code> または <code>openclaw config set</code> を使用してください。 <code>~/.openclaw/openclaw.json</code> のバックアップを保持します。</p>
<p>Params:</p>
<ul>
<li><code>raw</code>（string）— 設定全体の JSON5 ペイロード</li>
<li><code>baseHash</code>（任意）— <code>config.get</code> から取得した設定ハッシュ（既存設定がある場合は必須）</li>
<li><code>sessionKey</code>（任意）— ウェイクアップ ping 用の最後のアクティブセッションキー</li>
<li><code>note</code>（任意）— 再起動センチネルに含めるメモ</li>
<li><code>restartDelayMs</code>（任意）— 再起動までの遅延（デフォルト 2000）</li>
</ul>
<p>例（<code>gateway call</code> 経由）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>openclaw<span class="w"> </span>gateway<span class="w"> </span>call<span class="w"> </span>config.get<span class="w"> </span>--params<span class="w"> </span><span class="s1">&#39;{}&#39;</span><span class="w"> </span><span class="c1"># capture payload.hash</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>openclaw<span class="w"> </span>gateway<span class="w"> </span>call<span class="w"> </span>config.apply<span class="w"> </span>--params<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="s1">  &quot;raw&quot;: &quot;{\\n  agents: { defaults: { workspace: \\&quot;~/.openclaw/workspace\\&quot; } }\\n}\\n&quot;,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="s1">  &quot;baseHash&quot;: &quot;&lt;hash-from-config.get&gt;&quot;,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="s1">  &quot;sessionKey&quot;: &quot;agent:main:whatsapp:dm:+15555550123&quot;,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="s1">  &quot;restartDelayMs&quot;: 1000</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="s1">}&#39;</span>
</code></pre></div>
<h2 id="rpc_1">部分更新（RPC）<a class="headerlink" href="#rpc_1" title="Permanent link">&para;</a></h2>
<p><code>config.patch</code> を使用すると、
関連のないキーをクローブせずに既存の設定に部分的な更新をマージできます。 JSON マージパッチセマンティクスを適用します:</p>
<ul>
<li>オブジェクトは再帰的にマージ</li>
<li><code>null</code> はキーを削除</li>
<li><code>config.apply</code> と同様に、検証・書き込みを行い、再起動センチネルを保存し、Gateway の再起動をスケジュールします（<code>sessionKey</code> が指定された場合はウェイクアップも行います）。</li>
</ul>
<p>Params:</p>
<ul>
<li><code>raw</code>（string）— 変更するキーのみを含む JSON5 ペイロード</li>
<li><code>baseHash</code>（必須）— <code>config.get</code> から取得した設定ハッシュ</li>
<li><code>sessionKey</code>（任意）— ウェイクアップ ping 用の最後のアクティブセッションキー</li>
<li><code>note</code>（任意）— 再起動センチネルに含めるメモ</li>
<li><code>restartDelayMs</code>（任意）— 再起動までの遅延（デフォルト 2000）</li>
</ul>
<p>gateway/configuration.md</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>openclaw<span class="w"> </span>gateway<span class="w"> </span>call<span class="w"> </span>config.get<span class="w"> </span>--params<span class="w"> </span><span class="s1">&#39;{}&#39;</span><span class="w"> </span><span class="c1"># capture payload.hash</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>openclaw<span class="w"> </span>gateway<span class="w"> </span>call<span class="w"> </span>config.patch<span class="w"> </span>--params<span class="w"> </span><span class="s1">&#39;{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="s1">  &quot;raw&quot;: &quot;{\\n  channels: { telegram: { groups: { \\&quot;*\\&quot;: { requireMention: false } } } }\\n}\\n&quot;,</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="s1">  &quot;baseHash&quot;: &quot;&lt;hash-from-config.get&gt;&quot;,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="s1">  &quot;sessionKey&quot;: &quot;agent:main:whatsapp:dm:+15555550123&quot;,</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="s1">  &quot;restartDelayMs&quot;: 1000</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="s1">}&#39;</span>
</code></pre></div>
<h2 id="_3">最小設定（推奨の開始点）<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15555550123&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="p">}</span>
</code></pre></div>
<p>次のコマンドで、デフォルトイメージを一度ビルドします。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>scripts/sandbox-setup.sh
</code></pre></div>
<h2 id="_4">セルフチャットモード（グループ制御に推奨）<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>グループ内で WhatsApp の @ メンションに反応しないようにし、特定のテキストトリガーのみに反応させる場合：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">,</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">        </span><span class="nv">groupChat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mentionPatterns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;@openclaw&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;reisponde&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">      </span><span class="c1">// Allowlist is DMs only; including your own number enables self-chat mode.</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">      </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15555550123&quot;</span><span class="p">],</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">      </span><span class="nv">groups</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;*&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="p">}</span>
</code></pre></div>
<h2 id="include">設定インクルード（<code>$include</code>）<a class="headerlink" href="#include" title="Permanent link">&para;</a></h2>
<p><code>$include</code>ディレクティブを使用して、設定を複数のファイルに分割します。 これは以下の場合に便利です:</p>
<ul>
<li>大規模な設定の整理（例：クライアントごとのエージェント定義）</li>
<li>環境間での共通設定の共有</li>
<li>機密設定の分離</li>
</ul>
<h3 id="_5">基本的な使い方<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">// ~/.openclaw/openclaw.json</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">  </span><span class="nv">gateway</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">port</span><span class="p">:</span><span class="w"> </span><span class="mf">18789</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">  </span><span class="c1">// Include a single file (replaces the key&#39;s value)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">$</span><span class="nv">include</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./agents.json5&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">  </span><span class="c1">// Include multiple files (deep-merged in order)</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">  </span><span class="nv">broadcast</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="err">$</span><span class="nv">include</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;./clients/mueller.json5&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;./clients/schmidt.json5&quot;</span><span class="p">],</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">// ~/.openclaw/agents.json5</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">sandbox</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;all&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;session&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace&quot;</span><span class="w"> </span><span class="p">}],</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_6">統合の動作<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>単一ファイル</strong>：<code>$include</code> を含むオブジェクトを置換</li>
<li><strong>配列ファイル</strong>：順序どおりにディープマージ（後のファイルが前のファイルを上書き）</li>
<li><strong>兄弟キーあり</strong>：インクルード後に兄弟キーをマージ（インクルード値を上書き）</li>
<li><strong>兄弟キー + 配列／プリミティブ</strong>：非対応（インクルード内容はオブジェクトである必要があります）</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">// Sibling keys override included values</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="p">{</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="err">$</span><span class="nv">include</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./base.json5&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// { a: 1, b: 2 }</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="nv">b</span><span class="p">:</span><span class="w"> </span><span class="mf">99</span><span class="p">,</span><span class="w"> </span><span class="c1">// Result: { a: 1, b: 99 }</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_7">ネストされたものを含む<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>インクルードされたファイル自体も <code>$include</code> ディレクティブを含めることができます（最大 10 階層）。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// clients/mueller.json5</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">$</span><span class="nv">include</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./mueller/agents.json5&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="nv">broadcast</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">$</span><span class="nv">include</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./mueller/broadcast.json5&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_8">パス解決<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>相対パス</strong>：インクルード元ファイルを基準に解決</li>
<li><strong>絶対パス</strong>：そのまま使用</li>
<li><strong>親ディレクトリ</strong>：<code>../</code> 参照は期待どおりに動作</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{</span><span class="w"> </span><span class="nv">&quot;$include&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./sub/config.json5&quot;</span><span class="w"> </span><span class="p">}</span><span class="w">      </span><span class="c1">// relative</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p">{</span><span class="w"> </span><span class="nv">&quot;$include&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/etc/openclaw/base.json5&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// absolute</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">{</span><span class="w"> </span><span class="nv">&quot;$include&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;../shared/common.json5&quot;</span><span class="w"> </span><span class="p">}</span><span class="w">   </span><span class="c1">// parent dir</span>
</code></pre></div>
<h3 id="_9">エラーハンドリング<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ファイル未存在</strong>：解決後のパスを含む明確なエラー</li>
<li><strong>パースエラー</strong>：どのインクルードファイルで失敗したかを表示</li>
<li><strong>循環インクルード</strong>：検出され、インクルードチェーンとともに報告</li>
</ul>
<h3 id="_10">例：マルチクライアントの法務向け構成<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// ~/.openclaw/openclaw.json</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="nv">gateway</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">port</span><span class="p">:</span><span class="w"> </span><span class="mf">18789</span><span class="p">,</span><span class="w"> </span><span class="nv">auth</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">  </span><span class="c1">// Common agent defaults</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">      </span><span class="nv">sandbox</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;all&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;session&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="c1">// Merge agent lists from all clients</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">$</span><span class="nv">include</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;./clients/mueller/agents.json5&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;./clients/schmidt/agents.json5&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">  </span><span class="c1">// Merge broadcast configs</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">  </span><span class="nv">broadcast</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">    </span><span class="err">$</span><span class="nv">include</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;./clients/mueller/broadcast.json5&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;./clients/schmidt/broadcast.json5&quot;</span><span class="p">],</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// ~/.openclaw/clients/mueller/agents.json5</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="p">[</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mueller-transcribe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/clients/mueller/transcribe&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mueller-docs&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/clients/mueller/docs&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1">// ~/.openclaw/clients/mueller/broadcast.json5</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="nv">&quot;120363403215116621@g.us&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;mueller-transcribe&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mueller-docs&quot;</span><span class="p">],</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="p">}</span>
</code></pre></div>
<h2 id="_11">共通オプション<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<h3 id="env-vars-env">Env vars + <code>.env</code><a class="headerlink" href="#env-vars-env" title="Permanent link">&para;</a></h3>
<p>OpenClaw は、親プロセス（シェル、launchd/systemd、CI など）から環境変数を読み込みます。</p>
<p>さらに、次を読み込みます。</p>
<ul>
<li>カレントワーキングディレクトリにある <code>.env</code>（存在する場合）</li>
<li><code>~/.openclaw/.env</code>（別名 <code>$OPENCLAW_STATE_DIR/.env</code>）にあるグローバルフォールバック <code>.env</code></li>
</ul>
<p>どちらの <code>.env</code> ファイルも、既存の環境変数を上書きしません。</p>
<p>また、configにインラインenv varsを指定することもできます。 これらは、
プロセス env がキーを欠落している場合にのみ適用されます (オーバーライドされていないルールと同じ)。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nv">OPENROUTER_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-or-...&quot;</span><span class="p">,</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="nv">vars</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">      </span><span class="nv">GROQ_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gsk-...&quot;</span><span class="p">,</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="p">}</span>
</code></pre></div>
<p>優先順位とソースの詳細は <a href="../../help/environment">/environment</a> を参照してください。</p>
<h3 id="envshellenv"><code>env.shellEnv</code>（任意）<a class="headerlink" href="#envshellenv" title="Permanent link">&para;</a></h3>
<p>オプトインの利便性: 有効になっていて、期待されるキーのどれも設定されていない場合 OpenClawはログインシェルを実行し、期待されていないキーのみをインポートします(上書きはありません)。
これにより、シェルプロファイルが効果的に生成されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="p">{</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="nv">shellEnv</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">      </span><span class="nv">timeoutMs</span><span class="p">:</span><span class="w"> </span><span class="mf">15000</span><span class="p">,</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="p">}</span>
</code></pre></div>
<p>Env var equalent:</p>
<ul>
<li><code>OPENCLAW_LOAD_SHELL_ENV=1</code></li>
<li><code>OPENCLAW_SHELL_ENV_TIMEOUT_MS=15000</code></li>
</ul>
<h3 id="_12">設定内での環境変数置換<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p><code>${VAR_NAME}</code> 構文を使用して、任意の設定文字列値で環境変数を直接参照できます。 変数は、検証前の設定読み込み時に置き換えられます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">  </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="nv">providers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">      </span><span class="nv">&quot;vercel-gateway&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${VERCEL_GATEWAY_API_KEY}&quot;</span><span class="p">,</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">  </span><span class="nv">gateway</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">    </span><span class="nv">auth</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">      </span><span class="nv">token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${OPENCLAW_GATEWAY_TOKEN}&quot;</span><span class="p">,</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="p">}</span>
</code></pre></div>
<p><strong>ルール：</strong></p>
<ul>
<li>大文字の環境変数名のみが一致します：<code>[A-Z_][A-Z0-9_]*</code></li>
<li>env varsが見つからないか空の場合、config loadでエラーが発生します。</li>
<li><code>$${VAR}</code> でエスケープすると、リテラルの <code>${VAR}</code> を出力します</li>
<li><code>$include</code> と併用可能（インクルードされたファイルでも置換されます）</li>
</ul>
<p><strong>インライン置換：</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">  </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="nv">providers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">      </span><span class="nv">custom</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">        </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${CUSTOM_API_BASE}/v1&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// → &quot;https://api.example.com/v1&quot;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="p">}</span>
</code></pre></div>
<h3 id="oauth-api">認証ストレージ（OAuth + API キー）<a class="headerlink" href="#oauth-api" title="Permanent link">&para;</a></h3>
<p>OpenClaw は、<strong>エージェントごと</strong> の認証プロファイル（OAuth + API キー）を次に保存します。</p>
<ul>
<li><code>&lt;agentDir&gt;/auth-profiles.json</code>（デフォルト：<code>~/.openclaw/agents/&lt;agentId&gt;/agent/auth-profiles.json</code>）</li>
</ul>
<p>関連項目：<a href="../../concepts/oauth">/concepts/oauth</a></p>
<p>レガシー OAuth のインポート：</p>
<ul>
<li><code>~/.openclaw/credentials/oauth.json</code>（または <code>$OPENCLAW_STATE_DIR/credentials/oauth.json</code>）</li>
</ul>
<p>組み込み Pi エージェントは、次にランタイムキャッシュを保持します。</p>
<ul>
<li><code>&lt;agentDir&gt;/auth.json</code>（自動管理。手動編集はしないでください）</li>
</ul>
<p>レガシーエージェントディレクトリ（マルチエージェント以前）：</p>
<ul>
<li><code>~/.openclaw/agent/*</code>（<code>openclaw doctor</code> により <code>~/.openclaw/agents/&lt;defaultAgentId&gt;/agent/*</code> へ移行）</li>
</ul>
<p>オーバーライド:</p>
<ul>
<li>OAuth ディレクトリ（レガシーインポートのみ）：<code>OPENCLAW_OAUTH_DIR</code></li>
<li>エージェントディレクトリ（デフォルトエージェントルートの上書き）：<code>OPENCLAW_AGENT_DIR</code>（推奨）、<code>PI_CODING_AGENT_DIR</code>（レガシー）</li>
</ul>
<p>初回使用時に、OpenClaw は <code>oauth.json</code> のエントリーを <code>auth-profiles.json</code> にインポートします。</p>
<h3 id="auth"><code>auth</code><a class="headerlink" href="#auth" title="Permanent link">&para;</a></h3>
<p>認証プロファイルのオプションのメタデータ。 これは <strong>秘密を保存しません</strong> 。
プロファイル ID をプロバイダー + モード (およびオプションのメール) にマッピングし、フェイルオーバーに使用されるプロバイダー
ローテーション注文を定義します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">  </span><span class="nv">auth</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="nv">profiles</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">      </span><span class="nv">&quot;anthropic:me@example.com&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anthropic&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oauth&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">email</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;me@example.com&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">      </span><span class="nv">&quot;anthropic:work&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anthropic&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;api_key&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">    </span><span class="nv">order</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">      </span><span class="nv">anthropic</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;anthropic:me@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;anthropic:work&quot;</span><span class="p">],</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="p">}</span>
</code></pre></div>
<h3 id="agentslistidentity"><code>agents.list[].identity</code><a class="headerlink" href="#agentslistidentity" title="Permanent link">&para;</a></h3>
<p>デフォルトとUXに使用されるエージェントごとのオプションのID。 これはmacOSオンボーディングアシスタントによって書かれています。</p>
<p>設定されている場合、OpenClaw は（明示的に設定していない場合のみ）次のデフォルトを導出します。</p>
<ul>
<li>アクティブエージェントの <code>identity.emoji</code> から <code>messages.ackReaction</code>（フォールバックは 👀）</li>
<li>エージェントの <code>identity.name</code>/<code>identity.emoji</code> から <code>agents.list[].groupChat.mentionPatterns</code>（Telegram/Slack/Discord/Google Chat/iMessage/WhatsApp のグループで「@Samantha」が機能します）</li>
<li><code>identity.avatar</code> はワークスペース相対的な画像パスまたはリモート URL/データ URL を受け付けます。 ローカルファイルはエージェントワークスペース内にある必要があります。</li>
</ul>
<p><code>identity.avatar</code> が受け付ける値：</p>
<ul>
<li>ワークスペース相対パス（エージェントワークスペース内に限定）</li>
<li><code>http(s)</code> URL</li>
<li><code>data:</code> URI</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="p">{</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">        </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">,</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">        </span><span class="nv">identity</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">          </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Samantha&quot;</span><span class="p">,</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">          </span><span class="nv">theme</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;helpful sloth&quot;</span><span class="p">,</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">          </span><span class="nv">emoji</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;🦥&quot;</span><span class="p">,</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">          </span><span class="nv">avatar</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;avatars/samantha.png&quot;</span><span class="p">,</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="p">}</span>
</code></pre></div>
<h3 id="wizard"><code>wizard</code><a class="headerlink" href="#wizard" title="Permanent link">&para;</a></h3>
<p>CLI ウィザード（<code>onboard</code>、<code>configure</code>、<code>doctor</code>）によって書き込まれるメタデータです。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="p">{</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">  </span><span class="nv">wizard</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">    </span><span class="nv">lastRunAt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2026-01-01T00:00:00.000Z&quot;</span><span class="p">,</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="nv">lastRunVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2026.1.4&quot;</span><span class="p">,</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="nv">lastRunCommit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;abc1234&quot;</span><span class="p">,</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="nv">lastRunCommand</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;configure&quot;</span><span class="p">,</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="nv">lastRunMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local&quot;</span><span class="p">,</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="p">}</span>
</code></pre></div>
<h3 id="logging"><code>logging</code><a class="headerlink" href="#logging" title="Permanent link">&para;</a></h3>
<ul>
<li>デフォルトのログファイル：<code>/tmp/openclaw/openclaw-YYYY-MM-DD.log</code></li>
<li>安定したパスが必要な場合は、<code>logging.file</code> を <code>/tmp/openclaw/openclaw.log</code> に設定してください。</li>
<li>コンソール出力は次で個別に調整できます。</li>
<li><code>logging.consoleLevel</code>（デフォルト：<code>info</code>、<code>--verbose</code> のとき <code>debug</code> に昇格）</li>
<li><code>logging.consoleStyle</code>（<code>pretty</code> | <code>compact</code> | <code>json</code>）</li>
<li>ツール要約は、秘密の漏洩を避けるために編集することができます:</li>
<li><code>logging.redactSensitive</code>（<code>off</code> | <code>tools</code>、デフォルト：<code>tools</code>）</li>
<li><code>logging.redactPatterns</code>（正規表現文字列の配列。デフォルトを上書き）</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="p">{</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w">  </span><span class="nv">logging</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">    </span><span class="nv">level</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;info&quot;</span><span class="p">,</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">    </span><span class="nv">file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/tmp/openclaw/openclaw.log&quot;</span><span class="p">,</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="nv">consoleLevel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;info&quot;</span><span class="p">,</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="nv">consoleStyle</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pretty&quot;</span><span class="p">,</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="nv">redactSensitive</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tools&quot;</span><span class="p">,</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="nv">redactPatterns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">      </span><span class="c1">// Example: override defaults with your own rules.</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">      </span><span class="s">&quot;</span><span class="se">\\</span><span class="s">bTOKEN</span><span class="se">\\</span><span class="s">b</span><span class="se">\\</span><span class="s">s*[=:]</span><span class="se">\\</span><span class="s">s*([</span><span class="se">\&quot;</span><span class="s">&#39;]?)([^</span><span class="se">\\</span><span class="s">s</span><span class="se">\&quot;</span><span class="s">&#39;]+)</span><span class="se">\\</span><span class="s">1&quot;</span><span class="p">,</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">      </span><span class="s">&quot;/</span><span class="se">\\</span><span class="s">bsk-[A-Za-z0-9_-]{8,}</span><span class="se">\\</span><span class="s">b/gi&quot;</span><span class="p">,</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="p">}</span>
</code></pre></div>
<h3 id="channelswhatsappdmpolicy"><code>channels.whatsapp.dmPolicy</code><a class="headerlink" href="#channelswhatsappdmpolicy" title="Permanent link">&para;</a></h3>
<p>WhatsAppダイレクトチャット (DMs) の処理方法を制御します。</p>
<ul>
<li><code>"ペアリング"</code> (デフォルト): 未知の送信者はペアリングコードを取得します。所有者は承認する必要があります</li>
<li><code>"allowlist"</code>: <code>channels.whatsapp.allowFrom</code>（またはペアでallowstore）</li>
<li><code>"open"</code>: すべてのインバウンドDMを許可する (<code>channels.whatsapp.allowFrom</code> に <code>"*"</code>を含める)</li>
<li><code>"disabled"</code>: すべてのインバウンドDMを無視する</li>
</ul>
<p>ペアリングコードは1時間後に失効します。ボットは新しいリクエストが作成されたときにのみペアリングコードを送信します。 保留中のDMペアリングリクエストはデフォルトで<strong>3チャンネル</strong>で上限されます。</p>
<p>ペアリング承認：</p>
<ul>
<li><code>openclaw pairing list whatsapp</code></li>
<li>
<ol>
<li><code>openclaw pairing approve whatsapp &lt;code&gt;</code></li>
</ol>
</li>
</ul>
<h3 id="channelswhatsappallowfrom"><code>channels.whatsapp.allowFrom</code><a class="headerlink" href="#channelswhatsappallowfrom" title="Permanent link">&para;</a></h3>
<p>WhatsAppの自動返信を引き起こす可能性のあるE.164電話番号の許可リスト(<strong>DMのみ</strong>)。
空と <code>channels.whatsapp.dmPolicy="ペアリング"</code>の場合、未知の送信者はペアリングコードを受け取ります。
グループの場合は、<code>channels.whatsapp.groupPolicy</code> + <code>channels.whatsapp.groupAllowFrom</code> を使用します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="mf">26.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">      </span><span class="nv">dmPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pairing&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// pairing | allowlist | open | disabled</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">      </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15555550123&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;+447700900123&quot;</span><span class="p">],</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">      </span><span class="nv">textChunkLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">4000</span><span class="p">,</span><span class="w"> </span><span class="c1">// optional outbound chunk size (chars)</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">      </span><span class="nv">chunkMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;length&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// optional chunking mode (length | newline)</span>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">      </span><span class="nv">mediaMaxMb</span><span class="p">:</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="c1">// optional inbound media cap (MB)</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="p">}</span>
</code></pre></div>
<h3 id="channelswhatsappsendreceipts"><code>channels.whatsapp.sendReceipts</code><a class="headerlink" href="#channelswhatsappsendreceipts" title="Permanent link">&para;</a></h3>
<p>受信したWhatsAppメッセージが既読としてマークされているかどうかを制御します(青ティック)。 デフォルト: <code>true</code></p>
<p>セルフチャットモードは、有効になっていても開封通知をスキップします。</p>
<p>アカウント毎のオーバーライド: <code>channels.whatsapp.accounts。&lt;id&gt;.sendReadeipts</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="p">{</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">sendReadReceipts</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="p">}</span>
</code></pre></div>
<h3 id="channelswhatsappaccounts-multi-account"><code>channels.whatsapp.accounts</code> (multi-account)<a class="headerlink" href="#channelswhatsappaccounts-multi-account" title="Permanent link">&para;</a></h3>
<p>1 つのゲートウェイで複数の WhatsApp アカウントを実行します:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="mf">27.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">      </span><span class="nv">accounts</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">        </span><span class="nv">default</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"> </span><span class="c1">// optional; keeps the default id stable</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">        </span><span class="nv">personal</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">        </span><span class="nv">biz</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">          </span><span class="c1">// Optional override. Default: ~/.openclaw/credentials/whatsapp/biz</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="w">          </span><span class="c1">// authDir: &quot;~/.openclaw/credentials/whatsapp/biz&quot;,</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="p">}</span>
</code></pre></div>
<p>gpt-5.2-chat-latest</p>
<ul>
<li>アウトバウンドコマンドは、デフォルトで <code>default</code> を使用します。それ以外の場合は、最初に設定されたアカウント ID (ソート済み) を使用します。</li>
<li>レガシーシングルアカウントのBaileys認証ディレクトリは<code>openclaw doctor</code>によって<code>whatsapp/default</code>に移行されます。</li>
</ul>
<h3 id="channelstelegramaccounts-channelsdiscordaccounts-channelsgooglechataccounts-channelsslackaccounts-channelsmattermostaccounts-channelssignalaccounts-channelsimessageaccounts"><code>channels.telegram.accounts</code> / <code>channels.discord.accounts</code> / <code>channels.googlechat.accounts</code> / <code>channels.slack.accounts</code> / <code>channels.mattermost.accounts</code> / <code>channels.signal.accounts</code> / <code>channels.imessage.accounts</code><a class="headerlink" href="#channelstelegramaccounts-channelsdiscordaccounts-channelsgooglechataccounts-channelsslackaccounts-channelsmattermostaccounts-channelssignalaccounts-channelsimessageaccounts" title="Permanent link">&para;</a></h3>
<p>チャンネルごとに複数のアカウントを実行します（各アカウントには独自の<code>accountId</code>とオプションの<code>name</code>があります）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="mf">28.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">    </span><span class="nv">telegram</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">      </span><span class="nv">accounts</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">        </span><span class="nv">default</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">          </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Primary bot&quot;</span><span class="p">,</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">          </span><span class="nv">botToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123456:ABC...&quot;</span><span class="p">,</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">        </span><span class="nv">alerts</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">          </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alerts bot&quot;</span><span class="p">,</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">          </span><span class="nv">botToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;987654:XYZ...&quot;</span><span class="p">,</span>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="p">}</span>
</code></pre></div>
<p>パラメータ：</p>
<ul>
<li><code>default</code> は <code>accountId</code> が省略された場合に使用されます (CLI + routing)。</li>
<li>Env トークンは <strong>default</strong> アカウントにのみ適用されます。</li>
<li>ベースチャネル設定 (グループポリシー、メンションゲートなど) アカウントごとに上書きされない限り、すべてのアカウントに適用されます。</li>
<li><code>bindings[].match.accountId</code> を使用して、それぞれのアカウントを異なるagents.defaultsにルーティングします。</li>
</ul>
<h3 id="agentslistgroupchat-messagesgroupchat">グループチャットメンションゲート(<code>agents.list[].groupChat</code> + <code>messages.groupChat</code> )<a class="headerlink" href="#agentslistgroupchat-messagesgroupchat" title="Permanent link">&para;</a></h3>
<p>グループメッセージはデフォルトで<strong>メンションを必要とします</strong> (メタデータメンションまたは正規表現パターンのいずれか)。 WhatsApp、Telegram、Discord、Googleチャット、iMessageグループチャットに適用されます。</p>
<p>認証プロファイル用の任意メタデータです。<strong>シークレットは保存しません</strong>。<br />
プロファイル ID をプロバイダー + モード（および任意のメール）にマッピングし、フェイルオーバー時に使用されるプロバイダーのローテーション順を定義します。</p>
<ul>
<li><strong>メタデータの言及</strong>: ネイティブプラットフォーム @-メンション(例: WhatsAppタップto-メンション)。 WhatsAppのセルフチャットモードで無視されます (<code>channels.whatsapp.allowFrom</code>を参照してください)。</li>
<li><strong>テキストパターン</strong>: <code>agents.list[].groupChat.mentionPatterns</code> に定義されている正規表現パターン。 セルフチャットモードに関係なく常にチェックします。</li>
<li>メンションゲートは、メンション検出が可能な場合にのみ適用されます (ネイティブメンションまたは少なくとも1つの <code>mentionPattern</code> )。</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="mf">29.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="nv">groupChat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">historyLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">50</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">groupChat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mentionPatterns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;@openclaw&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;openclaw&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}],</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="p">}</span>
</code></pre></div>
<p><code>messages.groupChat.historyLimit</code> はグループ履歴コンテキストのグローバルデフォルトを設定します。 チャンネルは <code>channel で上書きできます。&lt;channel&gt;.historyLimit</code>（または <code>channels.&lt;channel&gt;マルチアカウントの.accounts.*.historyLimit</code>)。 <code>0</code> を設定すると履歴の折り返しが無効になります。</p>
<h4 id="dm">DM履歴の制限<a class="headerlink" href="#dm" title="Permanent link">&para;</a></h4>
<p>DM の会話は、エージェントが管理するセッションベースの履歴を使用します。 DM セッションごとに保持されるユーザーのターン数を制限できます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="mf">30.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">    </span><span class="nv">telegram</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">      </span><span class="nv">dmHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">30</span><span class="p">,</span><span class="w"> </span><span class="c1">// limit DM sessions to 30 user turns</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">      </span><span class="nv">dms</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">        </span><span class="nv">&quot;123456789&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">historyLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">50</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// per-user override (user ID)</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="p">}</span>
</code></pre></div>
<p>解決順序:</p>
<ol>
<li>DMごとのオーバーライド: <code>channel.&lt;provider&gt;.dms[userId].historyLimit</code></li>
<li>プロバイダのデフォルト: <code>channel.&lt;provider&gt;.dmHistoryLimit</code></li>
<li>制限なし（すべての履歴を保持）</li>
</ol>
<p>サポートされているプロバイダ: <code>telegram</code> 、 <code>whatsapp</code> 、 <code>discord</code> 、 <code>slack</code> 、 <code>signal</code> 、 <code>imessage</code> 、 <code>msteams</code> 。</p>
<p>エージェント毎のオーバーライド（<code>[]</code>でも設定時に優先されます）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="mf">31.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;work&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">groupChat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mentionPatterns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;@workbot&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\\</span><span class="s">+15555550123&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;personal&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">groupChat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mentionPatterns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;@homebot&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\\</span><span class="s">+15555550999&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a><span class="p">}</span>
</code></pre></div>
<p>メンションゲートのデフォルトはチャネルごとにライブ配信されます (<code>channels.whatsapp.groups</code>, <code>channels.telegram.groups</code>, <code>channels.imessage.groups</code>, <code>channels.discord.guilds</code>). <code>*.groups</code> が設定されている場合は、グループの許可リストとしても機能します。すべてのグループを許可する <code>"*"</code> を含めます。</p>
<p>特定のテキストトリガーに <strong>のみ</strong> と応答するには（ネイティブの @-メンションを無視）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="mf">32.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">    </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">      </span><span class="c1">// Include your own number to enable self-chat mode (ignore native @-mentions).</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">      </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15555550123&quot;</span><span class="p">],</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">      </span><span class="nv">groups</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;*&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="w">        </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">,</span>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="w">        </span><span class="nv">groupChat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="w">          </span><span class="c1">// Only these text patterns will trigger responses</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="w">          </span><span class="nv">mentionPatterns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;reisponde&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;@openclaw&quot;</span><span class="p">],</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_13">グループポリシー (チャネルごと)<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p><code>channels.*.groupPolicy</code> を使用して、グループ/ルームのメッセージが全く受け入れられるかどうかを制御します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="mf">33.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">      </span><span class="nv">groupAllowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15551234567&quot;</span><span class="p">],</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">    </span><span class="nv">telegram</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">      </span><span class="nv">groupAllowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;tg:123456789&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;@alice&quot;</span><span class="p">],</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">    </span><span class="nv">signal</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">      </span><span class="nv">groupAllowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15551234567&quot;</span><span class="p">],</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">    </span><span class="nv">imessage</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">      </span><span class="nv">groupAllowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;chat_id:123&quot;</span><span class="p">],</span>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">    </span><span class="nv">msteams</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="w">      </span><span class="nv">groupAllowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;user@org.com&quot;</span><span class="p">],</span>
<a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="w">    </span><span class="nv">discord</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a><span class="w">      </span><span class="nv">guilds</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a><span class="w">        </span><span class="nv">GUILD_ID</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a><span class="w">          </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">help</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-29-28" name="__codelineno-29-28" href="#__codelineno-29-28"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-29-29" name="__codelineno-29-29" href="#__codelineno-29-29"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-29-30" name="__codelineno-29-30" href="#__codelineno-29-30"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-29-31" name="__codelineno-29-31" href="#__codelineno-29-31"></a><span class="w">    </span><span class="nv">slack</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-32" name="__codelineno-29-32" href="#__codelineno-29-32"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-29-33" name="__codelineno-29-33" href="#__codelineno-29-33"></a><span class="w">      </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;#general&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-29-34" name="__codelineno-29-34" href="#__codelineno-29-34"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-29-35" name="__codelineno-29-35" href="#__codelineno-29-35"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-29-36" name="__codelineno-29-36" href="#__codelineno-29-36"></a><span class="p">}</span>
</code></pre></div>
<p>上書き：</p>
<ul>
<li><code>"open"</code>: groups bypass allowlists; mention-gating still applyes.</li>
<li><code>"disabled"</code>: すべてのグループ/ルームメッセージをブロックします。</li>
<li><code>"allowlist"</code>: 許可リストに一致するグループ/ルームのみを許可します。</li>
<li><code>channels.defaults.groupPolicy</code> はプロバイダの <code>groupPolicy</code> が設定されていない場合にデフォルトを設定します。</li>
<li>WhatsApp/Telegram/Signal/iMessage/Microsoft Teams は <code>groupAllowFrom</code> を使用します(fallback: 明示的な <code>allowFrom</code>)。</li>
<li>Discord/Slack use channel allowlist (<code>channels.discord.guilds.*.channels</code>, <code>channels.slack.channels</code>).</li>
<li>グループ DM (Discord/Slack) はまだ <code>dm.groupEnabled</code> + <code>dm.groupChannels</code> で制御されています。</li>
<li>デフォルトは <code>groupPolicy: "allowlist"</code> (<code>channels.defaults.groupPolicy</code> で上書きされない限り) です。許可リストが設定されていない場合、グループメッセージはブロックされます。</li>
</ul>
<h3 id="agentslist-bindings">マルチエージェントルーティング (<code>agents.list</code> + <code>bindings</code>)<a class="headerlink" href="#agentslist-bindings" title="Permanent link">&para;</a></h3>
<p>1 つの Gateway 内で複数の孤立したエージェント (ワークスペース、<code>agentDir</code>、セッション) を実行します。
受信メッセージはバインディングを介してエージェントにルーティングされます。</p>
<ul>
<li><code>agents.list[]</code>: エージェントごとに上書きします。</li>
<li><code>id</code>: stable agent id (required).</li>
<li><code>default</code>: 任意; 複数が設定されている場合、最初の勝利と警告が記録されます。
    何も設定されていない場合は、リストの<strong>最初のエントリ</strong>はデフォルトのエージェントです。</li>
<li><code>name</code>: エージェントの表示名。</li>
<li><code>workspace</code>: default <code>~/.openclaw/workspace-&lt;agentId&gt;</code> (<code>main</code>の場合、<code>agents.defaults.workspace</code>に戻ります)。</li>
<li>デフォルトおよび UX に使用される、任意のエージェントごとのアイデンティティです。これは macOS のオンボーディングアシスタントによって書き込まれます。</li>
<li><code>model</code>: エージェント毎のデフォルトのモデルでは、そのエージェントの <code>agents.defaults.model</code> を上書きします。<ul>
<li>string form: <code>"provider/model"</code>, overrides only <code>agents.defaults.model.primary</code></li>
<li>object form: <code>{ primary, fallbacks }</code> (フォールバックが <code>agents.defaults.model.fallbacks</code> をオーバーライドします; <code>[]</code> はエージェントのグローバルフォールバックを無効にします)</li>
</ul>
</li>
<li><code>identity.avatar</code> は、ワークスペース相対の画像パス、またはリモート URL／data URL を受け付けます。ローカルファイルはエージェントワークスペース内に存在する必要があります。</li>
<li><code>groupChat</code>: エージェントごとのメンションゲート(<code>mentionPatterns</code>)。</li>
<li><code>sandbox</code>: エージェントごとの sandbox 設定 (<code>agents.defaults.sandbox</code> を上書きします)。<ul>
<li><code>mode</code>: <code>"off"</code> | <code>"non-main"</code> | <code>"all"</code></li>
<li><code>workspaceAccess</code>: <code>"none"</code> | <code>"ro"</code> | <code>"rw"</code></li>
<li><code>scope</code>: <code>"session"</code> | <code>"agent"</code> | <code>"shared"</code></li>
<li><code>workspaceRoot</code>: カスタムサンドボックスワークスペースルート</li>
<li><code>docker</code>: per-agent docker overrides (e.g. <code>image</code>, <code>network</code>, <code>env</code>, <code>setupCommand</code>, limits; <code>scope: "shared"</code>)</li>
<li><code>browser</code>: エージェントごとのサンドボックス化されたブラウザーのオーバーライド (<code>scope: "shared"</code>の場合は無視されます)</li>
<li><code>prune</code>: エージェントごとに sandbox 剪定オーバーライド (<code>scope: "shared"</code>の場合は無視されます)</li>
</ul>
</li>
<li><code>subagents</code>: エージェント毎のサブエージェントのデフォルト。<ul>
<li><code>allowAgents</code>: allowlist of agent ids for <code>sessions_spawn</code> from this agent (<code>["*"]</code> = allow any; default: only same agent)</li>
</ul>
</li>
<li><code>tools</code>: エージェント毎のツール制限 (Sandbox ツールポリシーの前に適用)<ul>
<li><code>profile</code>: 基本ツールプロファイル (allow/denyの前に適用)</li>
<li><code>allow</code>: 許可されているツール名の配列</li>
<li><code>deny</code>: 拒否されたツール名の配列 (deny wins)</li>
</ul>
</li>
<li><code>agents.defaults</code>: 共有エージェントのデフォルト (モデル、ワークスペース、サンドボックスなど)。</li>
<li><code>bindings[]</code>: <code>agentId</code> にインバウンドメッセージをルーティングします。</li>
<li><code>match.channel</code> (必須)</li>
<li><code>match.accountId</code> (省略可能; <code>*</code> = 任意のアカウント; 省略された = デフォルトのアカウント)</li>
<li><code>match.peer</code> (optional; <code>{ kind: direct|group|channel, id }</code>)</li>
<li><code>match.guildId</code> / <code>match.teamId</code> (オプション; channel-specific)</li>
</ul>
<p>決定的な一致順序:</p>
<ol>
<li><code>match.peer</code></li>
<li><code>match.guildId</code></li>
<li><code>match.teamId</code></li>
<li><code>match.accountId</code> (正確にはピア/ギルド/チームなし)</li>
<li><code>match.accountId: "*"</code> (チャネル全体、ピア/ギルド/チームなし)</li>
<li>デフォルトエージェント (<code>agents.list[].default</code>, else first list entry, else <code>"main"</code>)</li>
</ol>
<p>各マッチ階層の中で、<code>bindings</code>の最初のマッチング項目が勝利します。</p>
<h4 id="_14">エージェント別アクセスプロファイル（マルチエージェント）<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<p>各エージェントは、独自のサンドボックス+ツールポリシーを運ぶことができます。 これを使用して、1 つのゲートウェイにアクセス
レベルをミックスします。</p>
<ul>
<li><strong>フルアクセス</strong> (パーソナルエージェント)</li>
<li><strong>読み取り専用</strong> ツール + ワークスペース</li>
<li><strong>ファイルシステムにアクセスできません</strong> (メッセージ/セッションツールのみ)</li>
</ul>
<p><a href="../../tools/multi-agent-sandbox-tools">マルチエージェントのサンドボックスとツール</a> を参照してください。その他の例と
。</p>
<p>フルアクセス(サンドボックスなし):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="p">{</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">        </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;personal&quot;</span><span class="p">,</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">        </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace-personal&quot;</span><span class="p">,</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">        </span><span class="nv">sandbox</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;off&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="p">}</span>
</code></pre></div>
<p>読み取り専用ツール + 読み取り専用ワークスペース:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="mf">34.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">        </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;family&quot;</span><span class="p">,</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">        </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace-family&quot;</span><span class="p">,</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">        </span><span class="nv">sandbox</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">          </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;all&quot;</span><span class="p">,</span>
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="w">          </span><span class="nv">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;agent&quot;</span><span class="p">,</span>
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="w">          </span><span class="nv">workspaceAccess</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ro&quot;</span><span class="p">,</span>
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="w">        </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a><span class="w">          </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a><span class="w">            </span><span class="s">&quot;read&quot;</span><span class="p">,</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a><span class="w">            </span><span class="s">&quot;sessions_list&quot;</span><span class="p">,</span>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a><span class="w">            </span><span class="s">&quot;sessions_history&quot;</span><span class="p">,</span>
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a><span class="w">            </span><span class="s">&quot;sessions_send&quot;</span><span class="p">,</span>
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="w">            </span><span class="s">&quot;sessions_spawn&quot;</span><span class="p">,</span>
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="w">            </span><span class="s">&quot;session_status&quot;</span><span class="p">,</span>
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a><span class="w">          </span><span class="p">],</span>
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a><span class="w">          </span><span class="nv">deny</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;write&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;edit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;apply_patch&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;exec&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;process&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;browser&quot;</span><span class="p">],</span>
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a><span class="p">}</span>
</code></pre></div>
<p>ファイルシステムへのアクセスがありません (メッセージング/セッションツールが有効化されています):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="mf">35.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">        </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;public&quot;</span><span class="p">,</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">        </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace-public&quot;</span><span class="p">,</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">        </span><span class="nv">sandbox</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">          </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;all&quot;</span><span class="p">,</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">          </span><span class="nv">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;agent&quot;</span><span class="p">,</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">          </span><span class="nv">workspaceAccess</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;none&quot;</span><span class="p">,</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="w">        </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="w">          </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="w">            </span><span class="s">&quot;sessions_list&quot;</span><span class="p">,</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="w">            </span><span class="s">&quot;sessions_history&quot;</span><span class="p">,</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="w">            </span><span class="s">&quot;sessions_send&quot;</span><span class="p">,</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="w">            </span><span class="s">&quot;sessions_spawn&quot;</span><span class="p">,</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="w">            </span><span class="s">&quot;session_status&quot;</span><span class="p">,</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="w">            </span><span class="s">&quot;whatsapp&quot;</span><span class="p">,</span>
<a id="__codelineno-32-20" name="__codelineno-32-20" href="#__codelineno-32-20"></a><span class="w">            </span><span class="s">&quot;telegram&quot;</span><span class="p">,</span>
<a id="__codelineno-32-21" name="__codelineno-32-21" href="#__codelineno-32-21"></a><span class="w">            </span><span class="s">&quot;slack&quot;</span><span class="p">,</span>
<a id="__codelineno-32-22" name="__codelineno-32-22" href="#__codelineno-32-22"></a><span class="w">            </span><span class="s">&quot;discord&quot;</span><span class="p">,</span>
<a id="__codelineno-32-23" name="__codelineno-32-23" href="#__codelineno-32-23"></a><span class="w">            </span><span class="s">&quot;gateway&quot;</span><span class="p">,</span>
<a id="__codelineno-32-24" name="__codelineno-32-24" href="#__codelineno-32-24"></a><span class="w">          </span><span class="p">],</span>
<a id="__codelineno-32-25" name="__codelineno-32-25" href="#__codelineno-32-25"></a><span class="w">          </span><span class="nv">deny</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-32-26" name="__codelineno-32-26" href="#__codelineno-32-26"></a><span class="w">            </span><span class="s">&quot;read&quot;</span><span class="p">,</span>
<a id="__codelineno-32-27" name="__codelineno-32-27" href="#__codelineno-32-27"></a><span class="w">            </span><span class="s">&quot;write&quot;</span><span class="p">,</span>
<a id="__codelineno-32-28" name="__codelineno-32-28" href="#__codelineno-32-28"></a><span class="w">            </span><span class="s">&quot;edit&quot;</span><span class="p">,</span>
<a id="__codelineno-32-29" name="__codelineno-32-29" href="#__codelineno-32-29"></a><span class="w">            </span><span class="s">&quot;apply_patch&quot;</span><span class="p">,</span>
<a id="__codelineno-32-30" name="__codelineno-32-30" href="#__codelineno-32-30"></a><span class="w">            </span><span class="s">&quot;exec&quot;</span><span class="p">,</span>
<a id="__codelineno-32-31" name="__codelineno-32-31" href="#__codelineno-32-31"></a><span class="w">            </span><span class="s">&quot;process&quot;</span><span class="p">,</span>
<a id="__codelineno-32-32" name="__codelineno-32-32" href="#__codelineno-32-32"></a><span class="w">            </span><span class="s">&quot;browser&quot;</span><span class="p">,</span>
<a id="__codelineno-32-33" name="__codelineno-32-33" href="#__codelineno-32-33"></a><span class="w">            </span><span class="s">&quot;canvas&quot;</span><span class="p">,</span>
<a id="__codelineno-32-34" name="__codelineno-32-34" href="#__codelineno-32-34"></a><span class="w">            </span><span class="s">&quot;nodes&quot;</span><span class="p">,</span>
<a id="__codelineno-32-35" name="__codelineno-32-35" href="#__codelineno-32-35"></a><span class="w">            </span><span class="s">&quot;cron&quot;</span><span class="p">,</span>
<a id="__codelineno-32-36" name="__codelineno-32-36" href="#__codelineno-32-36"></a><span class="w">            </span><span class="s">&quot;gateway&quot;</span><span class="p">,</span>
<a id="__codelineno-32-37" name="__codelineno-32-37" href="#__codelineno-32-37"></a><span class="w">            </span><span class="s">&quot;image&quot;</span><span class="p">,</span>
<a id="__codelineno-32-38" name="__codelineno-32-38" href="#__codelineno-32-38"></a><span class="w">          </span><span class="p">],</span>
<a id="__codelineno-32-39" name="__codelineno-32-39" href="#__codelineno-32-39"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-32-40" name="__codelineno-32-40" href="#__codelineno-32-40"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-32-41" name="__codelineno-32-41" href="#__codelineno-32-41"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-32-42" name="__codelineno-32-42" href="#__codelineno-32-42"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-32-43" name="__codelineno-32-43" href="#__codelineno-32-43"></a><span class="p">}</span>
</code></pre></div>
<p>例: 2つの WhatsApp アカウント → 2つのエージェント</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="mf">36.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;home&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">default</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace-home&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;work&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace-work&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">  </span><span class="nv">bindings</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nv">agentId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;home&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">match</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">channel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;whatsapp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">accountId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;personal&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nv">agentId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;work&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">match</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">channel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;whatsapp&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">accountId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;biz&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="w">  </span><span class="p">],</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="w">    </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="w">      </span><span class="nv">accounts</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="w">        </span><span class="nv">personal</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="w">        </span><span class="nv">biz</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a><span class="p">}</span>
</code></pre></div>
<h3 id="toolsagenttoagent"><code>tools.agentToAgent</code> (任意)<a class="headerlink" href="#toolsagenttoagent" title="Permanent link">&para;</a></h3>
<p>エージェントからエージェントへのメッセージングはオプトインです:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">    </span><span class="nv">agentToAgent</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">      </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;home&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;work&quot;</span><span class="p">],</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="p">}</span>
</code></pre></div>
<h3 id="messagesqueue"><code>messages.queue</code><a class="headerlink" href="#messagesqueue" title="Permanent link">&para;</a></h3>
<p>エージェントの実行がすでにアクティブなときに受信メッセージがどのように動作するかを制御します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="mf">37.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="w">  </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="w">    </span><span class="nv">queue</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">      </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;collect&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// steer | followup | collect | steer-backlog (steer+backlog ok) | interrupt (queue=steer legacy)</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">      </span><span class="nv">debounceMs</span><span class="p">:</span><span class="w"> </span><span class="mf">1000</span><span class="p">,</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">      </span><span class="nv">cap</span><span class="p">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">      </span><span class="nv">drop</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;summarize&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// old | new | summarize</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">      </span><span class="nv">byChannel</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">        </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;collect&quot;</span><span class="p">,</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">        </span><span class="nv">telegram</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;collect&quot;</span><span class="p">,</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">        </span><span class="nv">discord</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;collect&quot;</span><span class="p">,</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">        </span><span class="nv">imessage</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;collect&quot;</span><span class="p">,</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">        </span><span class="nv">webchat</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;collect&quot;</span><span class="p">,</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="p">}</span>
</code></pre></div>
<h3 id="messagesinbound"><code>messages.inbound</code><a class="headerlink" href="#messagesinbound" title="Permanent link">&para;</a></h3>
<p><strong>同じ送信者</strong>からの迅速な受信メッセージをデバウンスすることで、複数の
メッセージが単一のエージェントターンになります。 38. デバウンスはチャンネル＋会話ごとにスコープされ、返信のスレッド化／ID には最新のメッセージが使用されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="mf">39.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="w">  </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="w">    </span><span class="nv">inbound</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="w">      </span><span class="nv">debounceMs</span><span class="p">:</span><span class="w"> </span><span class="mf">2000</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0 disables</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="w">      </span><span class="nv">byChannel</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="w">        </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="mf">5000</span><span class="p">,</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="w">        </span><span class="nv">slack</span><span class="p">:</span><span class="w"> </span><span class="mf">1500</span><span class="p">,</span>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="w">        </span><span class="nv">discord</span><span class="p">:</span><span class="w"> </span><span class="mf">1500</span><span class="p">,</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a><span class="p">}</span>
</code></pre></div>
<p>注記：</p>
<ul>
<li><strong>テキストのみ</strong> のメッセージをデバウンスします; メディア/添付ファイルはすぐにフラッシュします。</li>
<li>制御コマンド (例: <code>/queue</code>, <code>/new</code>) は単独のままになるようにデバウンスをバイパスします。</li>
</ul>
<h3 id="commands"><code>commands</code> (チャットコマンドの処理)<a class="headerlink" href="#commands" title="Permanent link">&para;</a></h3>
<p>コネクタ間でチャットコマンドを有効にする方法を設定します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="mf">40.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">  </span><span class="nv">commands</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">    </span><span class="nv">native</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// register native commands when supported (auto)</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">    </span><span class="nv">text</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// parse slash commands in chat messages</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">    </span><span class="nv">bash</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// allow ! (alias: /bash) (host-only; requires tools.elevated allowlists)</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">    </span><span class="nv">bashForegroundMs</span><span class="p">:</span><span class="w"> </span><span class="mf">2000</span><span class="p">,</span><span class="w"> </span><span class="c1">// bash foreground window (0 backgrounds immediately)</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">    </span><span class="nv">config</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// allow /config (writes to disk)</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">    </span><span class="nv">debug</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// allow /debug (runtime-only overrides)</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">    </span><span class="nv">restart</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// allow /restart + gateway restart tool</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w">    </span><span class="nv">useAccessGroups</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// enforce access-group allowlists/policies for commands</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="p">}</span>
</code></pre></div>
<p>注記：</p>
<ul>
<li>テキストコマンドは、<strong>スタンドアロン</strong> メッセージとして送信し、先頭の <code>/</code> (プレーンテキストエイリアスなし) を使用する必要があります。</li>
<li><code>commands.text: false</code> はチャットメッセージの解析を無効にします。</li>
<li><code>commands.native: "auto"</code> (デフォルト) はDiscord/Telegramのネイティブコマンドをオンにし、Slackをオフにします。サポートされていないチャンネルはテキストのみのままです。</li>
<li><code>commands.native: true|false</code> を設定すると、チャンネルごとに強制的に設定したり、<code>channels.discord.commands.native</code> 、 <code>channels.telegram.commands.native</code> 、 <code>channels.slack.commands.native</code> (bool または <code>"auto"</code>) でオーバーライドしたりできます。 <code>false</code> は起動時にDiscord/Telegramで登録されているコマンドをクリアします。SlackのコマンドはSlackアプリで管理されます。</li>
<li><code>channels.telegram.customCommands</code> は追加のTelegramボットメニューエントリを追加します。 名前は正規化されます; ネイティブコマンドとの競合は無視されます。</li>
<li><code>commands.bash: true</code> で <code>! &lt;cmd&gt;</code>はホストシェルコマンドを実行します(<code>/bash &lt;cmd&gt;</code>もエイリアスとして動作します)。 <code>tools.elevated.enabled</code> が必要で、<code>tools.elevated.allowFrom.&lt;channel&gt;</code> 配下に置きます。</li>
<li><code>commands.bashForegroundMs</code> は、バックグラウンドの前にバッシュが待機する時間を制御します。 bash ジョブが実行されている間、新しい <code>! &lt;cmd&gt;</code> リクエストは拒否されます (一度に 1 つ)。</li>
<li><code>config.patch</code> を使用すると、無関係なキーを上書きせずに、既存設定へ部分更新をマージできます。<br />
  JSON マージパッチのセマンティクスを適用します。</li>
<li><code>channel.&lt;provider&gt;.configWrites</code>は、そのチャンネルによって開始された設定変更をゲートします (デフォルト: true)。 これは <code>/config set|unset</code> に加えて、プロバイダ固有の自動移行 (Telegram スーパー グループ ID の変更、Slack チャンネル ID の変更) に適用されます。</li>
<li><code>commands.debug: true</code> は <code>/debug</code> を有効にします (ランタイムのみの上書き)。</li>
<li><code>commands.restart: true</code> は <code>/restart</code> とゲートウェイツールの再起動アクションを有効にします。</li>
<li><code>commands.useAccessGroups: false</code> を使用すると、アクセス許可グループ/ポリシーを回避できます。</li>
<li>スラッシュコマンドとディレクティブは <strong>authorized 送信者</strong> に対してのみ使用されます。 Authorization は
  channel allowlists/pairing plus <code>commands.useAccessGroups</code> に由来します。</li>
</ul>
<h3 id="web-whatsapp-web-channel-runtime"><code>web</code> (WhatsApp Web channel runtime)<a class="headerlink" href="#web-whatsapp-web-channel-runtime" title="Permanent link">&para;</a></h3>
<p>WhatsAppはゲートウェイのウェブチャンネル(ベイリースウェブ)を通じて実行されます。 リンクされたセッションが存在すると自動的に開始します。
デフォルトではオフにするには、 <code>web.enabled: false</code> を設定します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="mf">1.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">  </span><span class="nv">web</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">    </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="nv">heartbeatSeconds</span><span class="p">:</span><span class="w"> </span><span class="mf">60</span><span class="p">,</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">    </span><span class="nv">reconnect</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">      </span><span class="nv">initialMs</span><span class="p">:</span><span class="w"> </span><span class="mf">2000</span><span class="p">,</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">      </span><span class="nv">maxMs</span><span class="p">:</span><span class="w"> </span><span class="mf">120000</span><span class="p">,</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">      </span><span class="nv">factor</span><span class="p">:</span><span class="w"> </span><span class="mf">1.4</span><span class="p">,</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">      </span><span class="nv">jitter</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">      </span><span class="nv">maxAttempts</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="p">}</span>
</code></pre></div>
<h3 id="channelstelegram-bot"><code>channels.telegram</code> (botのトランスポート)<a class="headerlink" href="#channelstelegram-bot" title="Permanent link">&para;</a></h3>
<p>OpenClawは、<code>channels.telegram</code>設定セクションが存在する場合にのみTelegramを起動します。 ボットトークンは <code>channels.telegram.botToken</code> (または <code>channels.telegram.tokenFile</code> )から解決され、<code>TELEGRAM_BOT_TOKEN</code> はデフォルトアカウントのフォールバックとして使用されます。
自動起動を無効にするには、<code>channels.telegram.enabled: false</code> を設定してください。
複数アカウントのサポートは <code>channels.telegram.accounts</code> のもとで行われます（上記のマルチアカウントセクションを参照）。 Envトークンはデフォルトのアカウントにのみ適用されます。
<code>channels.telegram.configWrites: false</code> を設定して、Telegramが起動する設定への書き込みをブロックします(スーパーグループ ID の移行と <code>/config set|unset</code> を含みます)。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="mf">2.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="w">    </span><span class="nv">telegram</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">      </span><span class="nv">botToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-bot-token&quot;</span><span class="p">,</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">      </span><span class="nv">dmPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pairing&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// pairing | allowlist | open | disabled</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="w">      </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;tg:123456789&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// optional; &quot;open&quot; requires [&quot;*&quot;]</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="w">      </span><span class="nv">groups</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">        </span><span class="nv">&quot;*&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">        </span><span class="nv">&quot;-1001234567890&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">          </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;@admin&quot;</span><span class="p">],</span>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="w">          </span><span class="nv">systemPrompt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Keep answers brief.&quot;</span><span class="p">,</span>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="w">          </span><span class="nv">topics</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a><span class="w">            </span><span class="nv">&quot;99&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="w">              </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="w">              </span><span class="nv">skills</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;search&quot;</span><span class="p">],</span>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="w">              </span><span class="nv">systemPrompt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Stay on topic.&quot;</span><span class="p">,</span>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="w">            </span><span class="p">},</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="w">      </span><span class="nv">customCommands</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-39-23" name="__codelineno-39-23" href="#__codelineno-39-23"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nv">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;backup&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Git backup&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-39-24" name="__codelineno-39-24" href="#__codelineno-39-24"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nv">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;generate&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Create an image&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-39-25" name="__codelineno-39-25" href="#__codelineno-39-25"></a><span class="w">      </span><span class="p">],</span>
<a id="__codelineno-39-26" name="__codelineno-39-26" href="#__codelineno-39-26"></a><span class="w">      </span><span class="nv">historyLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="c1">// include last N group messages as context (0 disables)</span>
<a id="__codelineno-39-27" name="__codelineno-39-27" href="#__codelineno-39-27"></a><span class="w">      </span><span class="nv">replyToMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;first&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | first | all</span>
<a id="__codelineno-39-28" name="__codelineno-39-28" href="#__codelineno-39-28"></a><span class="w">      </span><span class="nv">linkPreview</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// toggle outbound link previews</span>
<a id="__codelineno-39-29" name="__codelineno-39-29" href="#__codelineno-39-29"></a><span class="w">      </span><span class="nv">streamMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;partial&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | partial | block (draft streaming; separate from block streaming)</span>
<a id="__codelineno-39-30" name="__codelineno-39-30" href="#__codelineno-39-30"></a><span class="w">      </span><span class="nv">draftChunk</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-31" name="__codelineno-39-31" href="#__codelineno-39-31"></a><span class="w">        </span><span class="c1">// optional; only for streamMode=block</span>
<a id="__codelineno-39-32" name="__codelineno-39-32" href="#__codelineno-39-32"></a><span class="w">        </span><span class="nv">minChars</span><span class="p">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span>
<a id="__codelineno-39-33" name="__codelineno-39-33" href="#__codelineno-39-33"></a><span class="w">        </span><span class="nv">maxChars</span><span class="p">:</span><span class="w"> </span><span class="mf">800</span><span class="p">,</span>
<a id="__codelineno-39-34" name="__codelineno-39-34" href="#__codelineno-39-34"></a><span class="w">        </span><span class="nv">breakPreference</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;paragraph&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// paragraph | newline | sentence</span>
<a id="__codelineno-39-35" name="__codelineno-39-35" href="#__codelineno-39-35"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-39-36" name="__codelineno-39-36" href="#__codelineno-39-36"></a><span class="w">      </span><span class="nv">actions</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">reactions</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="nv">sendMessage</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// tool action gates (false disables)</span>
<a id="__codelineno-39-37" name="__codelineno-39-37" href="#__codelineno-39-37"></a><span class="w">      </span><span class="nv">reactionNotifications</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;own&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | own | all</span>
<a id="__codelineno-39-38" name="__codelineno-39-38" href="#__codelineno-39-38"></a><span class="w">      </span><span class="nv">mediaMaxMb</span><span class="p">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span>
<a id="__codelineno-39-39" name="__codelineno-39-39" href="#__codelineno-39-39"></a><span class="w">      </span><span class="nv">retry</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-40" name="__codelineno-39-40" href="#__codelineno-39-40"></a><span class="w">        </span><span class="c1">// outbound retry policy</span>
<a id="__codelineno-39-41" name="__codelineno-39-41" href="#__codelineno-39-41"></a><span class="w">        </span><span class="nv">attempts</span><span class="p">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<a id="__codelineno-39-42" name="__codelineno-39-42" href="#__codelineno-39-42"></a><span class="w">        </span><span class="nv">minDelayMs</span><span class="p">:</span><span class="w"> </span><span class="mf">400</span><span class="p">,</span>
<a id="__codelineno-39-43" name="__codelineno-39-43" href="#__codelineno-39-43"></a><span class="w">        </span><span class="nv">maxDelayMs</span><span class="p">:</span><span class="w"> </span><span class="mf">30000</span><span class="p">,</span>
<a id="__codelineno-39-44" name="__codelineno-39-44" href="#__codelineno-39-44"></a><span class="w">        </span><span class="nv">jitter</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>
<a id="__codelineno-39-45" name="__codelineno-39-45" href="#__codelineno-39-45"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-39-46" name="__codelineno-39-46" href="#__codelineno-39-46"></a><span class="w">      </span><span class="nv">network</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-47" name="__codelineno-39-47" href="#__codelineno-39-47"></a><span class="w">        </span><span class="c1">// transport overrides</span>
<a id="__codelineno-39-48" name="__codelineno-39-48" href="#__codelineno-39-48"></a><span class="w">        </span><span class="nv">autoSelectFamily</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-39-49" name="__codelineno-39-49" href="#__codelineno-39-49"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-39-50" name="__codelineno-39-50" href="#__codelineno-39-50"></a><span class="w">      </span><span class="nv">proxy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;socks5://localhost:9050&quot;</span><span class="p">,</span>
<a id="__codelineno-39-51" name="__codelineno-39-51" href="#__codelineno-39-51"></a><span class="w">      </span><span class="nv">webhookUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/telegram-webhook&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// requires webhookSecret</span>
<a id="__codelineno-39-52" name="__codelineno-39-52" href="#__codelineno-39-52"></a><span class="w">      </span><span class="nv">webhookSecret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;secret&quot;</span><span class="p">,</span>
<a id="__codelineno-39-53" name="__codelineno-39-53" href="#__codelineno-39-53"></a><span class="w">      </span><span class="nv">webhookPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/telegram-webhook&quot;</span><span class="p">,</span>
<a id="__codelineno-39-54" name="__codelineno-39-54" href="#__codelineno-39-54"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-39-55" name="__codelineno-39-55" href="#__codelineno-39-55"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-39-56" name="__codelineno-39-56" href="#__codelineno-39-56"></a><span class="p">}</span>
</code></pre></div>
<p>下書きストリーミングノート:</p>
<ul>
<li>Telegram <code>sendMessageDraft</code> (実際のメッセージではなくバブルの下書き) を使用します。</li>
<li><strong>プライベートチャットのトピック</strong> (DMでmessage_thread_id; botはトピックを有効にしています) が必要です。</li>
<li><code>/reasoning stream</code> は下書きに推論をストリームし、最終的な答えを送ります。</li>
<li>再試行ポリシーのデフォルトと挙動は、<a href="../../concepts/retry">Retry policy</a> に記載されています。</li>
</ul>
<h3 id="channelsdiscord-bot"><code>channels.discord</code> (botのトランスポート)<a class="headerlink" href="#channelsdiscord-bot" title="Permanent link">&para;</a></h3>
<p>ボットトークンとオプションのゲートを設定してDiscordボットを設定します。
<code>channels.discord.accounts</code> のマルチアカウントサポートは有効です（上記のマルチアカウントセクションを参照）。 Envトークンはデフォルトのアカウントにのみ適用されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="mf">4.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="w">    </span><span class="nv">discord</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">      </span><span class="nv">token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-bot-token&quot;</span><span class="p">,</span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="w">      </span><span class="nv">mediaMaxMb</span><span class="p">:</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="c1">// clamp inbound media size</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="w">      </span><span class="nv">allowBots</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// allow bot-authored messages</span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="w">      </span><span class="nv">actions</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="w">        </span><span class="c1">// tool action gates (false disables)</span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="w">        </span><span class="nv">reactions</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="w">        </span><span class="nv">stickers</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="w">        </span><span class="nv">polls</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="w">        </span><span class="nv">permissions</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="w">        </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="w">        </span><span class="nv">threads</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="w">        </span><span class="nv">pins</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="w">        </span><span class="nv">search</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="w">        </span><span class="nv">memberInfo</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a><span class="w">        </span><span class="nv">roleInfo</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="w">        </span><span class="nv">roles</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a><span class="w">        </span><span class="nv">channelInfo</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-22" name="__codelineno-40-22" href="#__codelineno-40-22"></a><span class="w">        </span><span class="nv">voiceStatus</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-23" name="__codelineno-40-23" href="#__codelineno-40-23"></a><span class="w">        </span><span class="nv">events</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-24" name="__codelineno-40-24" href="#__codelineno-40-24"></a><span class="w">        </span><span class="nv">moderation</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-40-25" name="__codelineno-40-25" href="#__codelineno-40-25"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-40-26" name="__codelineno-40-26" href="#__codelineno-40-26"></a><span class="w">      </span><span class="nv">replyToMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;off&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | first | all</span>
<a id="__codelineno-40-27" name="__codelineno-40-27" href="#__codelineno-40-27"></a><span class="w">      </span><span class="nv">dm</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-28" name="__codelineno-40-28" href="#__codelineno-40-28"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// disable all DMs when false</span>
<a id="__codelineno-40-29" name="__codelineno-40-29" href="#__codelineno-40-29"></a><span class="w">        </span><span class="nv">policy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pairing&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// pairing | allowlist | open | disabled</span>
<a id="__codelineno-40-30" name="__codelineno-40-30" href="#__codelineno-40-30"></a><span class="w">        </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;1234567890&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;steipete&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// optional DM allowlist (&quot;open&quot; requires [&quot;*&quot;])</span>
<a id="__codelineno-40-31" name="__codelineno-40-31" href="#__codelineno-40-31"></a><span class="w">        </span><span class="nv">groupEnabled</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// enable group DMs</span>
<a id="__codelineno-40-32" name="__codelineno-40-32" href="#__codelineno-40-32"></a><span class="w">        </span><span class="nv">groupChannels</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;openclaw-dm&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// optional group DM allowlist</span>
<a id="__codelineno-40-33" name="__codelineno-40-33" href="#__codelineno-40-33"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-40-34" name="__codelineno-40-34" href="#__codelineno-40-34"></a><span class="w">      </span><span class="nv">guilds</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-35" name="__codelineno-40-35" href="#__codelineno-40-35"></a><span class="w">        </span><span class="nv">&quot;123456789012345678&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-36" name="__codelineno-40-36" href="#__codelineno-40-36"></a><span class="w">          </span><span class="c1">// guild id (preferred) or slug</span>
<a id="__codelineno-40-37" name="__codelineno-40-37" href="#__codelineno-40-37"></a><span class="w">          </span><span class="nv">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;friends-of-openclaw&quot;</span><span class="p">,</span>
<a id="__codelineno-40-38" name="__codelineno-40-38" href="#__codelineno-40-38"></a><span class="w">          </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// per-guild default</span>
<a id="__codelineno-40-39" name="__codelineno-40-39" href="#__codelineno-40-39"></a><span class="w">          </span><span class="nv">reactionNotifications</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;own&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | own | all | allowlist</span>
<a id="__codelineno-40-40" name="__codelineno-40-40" href="#__codelineno-40-40"></a><span class="w">          </span><span class="nv">users</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;987654321098765432&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// optional per-guild user allowlist</span>
<a id="__codelineno-40-41" name="__codelineno-40-41" href="#__codelineno-40-41"></a><span class="w">          </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-42" name="__codelineno-40-42" href="#__codelineno-40-42"></a><span class="w">            </span><span class="nv">general</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-40-43" name="__codelineno-40-43" href="#__codelineno-40-43"></a><span class="w">            </span><span class="nv">help</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-44" name="__codelineno-40-44" href="#__codelineno-40-44"></a><span class="w">              </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-45" name="__codelineno-40-45" href="#__codelineno-40-45"></a><span class="w">              </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-40-46" name="__codelineno-40-46" href="#__codelineno-40-46"></a><span class="w">              </span><span class="nv">users</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;987654321098765432&quot;</span><span class="p">],</span>
<a id="__codelineno-40-47" name="__codelineno-40-47" href="#__codelineno-40-47"></a><span class="w">              </span><span class="nv">skills</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;docs&quot;</span><span class="p">],</span>
<a id="__codelineno-40-48" name="__codelineno-40-48" href="#__codelineno-40-48"></a><span class="w">              </span><span class="nv">systemPrompt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Short answers only.&quot;</span><span class="p">,</span>
<a id="__codelineno-40-49" name="__codelineno-40-49" href="#__codelineno-40-49"></a><span class="w">            </span><span class="p">},</span>
<a id="__codelineno-40-50" name="__codelineno-40-50" href="#__codelineno-40-50"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-40-51" name="__codelineno-40-51" href="#__codelineno-40-51"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-40-52" name="__codelineno-40-52" href="#__codelineno-40-52"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-40-53" name="__codelineno-40-53" href="#__codelineno-40-53"></a><span class="w">      </span><span class="nv">historyLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span><span class="w"> </span><span class="c1">// include last N guild messages as context</span>
<a id="__codelineno-40-54" name="__codelineno-40-54" href="#__codelineno-40-54"></a><span class="w">      </span><span class="nv">textChunkLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">2000</span><span class="p">,</span><span class="w"> </span><span class="c1">// optional outbound text chunk size (chars)</span>
<a id="__codelineno-40-55" name="__codelineno-40-55" href="#__codelineno-40-55"></a><span class="w">      </span><span class="nv">chunkMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;length&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// optional chunking mode (length | newline)</span>
<a id="__codelineno-40-56" name="__codelineno-40-56" href="#__codelineno-40-56"></a><span class="w">      </span><span class="nv">maxLinesPerMessage</span><span class="p">:</span><span class="w"> </span><span class="mf">17</span><span class="p">,</span><span class="w"> </span><span class="c1">// soft max lines per message (Discord UI clipping)</span>
<a id="__codelineno-40-57" name="__codelineno-40-57" href="#__codelineno-40-57"></a><span class="w">      </span><span class="nv">retry</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-58" name="__codelineno-40-58" href="#__codelineno-40-58"></a><span class="w">        </span><span class="c1">// outbound retry policy</span>
<a id="__codelineno-40-59" name="__codelineno-40-59" href="#__codelineno-40-59"></a><span class="w">        </span><span class="nv">attempts</span><span class="p">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<a id="__codelineno-40-60" name="__codelineno-40-60" href="#__codelineno-40-60"></a><span class="w">        </span><span class="nv">minDelayMs</span><span class="p">:</span><span class="w"> </span><span class="mf">500</span><span class="p">,</span>
<a id="__codelineno-40-61" name="__codelineno-40-61" href="#__codelineno-40-61"></a><span class="w">        </span><span class="nv">maxDelayMs</span><span class="p">:</span><span class="w"> </span><span class="mf">30000</span><span class="p">,</span>
<a id="__codelineno-40-62" name="__codelineno-40-62" href="#__codelineno-40-62"></a><span class="w">        </span><span class="nv">jitter</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>
<a id="__codelineno-40-63" name="__codelineno-40-63" href="#__codelineno-40-63"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-40-64" name="__codelineno-40-64" href="#__codelineno-40-64"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-40-65" name="__codelineno-40-65" href="#__codelineno-40-65"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-40-66" name="__codelineno-40-66" href="#__codelineno-40-66"></a><span class="p">}</span>
</code></pre></div>
<p>OpenClawは、<code>channels.discord</code>設定セクションが存在する場合にのみDiscordを開始します。 トークンは<code>channels.discord.token</code>から解決され、<code>DISCORD_BOT_TOKEN</code>をデフォルトのアカウントのフォールバックにします（<code>channels.discord.enabled</code>が<code>false</code>でない限り）。 cron/CLI コマンドの配信ターゲットを指定する場合は、<code>user:&lt;id&gt;</code> または <code>channel:&lt;id&gt;</code> (guild channel) を使用します。
ギルドスラグは小文字でスペースは<code>-</code>に置き換えられます。チャンネルキーはスラッグされたチャンネル名(先頭は<code>#</code>)を使用しません。 ギルドIDをキーとして設定し、曖昧さの名前を変更しないようにします。
Bot-authored messages はデフォルトでは無視されます。 <code>channels.discord.allowBots</code> を有効にします（自己返信ループを防ぐため、独自のメッセージはまだフィルタされています）。
リアクション通知モード:</p>
<ul>
<li><code>off</code>: リアクションイベントなし。</li>
<li><code>own</code>: ボット自身のメッセージへのリアクション（デフォルト）。</li>
<li><code>all</code>: すべてのメッセージへのすべてのリアクション。</li>
<li><code>allowlist</code>: <code>guilds.&lt;id&gt;.users</code> からのリアクションのみ（空リストで無効）。
  アウトバウンドテキストは <code>channels.discord.textChunkLimit</code> (デフォルトは2000)。 <code>channels.discord.chunkMode="newline"を設定すると、長さが分割される前に空白の行 (段落境界) に分割されます。 Discordクライアントは非常に背の高いメッセージをクリップできます。そのため、</code>channels.discord.maxLinesPerMessage` (デフォルト17) は2000文字以下であっても長い複数行の返信を分割します。</li>
<li>再試行ポリシーのデフォルトと挙動は、<a href="../../concepts/retry">Retry policy</a> に記載されています。</li>
</ul>
<h3 id="channelsgooglechat-chat-api-webhook"><code>channels.googlechat</code> (Chat API webhook)<a class="headerlink" href="#channelsgooglechat-chat-api-webhook" title="Permanent link">&para;</a></h3>
<p>Google チャットはアプリレベルの認証(サービスアカウント)を使用してHTTPウェブフック上で実行されます。
マルチアカウントのサポートは <code>channels.googlechat.accounts</code> の下で行われます(上記のマルチアカウントのセクションを参照してください)。 Env var は既定のアカウントにのみ適用されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="mf">6.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w">    </span><span class="nv">googlechat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="w">      </span><span class="nv">serviceAccountFile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/service-account.json&quot;</span><span class="p">,</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">      </span><span class="nv">audienceType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;app-url&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// app-url | project-number</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">      </span><span class="nv">audience</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://gateway.example.com/googlechat&quot;</span><span class="p">,</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">      </span><span class="nv">webhookPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/googlechat&quot;</span><span class="p">,</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="w">      </span><span class="nv">botUser</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;users/1234567890&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// optional; improves mention detection</span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="w">      </span><span class="nv">dm</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="w">        </span><span class="nv">policy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pairing&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// pairing | allowlist | open | disabled</span>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="w">        </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;users/1234567890&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// optional; &quot;open&quot; requires [&quot;*&quot;]</span>
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="w">      </span><span class="nv">groupPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allowlist&quot;</span><span class="p">,</span>
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="w">      </span><span class="nv">groups</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="w">        </span><span class="nv">&quot;spaces/AAAA&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="w">      </span><span class="nv">actions</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">reactions</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="w">      </span><span class="nv">typingIndicator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;message&quot;</span><span class="p">,</span>
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="w">      </span><span class="nv">mediaMaxMb</span><span class="p">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span>
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="p">}</span>
</code></pre></div>
<p>パラメータ：</p>
<ul>
<li>Service account JSON can be inline (<code>serviceAccount</code>) or file based (<code>serviceAccountFile</code>).</li>
<li>デフォルトアカウントのEnvフォールバック：<code>GOOGLE_CHAT_SERVICE_ACCOUNT</code> または <code>GOOGLE_CHAT_SERVCOUNT_FILE</code> 。</li>
<li><code>audienceType</code> + <code>audience</code> はチャットアプリのwebhook認証設定と一致する必要があります。</li>
<li>デリバリターゲットを設定する場合は、<code>spaces/&lt;spaceId&gt;</code> または <code>users/&lt;userId|email&gt;</code> を使用します。</li>
</ul>
<h3 id="channelsslack"><code>channels.slack</code> (ソケットモード)<a class="headerlink" href="#channelsslack" title="Permanent link">&para;</a></h3>
<p>Slackはソケットモードで実行され、Botトークンとappトークンの両方が必要です:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="mf">7.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="w">    </span><span class="nv">slack</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="w">      </span><span class="nv">botToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;xoxb-...&quot;</span><span class="p">,</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="w">      </span><span class="nv">appToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;xapp-...&quot;</span><span class="p">,</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="w">      </span><span class="nv">dm</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="w">        </span><span class="nv">policy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pairing&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// pairing | allowlist | open | disabled</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="w">        </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;U123&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;U456&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*&quot;</span><span class="p">],</span><span class="w"> </span><span class="c1">// optional; &quot;open&quot; requires [&quot;*&quot;]</span>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="w">        </span><span class="nv">groupEnabled</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="w">        </span><span class="nv">groupChannels</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;G123&quot;</span><span class="p">],</span>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="w">      </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a><span class="w">        </span><span class="nv">C123</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="nv">allowBots</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="w">        </span><span class="nv">&quot;#general&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="w">          </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a><span class="w">          </span><span class="nv">requireMention</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a><span class="w">          </span><span class="nv">allowBots</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a><span class="w">          </span><span class="nv">users</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;U123&quot;</span><span class="p">],</span>
<a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a><span class="w">          </span><span class="nv">skills</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;docs&quot;</span><span class="p">],</span>
<a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a><span class="w">          </span><span class="nv">systemPrompt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Short answers only.&quot;</span><span class="p">,</span>
<a id="__codelineno-42-23" name="__codelineno-42-23" href="#__codelineno-42-23"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-42-24" name="__codelineno-42-24" href="#__codelineno-42-24"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-42-25" name="__codelineno-42-25" href="#__codelineno-42-25"></a><span class="w">      </span><span class="nv">historyLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="c1">// include last N channel/group messages as context (0 disables)</span>
<a id="__codelineno-42-26" name="__codelineno-42-26" href="#__codelineno-42-26"></a><span class="w">      </span><span class="nv">allowBots</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-42-27" name="__codelineno-42-27" href="#__codelineno-42-27"></a><span class="w">      </span><span class="nv">reactionNotifications</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;own&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | own | all | allowlist</span>
<a id="__codelineno-42-28" name="__codelineno-42-28" href="#__codelineno-42-28"></a><span class="w">      </span><span class="nv">reactionAllowlist</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;U123&quot;</span><span class="p">],</span>
<a id="__codelineno-42-29" name="__codelineno-42-29" href="#__codelineno-42-29"></a><span class="w">      </span><span class="nv">replyToMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;off&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | first | all</span>
<a id="__codelineno-42-30" name="__codelineno-42-30" href="#__codelineno-42-30"></a><span class="w">      </span><span class="nv">thread</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-31" name="__codelineno-42-31" href="#__codelineno-42-31"></a><span class="w">        </span><span class="nv">historyScope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;thread&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// thread | channel</span>
<a id="__codelineno-42-32" name="__codelineno-42-32" href="#__codelineno-42-32"></a><span class="w">        </span><span class="nv">inheritParent</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-42-33" name="__codelineno-42-33" href="#__codelineno-42-33"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-42-34" name="__codelineno-42-34" href="#__codelineno-42-34"></a><span class="w">      </span><span class="nv">actions</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-35" name="__codelineno-42-35" href="#__codelineno-42-35"></a><span class="w">        </span><span class="nv">reactions</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-36" name="__codelineno-42-36" href="#__codelineno-42-36"></a><span class="w">        </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-37" name="__codelineno-42-37" href="#__codelineno-42-37"></a><span class="w">        </span><span class="nv">pins</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-38" name="__codelineno-42-38" href="#__codelineno-42-38"></a><span class="w">        </span><span class="nv">memberInfo</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-39" name="__codelineno-42-39" href="#__codelineno-42-39"></a><span class="w">        </span><span class="nv">emojiList</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-40" name="__codelineno-42-40" href="#__codelineno-42-40"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-42-41" name="__codelineno-42-41" href="#__codelineno-42-41"></a><span class="w">      </span><span class="nv">slashCommand</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-42" name="__codelineno-42-42" href="#__codelineno-42-42"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-43" name="__codelineno-42-43" href="#__codelineno-42-43"></a><span class="w">        </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openclaw&quot;</span><span class="p">,</span>
<a id="__codelineno-42-44" name="__codelineno-42-44" href="#__codelineno-42-44"></a><span class="w">        </span><span class="nv">sessionPrefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;slack:slash&quot;</span><span class="p">,</span>
<a id="__codelineno-42-45" name="__codelineno-42-45" href="#__codelineno-42-45"></a><span class="w">        </span><span class="nv">ephemeral</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-42-46" name="__codelineno-42-46" href="#__codelineno-42-46"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-42-47" name="__codelineno-42-47" href="#__codelineno-42-47"></a><span class="w">      </span><span class="nv">textChunkLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">4000</span><span class="p">,</span>
<a id="__codelineno-42-48" name="__codelineno-42-48" href="#__codelineno-42-48"></a><span class="w">      </span><span class="nv">chunkMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;length&quot;</span><span class="p">,</span>
<a id="__codelineno-42-49" name="__codelineno-42-49" href="#__codelineno-42-49"></a><span class="w">      </span><span class="nv">mediaMaxMb</span><span class="p">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span>
<a id="__codelineno-42-50" name="__codelineno-42-50" href="#__codelineno-42-50"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-42-51" name="__codelineno-42-51" href="#__codelineno-42-51"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-42-52" name="__codelineno-42-52" href="#__codelineno-42-52"></a><span class="p">}</span>
</code></pre></div>
<p>マルチアカウントのサポートは <code>channels.slack.accounts</code> の下で行われます。(上記のマルチアカウントのセクションを参照してください)。 Envトークンはデフォルトのアカウントにのみ適用されます。</p>
<p>OpenClawはプロバイダが有効になっていて、両方のトークンが(設定または<code>SLACK_BOT_TOKEN</code> + <code>SLACK_APP_TOKEN</code>を介して)設定されているときにSlackを起動します。 cron/CLI コマンドの配信ターゲットを指定する場合は、<code>user:&lt;id&gt;</code> または <code>channel:&lt;id&gt;</code> を使用します。
<code>channels.slack.configWrites: false</code> を設定して、Slackで開始された設定への書き込みをブロックします(チャンネル ID の移行と <code>/config set|unset</code> を含みます)。</p>
<p>Bot-authored messages はデフォルトでは無視されます。 <code>channels.slack.allowBots</code> または <code>channels.slack.channels.slack.channel&lt;id&gt;.allowBots</code> で有効化できます。</p>
<p>リアクション通知モード:</p>
<ul>
<li><code>off</code>: リアクションイベントなし。</li>
<li><code>own</code>: ボット自身のメッセージへのリアクション（デフォルト）。</li>
<li><code>all</code>: すべてのメッセージへのすべてのリアクション。</li>
<li><code>allowlist</code>: reactions from <code>channels.slack.reactionAllowlist</code> on all messages (empty list disables).</li>
</ul>
<p>スレッドセッション分離:</p>
<ul>
<li><code>channels.slack.thread.historyScope</code> は、スレッドごとの履歴(<code>thread</code>, default)かチャンネル間で共有されるかどうかを制御します。</li>
<li><code>channels.slack.thread.legitParent</code> は、新しいスレッドセッションが親チャンネルトランスクリプトを継承するかどうかを制御します (デフォルト: false)。</li>
</ul>
<p>Slack アクショングループ (gate <code>slack</code> tools actions):</p>
<table>
<thead>
<tr>
<th>アクショングループ</th>
<th>デフォルト</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>reactions</td>
<td>enabled</td>
<td>React + リアクションリスト</td>
</tr>
<tr>
<td>messages</td>
<td>enabled</td>
<td>読み取り/送信/編集/削除</td>
</tr>
<tr>
<td>pins</td>
<td>enabled</td>
<td>ピン/解除/一覧</td>
</tr>
<tr>
<td>memberInfo</td>
<td>enabled</td>
<td>メンバー情報</td>
</tr>
<tr>
<td>emojiList</td>
<td>enabled</td>
<td>カスタム絵文字一覧</td>
</tr>
</tbody>
</table>
<h3 id="channelsmattermost-bot"><code>channels.mattermost</code> (botトークン)<a class="headerlink" href="#channelsmattermost-bot" title="Permanent link">&para;</a></h3>
<p>Mattermost はプラグインとして提供されており、コアインストールには同梱されていません。
最初にインストールします: <code>openclaw/mattermost</code> (または git checkoutから <code>./extensions/mattermost</code> )。</p>
<p>MattermostにはBotトークンとサーバーのベース URLが必要です:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="mf">8.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">    </span><span class="nv">mattermost</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">      </span><span class="nv">botToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mm-token&quot;</span><span class="p">,</span>
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">      </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://chat.example.com&quot;</span><span class="p">,</span>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">      </span><span class="nv">dmPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pairing&quot;</span><span class="p">,</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">      </span><span class="nv">chatmode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;oncall&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// oncall | onmessage | onchar</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">      </span><span class="nv">oncharPrefixes</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;!&quot;</span><span class="p">],</span>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="w">      </span><span class="nv">textChunkLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">4000</span><span class="p">,</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="w">      </span><span class="nv">chunkMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;length&quot;</span><span class="p">,</span>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="p">}</span>
</code></pre></div>
<p>OpenClawはアカウントが設定されて有効になっている場合、Mattermostを開始します。 トークン + ベース URL は <code>channels.mattermost.botToken</code> + <code>channels.mattermost.baseUrl</code> または <code>MATTERMOST_BOT_TOKEN</code> + <code>MATTERMOST_URL</code> から解決されます (<code>channels.mattermost.enabled</code> が<code>false</code>でない限り)。</p>
<p>チャットモード:</p>
<ul>
<li><code>oncall</code> (default): @メンションされたときにのみチャネルメッセージに応答します。</li>
<li><code>onmessage</code>: すべてのチャンネルメッセージに応答します。</li>
<li><code>onchar</code>: メッセージがトリガープレフィックスで始まるときに応答します (<code>channels.mattermost.oncharPrefixes</code>, default <code>["&gt;", "!"]</code>)。</li>
</ul>
<p>アクセス制御:</p>
<ul>
<li>デフォルトのDM: <code>channels.matter.dmPolicy="ペアリング"</code> (未知の送信者はペアリングコードを取得します)。</li>
<li>公開 DM: <code>channels.mattermost.dmPolicy="open"</code> に加えて <code>channels.mattermost.allowFrom=["*"]</code>。</li>
<li>Groups: <code>channels.mattermost.groupPolicy="allowlist"</code> by default (mention-gated). 送信者を制限するには、 <code>channels.mattermost.groupAllowFrom</code> を使用してください。</li>
</ul>
<p>複数アカウントのサポートは <code>channels.mattermost.accounts</code> の下で行われます (上記のマルチアカウントのセクションを参照してください)。 Env var は既定のアカウントにのみ適用されます。
配送ターゲットを指定するときは、<code>channel:&lt;id&gt;</code> または <code>user:&lt;id&gt;</code> (または <code>@username</code>) を使用します。裸の id はチャンネル ID として扱われます。</p>
<h3 id="channelssignal-signal-cli"><code>channels.signal</code> (signal-cli)<a class="headerlink" href="#channelssignal-signal-cli" title="Permanent link">&para;</a></h3>
<p>シグナルリアクションはシステムイベントを発生させることができます (共有リアクションツール):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="mf">9.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="w">    </span><span class="nv">signal</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="w">      </span><span class="nv">reactionNotifications</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;own&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | own | all | allowlist</span>
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="w">      </span><span class="nv">reactionAllowlist</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15551234567&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;uuid:123e4567-e89b-12d3-a456-426614174000&quot;</span><span class="p">],</span>
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="w">      </span><span class="nv">historyLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="c1">// include last N group messages as context (0 disables)</span>
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="p">}</span>
</code></pre></div>
<p>リアクション通知モード:</p>
<ul>
<li><code>off</code>: リアクションイベントなし。</li>
<li><code>own</code>: ボット自身のメッセージへのリアクション（デフォルト）。</li>
<li><code>all</code>: すべてのメッセージへのすべてのリアクション。</li>
<li><code>allowlist</code>: reactions from <code>channels.signal.reactionAllowlist</code> on all messages (empty list disables).</li>
</ul>
<h3 id="channelsimessage-imsg-cli"><code>channels.imessage</code> (imsg CLI)<a class="headerlink" href="#channelsimessage-imsg-cli" title="Permanent link">&para;</a></h3>
<p>OpenClawは<code>imsg rpc</code> (stdio上でJSON-RPC) を生成します。 デーモンやポートは必要ありません。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="mf">10.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="w">  </span><span class="nv">channels</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="w">    </span><span class="nv">imessage</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a><span class="w">      </span><span class="nv">cliPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;imsg&quot;</span><span class="p">,</span>
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a><span class="w">      </span><span class="nv">dbPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/Library/Messages/chat.db&quot;</span><span class="p">,</span>
<a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a><span class="w">      </span><span class="nv">remoteHost</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user@gateway-host&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// SCP for remote attachments when using SSH wrapper</span>
<a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a><span class="w">      </span><span class="nv">dmPolicy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;pairing&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// pairing | allowlist | open | disabled</span>
<a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="w">      </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15555550123&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user@example.com&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;chat_id:123&quot;</span><span class="p">],</span>
<a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="w">      </span><span class="nv">historyLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">50</span><span class="p">,</span><span class="w"> </span><span class="c1">// include last N group messages as context (0 disables)</span>
<a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="w">      </span><span class="nv">includeAttachments</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="w">      </span><span class="nv">mediaMaxMb</span><span class="p">:</span><span class="w"> </span><span class="mf">16</span><span class="p">,</span>
<a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="w">      </span><span class="nv">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p">,</span>
<a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="w">      </span><span class="nv">region</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;US&quot;</span><span class="p">,</span>
<a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="p">}</span>
</code></pre></div>
<p>複数アカウントのサポートは <code>channels.imessage.accounts</code> の下で行われます (上記のマルチアカウントのセクションを参照してください)。</p>
<p>環境変数での指定：</p>
<ul>
<li>メッセージDBへのフルディスクアクセスが必要です。</li>
<li>最初の送信はメッセージの自動化権限を求めます。</li>
<li><code>chat_id:&lt;id&gt;</code> ターゲットを設定します。 チャット一覧を表示するには <code>imsg chats --limit 20</code> を使用します。</li>
<li><code>channels.imessage.cliPath</code>はラッパースクリプトを指すことができます(例えば <code>ssh</code>は<code>imsg rpc</code>を実行する別のMacを指す)。パスワードプロンプトを避けるためにSSHキーを使用します。</li>
<li>リモートの SSH ラッパーの場合は、<code>includeAttachments</code> が有効になっている場合、SCP 経由で添付ファイルをフェッチするために <code>channels.imessage.remoteHost</code> を設定します。</li>
</ul>
<p>ツール要約は、シークレット漏洩を防ぐためにマスクできます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="ch">#!/usr/bin/env bash</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="nb">exec</span><span class="w"> </span>ssh<span class="w"> </span>-T<span class="w"> </span>gateway-host<span class="w"> </span>imsg<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="agentsdefaultsworkspace"><code>agents.defaults.workspace</code><a class="headerlink" href="#agentsdefaultsworkspace" title="Permanent link">&para;</a></h3>
<p>エージェントがファイル操作で使用する <strong>単一のグローバルワークスペースディレクトリ</strong> を設定します。</p>
<p>デフォルト: <code>~/.openclaw/workspace</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="p">{</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">workspace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="p">}</span>
</code></pre></div>
<ol>
<li><code>agents.defaults.sandbox</code> が有効な場合、非メインのセッションは <code>agents.defaults.sandbox.workspaceRoot</code> 配下にある各スコープごとのワークスペースで、この設定を上書きできます。</li>
</ol>
<h3 id="agentsdefaultsreporoot"><code>agents.defaults.repoRoot</code><a class="headerlink" href="#agentsdefaultsreporoot" title="Permanent link">&para;</a></h3>
<p>システムプロンプトのランタイムラインに表示するオプションのリポジトリルート。 未設定の場合、OpenClaw
はワークスペース (および現在の
作業ディレクトリ) から <code>.git</code> ディレクトリを検出しようとします。 使用するにはパスが存在する必要があります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="p">{</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">repoRoot</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/Projects/openclaw&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="agentsdefaultsskipbootstrap"><code>agents.defaults.skipBootstrap</code><a class="headerlink" href="#agentsdefaultsskipbootstrap" title="Permanent link">&para;</a></h3>
<p>ワークスペースのブートストラップファイル (<code>AGENTS.md</code>, <code>SOUL.md</code>, <code>TOOLS.md</code>, <code>IDENTITY.md</code>, <code>USER.md</code>, <code>HEARTBEAT.md</code>, <code>BOOTSTRAP.md</code>) の自動作成を無効にします。</p>
<p>ワークスペース・ファイルがリポジトリから生成される、事前シードされたデプロイメントに使用します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="p">{</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">skipBootstrap</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="agentsdefaultsbootstrapmaxchars"><code>agents.defaults.bootstrapMaxChars</code><a class="headerlink" href="#agentsdefaultsbootstrapmaxchars" title="Permanent link">&para;</a></h3>
<ol>
<li>切り詰めが行われる前に、システムプロンプトへ注入される各ワークスペースのブートストラップファイルの最大文字数。 デフォルト: <code>20000</code>.</li>
</ol>
<p>ファイルがこの制限を超えると、OpenClawは警告をログに記録し、マーカーと共に切り捨てられた
の頭/尾を注入します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="p">{</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">bootstrapMaxChars</span><span class="p">:</span><span class="w"> </span><span class="mf">20000</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="agentsdefaultsusertimezone"><code>agents.defaults.userTimezone</code><a class="headerlink" href="#agentsdefaultsusertimezone" title="Permanent link">&para;</a></h3>
<p><strong>システムプロンプトコンテキスト</strong> のユーザーのタイムゾーンを設定します (
メッセージエンベロープのタイムスタンプではありません)。 未設定の場合、OpenClawは実行時にホストタイムゾーンを使用します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="p">{</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">userTimezone</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;America/Chicago&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="agentsdefaultstimeformat"><code>agents.defaults.timeFormat</code><a class="headerlink" href="#agentsdefaultstimeformat" title="Permanent link">&para;</a></h3>
<p>システムプロンプトの現在の日付と時刻のセクションに表示される<strong>時刻フォーマット</strong>を制御します。
デフォルト: <code>auto</code> (OS 設定)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="p">{</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">timeFormat</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="c1">// auto | 12 | 24</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="_15"><code>メッセージ</code><a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>inbound/outboundプレフィックスと任意のackリアクションをコントロールします。
キュー、セッション、ストリーミングコンテキストについては、 <a href="../../concepts/messages">Messages</a> を参照してください。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="p">{</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="w">  </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="w">    </span><span class="nv">responsePrefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;🦞&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// or &quot;auto&quot;</span>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="w">    </span><span class="nv">ackReaction</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;👀&quot;</span><span class="p">,</span>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="w">    </span><span class="nv">ackReactionScope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;group-mentions&quot;</span><span class="p">,</span>
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="w">    </span><span class="nv">removeAckAfterReply</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="p">}</span>
</code></pre></div>
<p><code>responsePrefix</code> は、すでに存在しない限り、チャンネルを横断する <strong>すべてのアウトバウンド返信</strong> (ツールサマリ、
ストリーミング、最終返信をブロック) に適用されます。</p>
<p>上書きは、チャンネルごとおよびアカウントごとに設定できます:</p>
<ul>
<li><code>channels.&lt;channel&gt;.responsePrefix</code></li>
<li><code>channels.&lt;channel&gt;.accounts.&lt;id&gt;.responsePrefix</code></li>
</ul>
<p>解決順（最も具体的なものが優先）：</p>
<ol>
<li><code>channels.&lt;channel&gt;.accounts.&lt;id&gt;.responsePrefix</code></li>
<li><code>channels.&lt;channel&gt;.responsePrefix</code></li>
<li><code>messages.responsePrefix</code></li>
</ol>
<p>セマンティクス:</p>
<ul>
<li><code>undefined</code> は次のレベルに落ちます。</li>
<li><code>""</code> はプレフィックスを明示的に無効にし、カスケードを停止します。</li>
<li><code>"auto"</code>はルーティングされたエージェントに対して<code>[{identity.name}]</code>を派生します。</li>
</ul>
<p>オーバーライドは、拡張機能を含むすべてのチャンネル、およびすべてのアウトバウンド返信の種類に適用されます。</p>
<p><code>messages.responsePrefix</code> が設定されていない場合、デフォルトではプレフィックスは適用されません。 13. WhatsApp の自己チャット返信は例外です。設定されている場合は既定で <code>[{identity.name}]</code> を使用し、そうでない場合は <code>[openclaw]</code> となります。これにより、同一端末内の会話の可読性が保たれます。
ルーティングされたエージェントの<code>[{identity.name}]</code>を導出するには、<code>"auto"</code>に設定します。</p>
<h4 id="_16">テンプレート変数<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p><code>responsePrefix</code> 文字列には、動的に解決するテンプレート変数を含めることができます。</p>
<table>
<thead>
<tr>
<th>変数</th>
<th>説明</th>
<th>マージ動作</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{model}</code></td>
<td>短いモデル名</td>
<td><code>claude-opus-4-6</code>, <code>gpt-4o</code></td>
</tr>
<tr>
<td><code>{modelFull}</code></td>
<td>フルモデル識別子</td>
<td><code>anthropic/claude-opus-4-6</code></td>
</tr>
<tr>
<td><code>{provider}</code></td>
<td>プロバイダー名</td>
<td><code>anthropic</code>, <code>openai</code></td>
</tr>
<tr>
<td><code>{thinkingLevel}</code></td>
<td>現在の思考レベル</td>
<td><code>high</code>, <code>low</code>, <code>off</code></td>
</tr>
<tr>
<td><code>{identity.name}</code></td>
<td>エージェントの身元名</td>
<td>(`"auto"モードと同じ)</td>
</tr>
</tbody>
</table>
<p>変数は大文字小文字を区別しません (<code>{MODEL}</code> = <code>{model}</code>)。 <code>{think}</code> は <code>{thinkingLevel}</code> のエイリアスです。
未解決の変数はリテラルテキストとして残ります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="p">{</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="w">  </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="w">    </span><span class="nv">responsePrefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[{model} | think:{thinkingLevel}]&quot;</span><span class="p">,</span>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="p">}</span>
</code></pre></div>
<p>出力例: <code>[claude-opus-4-6 | think:high] ここが私の返事です...</code></p>
<p>WhatsAppインバウンドプレフィックスは、 <code>channels.whatsapp.messagePrefix</code> を介して設定されています(非推奨:
<code>message.messagePrefix</code> )。 14. 既定は <strong>変更されません</strong>：<code>channels.whatsapp.allowFrom</code> が空の場合は <code>"[openclaw]"</code>、それ以外の場合は <code>""</code>（プレフィックスなし）です。 15. <code>"[openclaw]"</code> を使用している場合、ルーティングされたエージェントに <code>identity.name</code> が設定されていれば、OpenClaw は代わりに <code>[{identity.name}]</code> を使用します。</p>
<ol>
<li><code>ackReaction</code> は、リアクションをサポートするチャンネル（Slack/Discord/Telegram/Google Chat）で、受信メッセージの受領を示すためにベストエフォートで絵文字リアクションを送信します。 デフォルトでは、
    アクティブエージェントの <code>identity.emoji</code> が設定されています。設定されていない場合は <code>"👀"</code> です。 無効にするには <code>""</code> に設定します。</li>
</ol>
<p><code>ackReactionScope</code> はリアクションが発生したときに制御します。</p>
<ul>
<li><code>group-mentions</code> (デフォルト): グループ/ルームでメンションが必要な場合のみ <strong>and</strong> Botがメンションされています</li>
<li><code>group-all</code>: すべてのグループ/ルームメッセージ</li>
<li><code>direct</code>: ダイレクトメッセージのみ</li>
<li><code>all</code>: すべてのメッセージ</li>
</ul>
<p><code>removeAckAfterReply</code>は、返信を
（Slack/Discord/Telegram/Google チャットのみ）した後、ボットのリアクションを削除します。 デフォルト: <code>false</code></p>
<h4 id="messagestts"><code>messages.tts</code><a class="headerlink" href="#messagestts" title="Permanent link">&para;</a></h4>
<p>発信返信のテキスト読み上げを有効にします。 17. 有効にすると、OpenClaw は ElevenLabs または OpenAI を使用して音声を生成し、返信に添付します。 TelegramはOpus
音声ノートを使用します。他のチャンネルはMP3オーディオを送信します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="mf">18.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="w">  </span><span class="nv">messages</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="w">    </span><span class="nv">tts</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="w">      </span><span class="nv">auto</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;always&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | always | inbound | tagged</span>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="w">      </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;final&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// final | all (include tool/block replies)</span>
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">      </span><span class="nv">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;elevenlabs&quot;</span><span class="p">,</span>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="w">      </span><span class="nv">summaryModel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai/gpt-4.1-mini&quot;</span><span class="p">,</span>
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">      </span><span class="nv">modelOverrides</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="w">      </span><span class="nv">maxTextLength</span><span class="p">:</span><span class="w"> </span><span class="mf">4000</span><span class="p">,</span>
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a><span class="w">      </span><span class="nv">timeoutMs</span><span class="p">:</span><span class="w"> </span><span class="mf">30000</span><span class="p">,</span>
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a><span class="w">      </span><span class="nv">prefsPath</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/settings/tts.json&quot;</span><span class="p">,</span>
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a><span class="w">      </span><span class="nv">elevenlabs</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;elevenlabs_api_key&quot;</span><span class="p">,</span>
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a><span class="w">        </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.elevenlabs.io&quot;</span><span class="p">,</span>
<a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a><span class="w">        </span><span class="nv">voiceId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;voice_id&quot;</span><span class="p">,</span>
<a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a><span class="w">        </span><span class="nv">modelId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eleven_multilingual_v2&quot;</span><span class="p">,</span>
<a id="__codelineno-55-19" name="__codelineno-55-19" href="#__codelineno-55-19"></a><span class="w">        </span><span class="nv">seed</span><span class="p">:</span><span class="w"> </span><span class="mf">42</span><span class="p">,</span>
<a id="__codelineno-55-20" name="__codelineno-55-20" href="#__codelineno-55-20"></a><span class="w">        </span><span class="nv">applyTextNormalization</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p">,</span>
<a id="__codelineno-55-21" name="__codelineno-55-21" href="#__codelineno-55-21"></a><span class="w">        </span><span class="nv">languageCode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span><span class="p">,</span>
<a id="__codelineno-55-22" name="__codelineno-55-22" href="#__codelineno-55-22"></a><span class="w">        </span><span class="nv">voiceSettings</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-23" name="__codelineno-55-23" href="#__codelineno-55-23"></a><span class="w">          </span><span class="nv">stability</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span>
<a id="__codelineno-55-24" name="__codelineno-55-24" href="#__codelineno-55-24"></a><span class="w">          </span><span class="nv">similarityBoost</span><span class="p">:</span><span class="w"> </span><span class="mf">0.75</span><span class="p">,</span>
<a id="__codelineno-55-25" name="__codelineno-55-25" href="#__codelineno-55-25"></a><span class="w">          </span><span class="nv">style</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span>
<a id="__codelineno-55-26" name="__codelineno-55-26" href="#__codelineno-55-26"></a><span class="w">          </span><span class="nv">useSpeakerBoost</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-55-27" name="__codelineno-55-27" href="#__codelineno-55-27"></a><span class="w">          </span><span class="nv">speed</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span>
<a id="__codelineno-55-28" name="__codelineno-55-28" href="#__codelineno-55-28"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-55-29" name="__codelineno-55-29" href="#__codelineno-55-29"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-55-30" name="__codelineno-55-30" href="#__codelineno-55-30"></a><span class="w">      </span><span class="nv">openai</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-31" name="__codelineno-55-31" href="#__codelineno-55-31"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai_api_key&quot;</span><span class="p">,</span>
<a id="__codelineno-55-32" name="__codelineno-55-32" href="#__codelineno-55-32"></a><span class="w">        </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gpt-4o-mini-tts&quot;</span><span class="p">,</span>
<a id="__codelineno-55-33" name="__codelineno-55-33" href="#__codelineno-55-33"></a><span class="w">        </span><span class="nv">voice</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;alloy&quot;</span><span class="p">,</span>
<a id="__codelineno-55-34" name="__codelineno-55-34" href="#__codelineno-55-34"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-55-35" name="__codelineno-55-35" href="#__codelineno-55-35"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-55-36" name="__codelineno-55-36" href="#__codelineno-55-36"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-55-37" name="__codelineno-55-37" href="#__codelineno-55-37"></a><span class="p">}</span>
</code></pre></div>
<p>利便性のためのオプトイン機能です。有効で、かつ期待されるキーがまだ設定されていない場合、OpenClaw はログインシェルを実行し、欠落している期待キーのみを取り込みます（上書きはしません）。<br />
これは実質的にシェルプロファイルを source する動作です。</p>
<ul>
<li><code>messages.tts.auto</code> は、auto‐TTS(<code>off</code>、<code>always</code>、<code>inbound</code>、<code>tagged</code>)を制御します。</li>
<li><code>/tts off|always|inbound|tagged</code> はセッションごとの自動モードを設定します (設定を上書きします)。</li>
<li><code>messages.tts.enabled</code> はレガシーです。医師は <code>messages.tts.auto</code> に移行します。</li>
<li><code>prefsPath</code> はローカルのオーバーライドを格納します(provider/limit/summarize)。</li>
<li><code>maxTextLength</code>はTTS入力のハードキャップです。要約は収まるように省略されます。</li>
<li><code>summaryModel</code> は <code>agents.defaults.model.primary</code> を上書きします。</li>
<li><code>provider/model</code> または <code>agents.defaults.models</code> のエイリアスを受け付けます。</li>
<li><code>modelOverrides</code> は、 <code>[[tts:...]]</code> タグのようなモデル駆動のオーバーライドを有効にします(デフォルト)。</li>
<li><code>/tts limit</code> と <code>/tts summary</code> はユーザ毎のサマリー設定を制御します。</li>
<li><code>apiKey</code> の値は <code>ELEVENLABS_API_KEY</code>/<code>XI_API_KEY</code> と <code>OPENAI_API_KEY</code> に戻ります。</li>
<li><code>elevenlabs.baseUrl</code> はElevenLabs APIベースのURLを上書きします。</li>
<li><code>elevenlabs.voiceSettings</code> は <code>stability</code>/<code>similarityBoost</code>/<code>style</code> (0..1),
  <code>useSpeakerBoost</code>, そして <code>speed</code> (0.5..2.0) をサポートしています。</li>
</ul>
<h3 id="talk"><code>talk</code><a class="headerlink" href="#talk" title="Permanent link">&para;</a></h3>
<p>デフォルトはトークモード(macOS/iOS/Android)です。 音声IDはオフにすると「ELEVENLABS_VOICE_ID」または「SAG_VOICE_ID」に戻ります。
<code>apiKey</code> は設定を解除したときに <code>ELEVENLABS_API_KEY</code> (またはゲートウェイのシェルプロファイル) に戻ります。
<code>voiceAliases</code> を使用すると、トークディレクティブはフレンドリーな名前を使用することができます(例: <code>"voice":"Clawd"</code>)。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="mf">19.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="w">  </span><span class="nv">talk</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">    </span><span class="nv">voiceId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;elevenlabs_voice_id&quot;</span><span class="p">,</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="w">    </span><span class="nv">voiceAliases</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">      </span><span class="nv">Clawd</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EXAVITQu4vr4xnSDxMaL&quot;</span><span class="p">,</span>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="w">      </span><span class="nv">Roger</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CwhRBWXzGAHq8TQ4Fs17&quot;</span><span class="p">,</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="w">    </span><span class="nv">modelId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;eleven_v3&quot;</span><span class="p">,</span>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="w">    </span><span class="nv">outputFormat</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mp3_44100_128&quot;</span><span class="p">,</span>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="w">    </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;elevenlabs_api_key&quot;</span><span class="p">,</span>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="w">    </span><span class="nv">interruptOnSpeech</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a><span class="p">}</span>
</code></pre></div>
<h3 id="agentsdefaults"><code>agents.defaults</code><a class="headerlink" href="#agentsdefaults" title="Permanent link">&para;</a></h3>
<p>埋め込まれたエージェントランタイムを制御します (モデル/思考/verbose/timeout)。
<code>agents.defaults.models</code> は設定されたモデルカタログを定義します (<code>/model</code> の許容リストとして機能します)。
<code>agents.defaults.model.primary</code> はデフォルトのモデルを設定します。<code>agents.defaults.model.fallbacks</code> はグローバルフェイルオーバーです。
<code>agents.defaults.imageModel</code> はオプションで、メインモデルに画像入力がない場合にのみ使用されます。
各 <code>agents.defaults.models</code> エントリには以下のものがあります。</p>
<ul>
<li><code>alias</code> (オプションのモデルショートカット、例えば<code>/opus</code>)。</li>
<li><code>params</code> (オプションのプロバイダ固有の API パラメータがモデル要求に渡されます)。</li>
</ul>
<p><code>params</code> はストリーミング実行にも適用されます(埋め込みエージェント + 圧縮)。 現在サポートされているキーは<code>temperature</code>、<code>maxTokens</code>です。 これらはコールタイムオプションとマージされます。呼び出し元の値が勝利します。 <code>temperature</code> は高度なノブです。モデルのデフォルトがわかっていて、変更が必要ない限り、設定を解除してください。</p>
<p>未定義または空の環境変数は、設定読み込み時にエラーとなります</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="mf">20.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="w">        </span><span class="nv">&quot;anthropic/claude-sonnet-4-5-20250929&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">          </span><span class="nv">params</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">temperature</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a><span class="w">        </span><span class="nv">&quot;openai/gpt-5.2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a><span class="w">          </span><span class="nv">params</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">maxTokens</span><span class="p">:</span><span class="w"> </span><span class="mf">8192</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a><span class="p">}</span>
</code></pre></div>
<p>Z.AI GLM-4.x モデルは自動的に思考モードを有効にします。</p>
<ul>
<li><code>--thinking off</code> または</li>
<li><code>agents.defaults.models["zai/&lt;model&gt;"].params.thinking</code> を自分で定義します。</li>
</ul>
<p>OpenClawはまた、いくつかの組み込みエイリアス短縮を出荷します。 デフォルトは、モデル
が <code>agents.defaults.models</code>に既に存在する場合にのみ適用されます。</p>
<ul>
<li><code>opus</code> -&gt; <code>anthropic/claude-opus-4-6</code></li>
<li><code>sonnet</code> -&gt; <code>anthropic/claude-sonnet-4-5</code></li>
<li><code>gpt</code> -&gt; <code>openai/gpt-5.2</code></li>
<li><code>gpt-mini</code> -&gt; <code>openai/gpt-5-mini</code></li>
<li><code>gemini</code> -&gt; <code>google/gemini-3-pro-preview</code></li>
<li><code>gemini-flash</code> -&gt; <code>google/gemini-3-flash-preview</code></li>
</ul>
<p>自分で同じエイリアス名(大文字と小文字を区別しない)を設定すると、その値は勝利します (デフォルトでは上書きされません)。</p>
<p>例: Opus 4.6 primary with MiniMax M2.1 fallback (hosted MiniMax):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="mf">21.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">        </span><span class="nv">&quot;anthropic/claude-opus-4-6&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;opus&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w">        </span><span class="nv">&quot;minimax/MiniMax-M2.1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;minimax&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w">        </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anthropic/claude-opus-4-6&quot;</span><span class="p">,</span>
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w">        </span><span class="nv">fallbacks</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;minimax/MiniMax-M2.1&quot;</span><span class="p">],</span>
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="p">}</span>
</code></pre></div>
<p>MiniMax auth: <code>MINIMAX_API_KEY</code> (env) を設定するか、<code>models.providers.minimax</code> を設定します。</p>
<h4 id="agentsdefaultsclibackends-cli"><code>agents.defaults.cliBackends</code> (CLI フォールバック)<a class="headerlink" href="#agentsdefaultsclibackends-cli" title="Permanent link">&para;</a></h4>
<p>テキストのみのフォールバックラン(ツールコールなし)のためのオプションの CLI バックエンド。 これらは、API プロバイダが失敗した場合の
バックアップパスとして有用です。
ファイルパスを受け入れる<code>imageArg</code> を設定すると、イメージパススルーがサポートされます。</p>
<p>利便性のためのオプトイン機能です。有効で、かつ期待されるキーがまだ設定されていない場合、OpenClaw はログインシェルを実行し、欠落している期待キーのみを取り込みます（上書きはしません）。<br />
これは実質的にシェルプロファイルを source する動作です。</p>
<ul>
<li>CLI バックエンドは <strong>text-first</strong> です。ツールは常に無効です。</li>
<li>セッションは <code>sessionArg</code> が設定されている場合にサポートされます。セッションIDはバックエンドごとに持続します。</li>
<li><code>claude-cli</code>の場合、デフォルトは配線されています。 PATH が最小の
  (launchd/systemd) の場合、コマンドパスを上書きします。</li>
</ul>
<p>2026-02-08T09:22:13Z</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="mf">22.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">      </span><span class="nv">cliBackends</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="w">        </span><span class="nv">&quot;claude-cli&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="w">          </span><span class="nv">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/opt/homebrew/bin/claude&quot;</span><span class="p">,</span>
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">        </span><span class="nv">&quot;my-cli&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="w">          </span><span class="nv">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-cli&quot;</span><span class="p">,</span>
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="w">          </span><span class="nv">args</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;--json&quot;</span><span class="p">],</span>
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="w">          </span><span class="nv">output</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;json&quot;</span><span class="p">,</span>
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a><span class="w">          </span><span class="nv">modelArg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;--model&quot;</span><span class="p">,</span>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a><span class="w">          </span><span class="nv">sessionArg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;--session&quot;</span><span class="p">,</span>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="w">          </span><span class="nv">sessionMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing&quot;</span><span class="p">,</span>
<a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a><span class="w">          </span><span class="nv">systemPromptArg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;--system&quot;</span><span class="p">,</span>
<a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a><span class="w">          </span><span class="nv">systemPromptWhen</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;first&quot;</span><span class="p">,</span>
<a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a><span class="w">          </span><span class="nv">imageArg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;--image&quot;</span><span class="p">,</span>
<a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a><span class="w">          </span><span class="nv">imageMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;repeat&quot;</span><span class="p">,</span>
<a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-59-20" name="__codelineno-59-20" href="#__codelineno-59-20"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-59-21" name="__codelineno-59-21" href="#__codelineno-59-21"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-59-22" name="__codelineno-59-22" href="#__codelineno-59-22"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-59-23" name="__codelineno-59-23" href="#__codelineno-59-23"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="mf">23.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">        </span><span class="nv">&quot;anthropic/claude-opus-4-6&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Opus&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="w">        </span><span class="nv">&quot;anthropic/claude-sonnet-4-1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Sonnet&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="w">        </span><span class="nv">&quot;openrouter/deepseek/deepseek-r1:free&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="w">        </span><span class="nv">&quot;zai/glm-4.7&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="w">          </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GLM&quot;</span><span class="p">,</span>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="w">          </span><span class="nv">params</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="w">            </span><span class="nv">thinking</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a><span class="w">              </span><span class="nv">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;enabled&quot;</span><span class="p">,</span>
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a><span class="w">              </span><span class="nv">clear_thinking</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-60-14" name="__codelineno-60-14" href="#__codelineno-60-14"></a><span class="w">            </span><span class="p">},</span>
<a id="__codelineno-60-15" name="__codelineno-60-15" href="#__codelineno-60-15"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-60-16" name="__codelineno-60-16" href="#__codelineno-60-16"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-60-17" name="__codelineno-60-17" href="#__codelineno-60-17"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-60-18" name="__codelineno-60-18" href="#__codelineno-60-18"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-19" name="__codelineno-60-19" href="#__codelineno-60-19"></a><span class="w">        </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anthropic/claude-opus-4-6&quot;</span><span class="p">,</span>
<a id="__codelineno-60-20" name="__codelineno-60-20" href="#__codelineno-60-20"></a><span class="w">        </span><span class="nv">fallbacks</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-60-21" name="__codelineno-60-21" href="#__codelineno-60-21"></a><span class="w">          </span><span class="s">&quot;openrouter/deepseek/deepseek-r1:free&quot;</span><span class="p">,</span>
<a id="__codelineno-60-22" name="__codelineno-60-22" href="#__codelineno-60-22"></a><span class="w">          </span><span class="s">&quot;openrouter/meta-llama/llama-3.3-70b-instruct:free&quot;</span><span class="p">,</span>
<a id="__codelineno-60-23" name="__codelineno-60-23" href="#__codelineno-60-23"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-60-24" name="__codelineno-60-24" href="#__codelineno-60-24"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-60-25" name="__codelineno-60-25" href="#__codelineno-60-25"></a><span class="w">      </span><span class="nv">imageModel</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-26" name="__codelineno-60-26" href="#__codelineno-60-26"></a><span class="w">        </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openrouter/qwen/qwen-2.5-vl-72b-instruct:free&quot;</span><span class="p">,</span>
<a id="__codelineno-60-27" name="__codelineno-60-27" href="#__codelineno-60-27"></a><span class="w">        </span><span class="nv">fallbacks</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;openrouter/google/gemini-2.0-flash-vision:free&quot;</span><span class="p">],</span>
<a id="__codelineno-60-28" name="__codelineno-60-28" href="#__codelineno-60-28"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-60-29" name="__codelineno-60-29" href="#__codelineno-60-29"></a><span class="w">      </span><span class="nv">thinkingDefault</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;low&quot;</span><span class="p">,</span>
<a id="__codelineno-60-30" name="__codelineno-60-30" href="#__codelineno-60-30"></a><span class="w">      </span><span class="nv">verboseDefault</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;off&quot;</span><span class="p">,</span>
<a id="__codelineno-60-31" name="__codelineno-60-31" href="#__codelineno-60-31"></a><span class="w">      </span><span class="nv">elevatedDefault</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;on&quot;</span><span class="p">,</span>
<a id="__codelineno-60-32" name="__codelineno-60-32" href="#__codelineno-60-32"></a><span class="w">      </span><span class="nv">timeoutSeconds</span><span class="p">:</span><span class="w"> </span><span class="mf">600</span><span class="p">,</span>
<a id="__codelineno-60-33" name="__codelineno-60-33" href="#__codelineno-60-33"></a><span class="w">      </span><span class="nv">mediaMaxMb</span><span class="p">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span>
<a id="__codelineno-60-34" name="__codelineno-60-34" href="#__codelineno-60-34"></a><span class="w">      </span><span class="nv">heartbeat</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-35" name="__codelineno-60-35" href="#__codelineno-60-35"></a><span class="w">        </span><span class="nv">every</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30m&quot;</span><span class="p">,</span>
<a id="__codelineno-60-36" name="__codelineno-60-36" href="#__codelineno-60-36"></a><span class="w">        </span><span class="nv">target</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;last&quot;</span><span class="p">,</span>
<a id="__codelineno-60-37" name="__codelineno-60-37" href="#__codelineno-60-37"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-60-38" name="__codelineno-60-38" href="#__codelineno-60-38"></a><span class="w">      </span><span class="nv">maxConcurrent</span><span class="p">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<a id="__codelineno-60-39" name="__codelineno-60-39" href="#__codelineno-60-39"></a><span class="w">      </span><span class="nv">subagents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-40" name="__codelineno-60-40" href="#__codelineno-60-40"></a><span class="w">        </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;minimax/MiniMax-M2.1&quot;</span><span class="p">,</span>
<a id="__codelineno-60-41" name="__codelineno-60-41" href="#__codelineno-60-41"></a><span class="w">        </span><span class="nv">maxConcurrent</span><span class="p">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<a id="__codelineno-60-42" name="__codelineno-60-42" href="#__codelineno-60-42"></a><span class="w">        </span><span class="nv">archiveAfterMinutes</span><span class="p">:</span><span class="w"> </span><span class="mf">60</span><span class="p">,</span>
<a id="__codelineno-60-43" name="__codelineno-60-43" href="#__codelineno-60-43"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-60-44" name="__codelineno-60-44" href="#__codelineno-60-44"></a><span class="w">      </span><span class="nv">exec</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-60-45" name="__codelineno-60-45" href="#__codelineno-60-45"></a><span class="w">        </span><span class="nv">backgroundMs</span><span class="p">:</span><span class="w"> </span><span class="mf">10000</span><span class="p">,</span>
<a id="__codelineno-60-46" name="__codelineno-60-46" href="#__codelineno-60-46"></a><span class="w">        </span><span class="nv">timeoutSec</span><span class="p">:</span><span class="w"> </span><span class="mf">1800</span><span class="p">,</span>
<a id="__codelineno-60-47" name="__codelineno-60-47" href="#__codelineno-60-47"></a><span class="w">        </span><span class="nv">cleanupMs</span><span class="p">:</span><span class="w"> </span><span class="mf">1800000</span><span class="p">,</span>
<a id="__codelineno-60-48" name="__codelineno-60-48" href="#__codelineno-60-48"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-60-49" name="__codelineno-60-49" href="#__codelineno-60-49"></a><span class="w">      </span><span class="nv">contextTokens</span><span class="p">:</span><span class="w"> </span><span class="mf">200000</span><span class="p">,</span>
<a id="__codelineno-60-50" name="__codelineno-60-50" href="#__codelineno-60-50"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-60-51" name="__codelineno-60-51" href="#__codelineno-60-51"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-60-52" name="__codelineno-60-52" href="#__codelineno-60-52"></a><span class="p">}</span>
</code></pre></div>
<h4 id="agentsdefaultscontextpruning-tool-result-pruning"><code>agents.defaults.contextPruning</code> (tool-result pruning)<a class="headerlink" href="#agentsdefaultscontextpruning-tool-result-pruning" title="Permanent link">&para;</a></h4>
<p><code>agents.defaults.contextPruning</code> は、リクエストが LLM に送信される直前のメモリ内コンテキストから <strong>古いツールの結果</strong> を削除します。
ディスク上のセッション履歴を<strong>変更</strong>しません** (<code>*.jsonl</code>はまだ完了しています)。</p>
<p>これは、時間の経過とともに大きなツール出力を蓄積するチャットエージェントのトークン使用を減らすことを目的としています。</p>
<p>ハイレベル:</p>
<ul>
<li>ユーザー/アシスタントメッセージをタッチしないでください。</li>
<li>最後の <code>keepLastAssistants</code> アシスタントメッセージを保護します。削除後のツール結果はありません。</li>
<li>ブートストラップのプレフィックスを保護します (最初のユーザーメッセージが削除される前には何もありません)。</li>
<li>モード:</li>
<li><code>adaptive</code>: 推定されたコンテキスト比が <code>softTrimRatio</code> を横切ったときに、ソフトトリムが特大のツール結果を表示します(ヘッド/テールを維持します)。<ol>
<li>推定コンテキスト比率が <code>hardClearRatio</code> を超え、かつ剪定可能なツール結果の量（<code>minPrunableToolChars</code>）が十分にある場合、最も古い対象ツール結果をハードクリアします。</li>
</ol>
</li>
<li><code>アグレッシブ</code>: カットオフの前に適切なツール結果を常に<code>hardClear.placeholder</code>に置き換えます(比率チェックはありません)。</li>
</ul>
<p>ソフト対ハード剪定（LLMに送信されるコンテキスト内の変更）：</p>
<ul>
<li><strong>ソフトトリム</strong>: <em>oversized</em> ツール結果のみ。 開始位置と終了位置を維持し、中央に <code>...</code> を挿入します。</li>
<li>以前: <code>toolResult("…非常に長い出力…")</code></li>
<li>After: <code>toolResult("HEAD…\n...\n…TAIL\n\n[Tool result trimed: …]")</code></li>
<li><strong>Hard-clear</strong>: ツール全体の結果をプレースホルダに置き換えます。</li>
<li>以前: <code>toolResult("…非常に長い出力…")</code></li>
<li>After: <code>toolResult("format@@0")</code></li>
</ul>
<p>ノート/現在の制限：</p>
<ul>
<li><strong>画像ブロックを含むツールの結果はスキップされます</strong> (トリミングや削除はありません)</li>
<li>推定される「コンテキスト比」は、正確なトークンではなく<strong>文字</strong> (近似) に基づいています。</li>
<li>セッションに <code>keepLastAssistants</code> アシスタントメッセージが含まれていない場合は、剪定はスキップされます。</li>
<li><code>アグレッシブ</code>モードでは、<code>hardClear.enabled</code>は無視されます（適格なツール結果は常に<code>hardClear.placeholder</code>に置き換えられます）。</li>
</ul>
<p>デフォルト (アダプティブ):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="p">{</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">contextPruning</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;adaptive&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="p">}</span>
</code></pre></div>
<p>無効にするには:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="p">{</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">contextPruning</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;off&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="p">}</span>
</code></pre></div>
<p>デフォルト(<code>mode</code>が<code>adaptive"</code>または<code>"アグレッシブ"</code>の場合):</p>
<ul>
<li><code>keepLastAssistants</code>: <code>3</code></li>
<li><code>softTrimRatio</code>: <code>0.3</code> (アダプティブのみ)</li>
<li><code>hardClearRatio</code>: <code>0.5</code> (アダプティブのみ)</li>
<li><code>minPrunableToolChars</code>: <code>50000</code> (アダプティブのみ)</li>
<li><code>softTrim</code>: <code>{ maxChars: 4000, headChars: 1500, tailChars: 1500 }</code> (アダプティブのみ)</li>
<li><code>hardClear</code>: <code>{ enabled: true, placeholder: "[Old tool result content cleared]" }</code></li>
</ul>
<p>例 (攻撃的、最小値):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="p">{</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">contextPruning</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;agrossive&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="p">}</span>
</code></pre></div>
<p>例 (アダプティブチューニング):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="mf">25.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="w">      </span><span class="nv">contextPruning</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">        </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;adaptive&quot;</span><span class="p">,</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">        </span><span class="nv">keepLastAssistants</span><span class="p">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">        </span><span class="nv">softTrimRatio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">        </span><span class="nv">hardClearRatio</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">        </span><span class="nv">minPrunableToolChars</span><span class="p">:</span><span class="w"> </span><span class="mf">50000</span><span class="p">,</span>
<a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">        </span><span class="nv">softTrim</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">maxChars</span><span class="p">:</span><span class="w"> </span><span class="mf">4000</span><span class="p">,</span><span class="w"> </span><span class="nv">headChars</span><span class="p">:</span><span class="w"> </span><span class="mf">1500</span><span class="p">,</span><span class="w"> </span><span class="nv">tailChars</span><span class="p">:</span><span class="w"> </span><span class="mf">1500</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">        </span><span class="nv">hardClear</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span><span class="w"> </span><span class="nv">placeholder</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;[Old tool result content cleared]&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">        </span><span class="c1">// Optional: restrict pruning to specific tools (deny wins; supports &quot;*&quot; wildcards)</span>
<a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="w">        </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">deny</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;browser&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;canvas&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a><span class="p">}</span>
</code></pre></div>
<p>挙動の詳細は <a href="../../concepts/session-pruning">/concepts/session-pruning</a> を参照してください。</p>
<h4 id="agentsdefaultscompaction-headroom-memory-flush"><code>agents.defaults.compaction</code> (headroom + memory flushを予約)<a class="headerlink" href="#agentsdefaultscompaction-headroom-memory-flush" title="Permanent link">&para;</a></h4>
<p><code>agents.defaults.compaction.mode</code> は圧縮要約戦略を選択します。 デフォルトは <code>default</code> です。<code>safeguard</code> を設定すると、非常に長い歴史のためにまとめられた要約が有効になります。 <a href="../../concepts/compaction">/concepts/compaction</a> を参照してください。</p>
<p><code>agents.defaults.compaction.reserveTokensFloor</code> は、Pi compaction の最小値 <code>reserveTokens</code>
を強制します(デフォルト: <code>20000</code>)。 床を無効にするには、<code>0</code> に設定します。</p>
<p><code>agents.defaults.compaction.memoryFlush</code> は、
自動圧縮する前に<strong>サイレント</strong> のagenticticターンを実行します。モデルにディスクに耐久性のあるメモリーを格納するように指示します (例:
<code>memory/YYYY-MM-DD.md</code> )。 これは、セッション・トークンが圧縮限度を下回る
柔らかいしきい値を推定すると発生します。</p>
<p>従来のデフォルト:</p>
<ul>
<li><code>memoryFlush.enabled</code>: <code>true</code></li>
<li><code>memoryFlush.softThresholdTokens</code>: <code>4000</code></li>
<li><code>memoryFlush.prompt</code> / <code>memoryFlush.systemPrompt</code>: <code>NO_REPLY</code>の組み込みデフォルト</li>
<li>注意: セッション ワークスペースが読み取り専用の
  (<code>agents.defaults.sandbox.workspaceAccess: "ro"</code> or <code>"none"</code>)の場合、メモリ フラッシュはスキップされます。</li>
</ul>
<p>任意の設定文字列値で、<code>${VAR_NAME}</code> 構文を使用して環境変数を直接参照できます。<br />
変数は、検証前の設定読み込み時に置換されます。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="mf">26.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">      </span><span class="nv">compaction</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w">        </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;safeguard&quot;</span><span class="p">,</span>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w">        </span><span class="nv">reserveTokensFloor</span><span class="p">:</span><span class="w"> </span><span class="mf">24000</span><span class="p">,</span>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="w">        </span><span class="nv">memoryFlush</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="w">          </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="w">          </span><span class="nv">softThresholdTokens</span><span class="p">:</span><span class="w"> </span><span class="mf">6000</span><span class="p">,</span>
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="w">          </span><span class="nv">systemPrompt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Session nearing compaction. Store durable memories now.&quot;</span><span class="p">,</span>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="w">          </span><span class="nv">prompt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Write any lasting notes to memory/YYYY-MM-DD.md; reply with NO_REPLY if nothing to store.&quot;</span><span class="p">,</span>
<a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a><span class="p">}</span>
</code></pre></div>
<p>ブロックストリーミング:</p>
<ul>
<li>
<p><code>agents.defaults.blockStreamingDefault</code>: <code>"on"</code>/<code>"off"</code>（デフォルトはオフ）。</p>
</li>
<li>
<p>チャンネルのオーバーライド: <code>*.blockStreaming</code> (とアカウントごとのバリアント) は、ストリーミングのオン/オフをブロックすることを強制します。
  Telegram以外のチャンネルでは、ブロックの返信を有効にするには明示的な<code>*.blockStreaming: true</code>が必要です。</p>
</li>
<li>
<p><code>agents.defaults.blockStreamingBreak</code>: <code>"text_end"</code> または <code>"message_end"</code> (デフォルト: text_end)。</p>
</li>
<li>
<p><code>agents.defaults.blockStreamingChunk</code>: ストリーミングされたブロックのソフトチャンキング。 デフォルトは
  800–1200 文字です。段落区切り（<code>\n\n</code>）、次に改行、次に文章を好みます。
  2026-02-08T09:22:13Z</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="p">{</span>
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">blockStreamingChunk</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">minChars</span><span class="p">:</span><span class="w"> </span><span class="mf">800</span><span class="p">,</span><span class="w"> </span><span class="nv">maxChars</span><span class="p">:</span><span class="w"> </span><span class="mf">1200</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li><code>agents.defaults.blockStreamingCoalesce</code>: 送信前にストリーミングされたブロックをマージします。
  デフォルトは <code>{ idleMs: 1000 }</code> で、<code>blockStreamingChunk</code>
  から <code>minChars</code> を継承し、<code>maxChars</code> はチャンネルテキストの上限に上限を設定します。 シグナル/Slack/Discord/Googleチャットのデフォルト
  は、オーバーライドしない限り、<code>minChars: 1500</code>になります。</li>
<li>
<p>チャンネルごとの上書き設定：<code>channels.whatsapp.blockStreamingCoalesce</code>、<code>channels.telegram.blockStreamingCoalesce</code>、
  <code>channels.discord.blockStreamingCoalesce</code>、<code>channels.slack.blockStreamingCoalesce</code>、<code>channels.mattermost.blockStreamingCoalesce</code>、
  <code>channels.signal.blockStreamingCoalesce</code>、<code>channels.imessage.blockStreamingCoalesce</code>、<code>channels.msteams.blockStreamingCoalesce</code>、
  <code>channels.googlechat.blockStreamingCoalesce</code>
  （およびアカウントごとのバリアント）。</p>
</li>
<li>
<p><code>agents.defaults.humanDelay</code>: 最初のブロックの後にランダムに一時停止します。
  モード: <code>off</code> (デフォルト)、<code>natural</code> (800-2500ms)、<code>custom</code> (<code>minMs</code>/<code>maxMs</code>を使用)。
  エージェント毎のオーバーライド: <code>agents.list[].humanDelay</code> 。
  2026-02-08T09:22:13Z</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="p">{</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">humanDelay</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;natural&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="p">}</span>
</code></pre></div>
<p>動作 + チャンキングの詳細については、<a href="../../concepts/streaming">/concepts/streaming</a> を参照してください。</p>
<p>入力インジケーター:</p>
<ul>
<li><code>agents.defaults.typingMode</code>: <code>"never" | "instant" | "thinking" | "message"</code> 。 デフォルトは
  <code>instant</code> で直接チャット/メンション、未メンションのグループチャットの <code>message</code> です。</li>
<li><code>session.typingMode</code>: セッションごとのオーバーライド。</li>
<li><code>agents.defaults.typingIntervalSeconds</code>: タイピング信号がリフレッシュされる頻度(デフォルト: 6s)。</li>
<li><code>session.typingIntervalSeconds</code>: リフレッシュ間隔のセッションごとのオーバーライド。
  挙動の詳細は <a href="../../concepts/typing-indicators">/concepts/typing-indicators</a> を参照してください。</li>
</ul>
<p><code>agents.defaults.model.primary</code> は <code>provider/model</code> として設定する必要があります。（例: <code>anthropic/claude-opus-4-6</code>）
エイリアスは<code>agents.defaults.models.*.alias</code>（例：<code>Opus</code>）から来ています。
プロバイダを省略した場合、OpenClawは現在一時的な
非推奨のフォールバックとして<code>anthropic</code>を想定しています。
Z.AI モデルは <code>zai/&lt;model&gt;</code> (例: <code>zai/glm-4.7</code>) として利用でき、環境で
<code>ZAI_API_KEY</code> (またはレガシーの <code>Z_AI_API_KEY</code> )が必要です。</p>
<p><code>agents.defaults.heartbeat</code> は定期的なハートビートの実行を構成します。</p>
<ul>
<li><code>every</code>: duration string (<code>ms</code>, <code>s</code>, <code>m</code>, <code>h</code>); デフォルトの単位分。 デフォルト:
  <code>30m</code> 。 <code>0m</code> を無効にします。</li>
<li><code>model</code>: ハートビートラン(<code>provider/model</code>)のオプションのオーバーライドモデル。</li>
<li><code>includeReasoning</code>: <code>true</code>のとき、ハートビートは利用可能なとき <code>Reasoning</code>メッセージを別々に送信します（<code>/reasoning on</code>と同じ形です）。 デフォルト: <code>false</code></li>
<li><code>session</code>: ハートビートがどのセッションを実行するかを制御するオプションのセッションキー。 デフォルト: <code>main</code> 。</li>
<li><code>to</code>: オプションの受信者オーバーライド（チャンネル固有のID、例えばWhatsAppのE.164、TelegramのチャットID）。</li>
<li><code>target</code>: オプションのデリバリチャンネル (<code>last</code>, <code>whatsapp</code>, <code>telegram</code>, <code>discord</code>, <code>slack</code>, <code>msteams</code>, <code>signal</code>, <code>imessage</code>, <code>none</code>). デフォルト: <code>last</code></li>
<li><code>prompt</code>: ハートビートボディのオプションオーバーライド(デフォルト: <code>存在する場合はHEARTBEAT.md を読む(ワークスペースコンテキスト)。 Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.</code>). オーバーライドはverbatimに送られます。ファイルを読みたい場合は、<code>Read HEARTBEAT.md</code>行を含みます。</li>
<li><code>ackMaxChars</code>: 配送前に <code>HEARTBEAT_OK</code> の後に許可された最大文字数（デフォルト：300）。</li>
</ul>
<p>エージェントごとのハートビート:</p>
<ul>
<li>特定のエージェントのハートビート設定を有効または上書きするには、<code>agents.list[].heartbeat</code> を設定します。</li>
<li>エージェントのエントリで <code>heartbeat</code> が定義されている場合、<strong>これらのエージェントのみ</strong>がハートビートを実行します。デフォルトでは、
  はエージェントの共有ベースラインとなります。</li>
</ul>
<p>ハートビートはフルエージェントターンを実行します。 短い間隔では、より多くのトークンを燃やします。<code>every</code> の
に留意して、<code>HEARTBEAT.md</code> を小さくして、より安い<code>model</code> を選んでください。</p>
<p><code>tools.exec</code> はバックグラウンド実行のデフォルトを設定します。</p>
<ul>
<li><code>backgroundMs</code>: 自動背景までの時間 (ms, default 10000)</li>
<li><code>timeoutSec</code>: このランタイムの後に自動キルをする (秒、デフォルト1800)</li>
<li><code>cleanupMs</code>: 終了したセッションをメモリに保存する期間 (ms, default 1800000)</li>
<li><code>notifyOnExit</code>: enqueue a system event + request heartbeat backgrounded exec exits (default true)</li>
<li><code>applyPatch.enabled</code>: 実験的な <code>apply_patch</code> を有効にします (OpenAI/OpenAI Codex のみ、デフォルトは false)</li>
<li><code>applyPatch.allowModels</code>: optional allowlist of model ids(例: <code>gpt-5.2</code> or <code>openai/gpt-5.2</code>)
  Note: <code>applyPatch</code> は <code>tools.exec</code> の下にあります。</li>
</ul>
<p><code>tools.web</code> はウェブ検索+fetch toolsを設定します。</p>
<ul>
<li><code>tools.web.search.enabled</code> (デフォルト: キーが存在する場合は true )</li>
<li><code>tools.web.search.apiKey</code> (<code>openclaw-configure --section web</code>を介して設定するか、<code>BRAVE_API_KEY</code> envarを使用することを推奨)</li>
<li><code>tools.web.search.maxResults</code> (1–10, default 5)</li>
<li><code>tools.web.search.timeoutSeconds</code>（デフォルト 30）</li>
<li><code>tools.web.search.cacheTtlMinutes</code>（デフォルト 15）</li>
<li><code>tools.web.fetch.enabled</code> (デフォルトは true)</li>
<li><code>tools.web.fetch.maxChars</code>（デフォルト 50000）</li>
<li><code>tools.web.fetch.maxCharsCap</code> (デフォルト50000; clumps maxChars from config/tool calls)</li>
<li><code>tools.web.fetch.timeoutSeconds</code>（デフォルト 30）</li>
<li><code>tools.web.fetch.cacheTtlMinutes</code>（デフォルト 15）</li>
<li><code>tools.web.fetch.userAgent</code>（任意の上書き）。</li>
<li><code>tools.web.fetch.readability</code> (デフォルトは true; 基本的な HTML クリーンアップの使用を無効にする)</li>
<li><code>tools.web.fetch.firecrawl.enabled</code> (API キーが設定されている場合はデフォルトでtrue)</li>
<li><code>tools.web.fetch.firecrawl.apiKey</code> (オプション; デフォルトは <code>FIRECRAWL_API_KEY</code>)</li>
<li><code>tools.web.fetch.firecrawl.baseUrl</code> (デフォルト <a href="https://api.firecrawl.dev">https://api.firecrawl.dev</a>)</li>
<li><code>tools.web.fetch.firecrawl.onlyMainContent</code> (デフォルトは true)</li>
<li><code>tools.web.fetch.firecrawl.maxAgeMs</code>（任意）</li>
<li><code>tools.web.fetch.firecrawl.timeoutSeconds</code>（任意）</li>
</ul>
<p><code>tools.media</code> はインバウンドメディア理解を設定します（画像/オーディオ/ビデオ）。</p>
<ul>
<li><code>tools.media.models</code>: 共有モデルリスト (capability-tagged; per-cap listsの後に使用)。</li>
<li><code>tools.media.concurrency</code>: 最大同時実行機能 (デフォルト2)。</li>
<li><code>tools.media.image</code> / <code>tools.media.audio</code> / <code>tools.media.video</code>:</li>
<li><code>enabled</code>: opt-out switch (モデルが設定されている場合はデフォルトでは true)。</li>
<li><code>prompt</code>: オプションのプロンプトのオーバーライド（画像/ビデオは <code>maxChars</code> ヒントを自動的に追加）。</li>
<li><code>maxChars</code>: 最大出力文字数（画像/ビデオの場合はデフォルト500、オーディオの場合はオフ）。</li>
<li><code>maxBytes</code>: 送信するメディアの最大サイズ（デフォルト：画像10MB、音声20MB、動画50MB）。</li>
<li><code>timeoutSeconds</code>: リクエストタイムアウト (デフォルト: 画像60、音声60、動画120)。</li>
<li><code>language</code>: 音声ヒントのオプション。</li>
<li><code>attachments</code>: attachment policy (<code>mode</code>, <code>maxAttachments</code>, <code>prefer</code>).</li>
<li><code>scope</code>: オプション gating (first match wins) with <code>match.channel</code> , <code>match.chatType</code> , または <code>match.keyPrefix</code> .</li>
<li><code>models</code>: ordered list of model entries; failure or oversize media fall back to the next entry.</li>
<li>それぞれの <code>models[]</code> エントリ:</li>
<li>プロバイダエントリ(<code>type: "provider"</code>または省略):<ul>
<li><code>provider</code>: API プロバイダー id (<code>openai</code>, <code>anthropic</code>, <code>google</code>/<code>gemini</code>, <code>groq</code>, etc).</li>
<li><code>model</code>: モデル id オーバーライド（画像には必須。デフォルトは <code>gpt-4o-mini-transscribe</code>/<code>wisper-large v3-turbo</code>、ビデオに <code>gemini-3-flash-preview</code>）。</li>
<li><code>profile</code> / <code>preferredProfile</code>: authプロファイルの選択。</li>
</ul>
</li>
<li>CLI エントリ (<code>type: "cli"</code>):<ul>
<li><code>command</code>: 実行する実行ファイル。</li>
<li><code>args</code>: templated args (support <code>{{MediaPath}}</code>, <code>{{Prompt}}</code>, <code>{{MaxChars}}</code>など).</li>
</ul>
</li>
<li><code>capabilities</code>: オプションのリスト(<code>image</code>, <code>audio</code>, <code>video</code>)を共有エントリにゲートします。 省略時のデフォルト: <code>openai</code>/<code>anthropic</code>/<code>minimax</code> → 画像、<code>google</code> → image+audio+video、<code>groq</code> → audio。</li>
<li><code>prompt</code> 、 <code>maxChars</code> 、 <code>maxBytes</code> 、 <code>timeoutSeconds</code> 、 <code>language</code> はエントリごとに上書きすることができます。</li>
</ul>
<p>モデルが設定されていない場合 (または <code>enabled: false</code> )、理解はスキップされます。モデルは元の添付ファイルを受け取ります。</p>
<p>プロバイダ認証は標準モデルの認証順序に従います(認証プロファイル、<code>OPENAI_API_KEY</code>/<code>GROQ_API_KEY</code>/<code>GEMINI_API_KEY</code>、<code>models.providers.*.apiKey</code>など)。</p>
<p>e226e24422c05e7e</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="mf">28.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="w">    </span><span class="nv">media</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a><span class="w">      </span><span class="nv">audio</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a><span class="w">        </span><span class="nv">maxBytes</span><span class="p">:</span><span class="w"> </span><span class="mf">20971520</span><span class="p">,</span>
<a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a><span class="w">        </span><span class="nv">scope</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a><span class="w">          </span><span class="nv">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deny&quot;</span><span class="p">,</span>
<a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a><span class="w">          </span><span class="nv">rules</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nv">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allow&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">match</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">chatType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;direct&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}],</span>
<a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-68-11" name="__codelineno-68-11" href="#__codelineno-68-11"></a><span class="w">        </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-68-12" name="__codelineno-68-12" href="#__codelineno-68-12"></a><span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nv">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gpt-4o-mini-transcribe&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-68-13" name="__codelineno-68-13" href="#__codelineno-68-13"></a><span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nv">type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cli&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">command</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;whisper&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">args</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;--model&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;base&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;{{MediaPath}}&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-68-14" name="__codelineno-68-14" href="#__codelineno-68-14"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-68-15" name="__codelineno-68-15" href="#__codelineno-68-15"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-68-16" name="__codelineno-68-16" href="#__codelineno-68-16"></a><span class="w">      </span><span class="nv">video</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-68-17" name="__codelineno-68-17" href="#__codelineno-68-17"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-68-18" name="__codelineno-68-18" href="#__codelineno-68-18"></a><span class="w">        </span><span class="nv">maxBytes</span><span class="p">:</span><span class="w"> </span><span class="mf">52428800</span><span class="p">,</span>
<a id="__codelineno-68-19" name="__codelineno-68-19" href="#__codelineno-68-19"></a><span class="w">        </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nv">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;google&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gemini-3-flash-preview&quot;</span><span class="w"> </span><span class="p">}],</span>
<a id="__codelineno-68-20" name="__codelineno-68-20" href="#__codelineno-68-20"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-68-21" name="__codelineno-68-21" href="#__codelineno-68-21"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-68-22" name="__codelineno-68-22" href="#__codelineno-68-22"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-68-23" name="__codelineno-68-23" href="#__codelineno-68-23"></a><span class="p">}</span>
</code></pre></div>
<p><code>agents.defaults.subagents</code> はサブエージェントのデフォルトを設定します。</p>
<ul>
<li><code>model</code>: spawn されたサブエージェントのデフォルトモデル (string or <code>{ primary, fallbacks }</code>). 省略された場合、サブエージェントはエージェントごとまたは呼び出しごとに上書きされない限り、呼び出し元のモデルを継承します。</li>
<li><code>maxConcurrent</code>: max concurrent sub-agent runs (default 1)</li>
<li><code>archiveAfterMinutes</code>: サブエージェントセッションをN分後に自動アーカイブします（デフォルトでは60分、<code>0</code>を無効にします）</li>
<li>サブエージェント毎のツールポリシー: <code>tools.subagents.tools.allow</code> / <code>tools.subagents.tools.deny</code> (deny wins)</li>
</ul>
<p><code>tools.profile</code> は <code>tools.allow</code>/<code>tools.deny</code>の前に <strong>base tools allowlist</strong> を設定します。</p>
<ul>
<li><code>minimal</code>: <code>session_status</code> のみ</li>
<li><code>coding</code>: <code>group:fs</code>, <code>group:runtime</code>, <code>group:sessions</code>, <code>group:memory</code>, <code>image</code></li>
<li><code>messaging</code>: <code>group:messaging</code>, <code>sessions_list</code>, <code>sessions_history</code>, <code>sessions_send</code>, <code>session_status</code></li>
<li><code>full</code>: 制限なし（未設定と同等）</li>
</ul>
<p>エージェント毎のオーバーライド: <code>agents.list[].tools.profile</code> 。</p>
<p>例（既定はメッセージングのみ、Slack + Discord ツールも許可）:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="p">{</span>
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="w">    </span><span class="nv">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;messaging&quot;</span><span class="p">,</span>
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="w">    </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;slack&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;discord&quot;</span><span class="p">],</span>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a><span class="p">}</span>
</code></pre></div>
<p>例（コーディングプロファイルだが、exec/process をすべて拒否）:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="p">{</span>
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="w">    </span><span class="nv">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;coding&quot;</span><span class="p">,</span>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="w">    </span><span class="nv">deny</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;group:runtime&quot;</span><span class="p">],</span>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a><span class="p">}</span>
</code></pre></div>
<p><code>tools.byProvider</code> を使用すると、特定のプロバイダー (または単一の <code>provider/model</code> ) に対して、 <strong>さらなる制限</strong> ツールを使用できます。
エージェント毎のオーバーライド: <code>agents.list[].tools.byProvider</code></p>
<p>注文: ベースプロファイル → プロバイダプロファイル → ポリシーの許可/拒否。
プロバイダのキーは <code>provider</code> (例: <code>google-antigubity</code>) または <code>provider/model</code>
(例: <code>openai/gpt-5.2</code>) のいずれかを受け付けます。</p>
<p>例（グローバルはコーディングプロファイルを維持しつつ、Google Antigravity では最小限のツール）:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="p">{</span>
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a><span class="w">    </span><span class="nv">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;coding&quot;</span><span class="p">,</span>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a><span class="w">    </span><span class="nv">byProvider</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a><span class="w">      </span><span class="nv">&quot;google-antigravity&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;minimal&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a><span class="p">}</span>
</code></pre></div>
<p>例 (provider/model-specific allowlist):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="p">{</span>
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="w">    </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;group:fs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;group:runtime&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sessions_list&quot;</span><span class="p">],</span>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="w">    </span><span class="nv">byProvider</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a><span class="w">      </span><span class="nv">&quot;openai/gpt-5.2&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;group:fs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;sessions_list&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a><span class="p">}</span>
</code></pre></div>
<p><code>tools.allow</code> / <code>tools.deny</code> はグローバルツールのallow/denyポリシーを設定します（deny wins）。
マッチングは大文字と小文字を区別せず、<code>*</code> ワイルドカード（<code>"*"</code>はすべてのツールを意味します）をサポートしています。
これは、Docker Sandbox が <strong>off</strong> の場合でも適用されます。</p>
<p>例 (ブラウザ/キャンバスをどこでも無効にできます):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="p">{</span>
<a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">deny</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;browser&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;canvas&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="p">}</span>
</code></pre></div>
<p>ツールグループ (略) は <strong>global</strong> と <strong>per-agent</strong> ツールポリシーで動作します。</p>
<ul>
<li><code>group:runtime</code>: <code>exec</code>, <code>bash</code>, <code>process</code></li>
<li><code>group:fs</code>: <code>read</code>, <code>write</code>, <code>edit</code>, <code>apply_patch</code></li>
<li><code>group:sessions</code>: <code>sessions_list</code>, <code>sessions_history</code>, <code>sessions_send</code>, <code>sessions_spawn</code>, <code>session_status</code></li>
<li><code>group:memory</code>: <code>memory_search</code>, <code>memory_get</code></li>
<li><code>group:web</code>: <code>web_search</code>, <code>web_fetch</code></li>
<li><code>group:ui</code>: <code>browser</code>, <code>canvas</code></li>
<li><code>group:automation</code>: <code>cron</code>, <code>gateway</code></li>
<li><code>group:messaging</code>: <code>message</code></li>
<li><code>group:nodes</code>: <code>nodes</code></li>
<li><code>group:openclaw</code>: すべての組み込み OpenClaw ツール（プロバイダープラグインを除く）</li>
</ul>
<p><code>tools.elevated</code> controls righted (host) exec access:</p>
<ul>
<li><code>enabled</code>: 昇格モードを許可する (デフォルトは true)</li>
<li><code>allowFrom</code>: per-channel allowlist (empty = disabled)</li>
<li><code>whatsapp</code>: E.164 numbers</li>
<li><code>telegram</code>: チャット IDまたはユーザー名</li>
<li><code>discord</code>: ユーザー IDまたはユーザー名 (省略した場合は <code>channels.discord.dm.allowFrom</code> に戻ります)</li>
<li><code>シグナル</code>: E.164 numbers</li>
<li><code>imessage</code>: handles/chat id</li>
<li><code>webchat</code>: セッションIDまたはユーザー名</li>
</ul>
<p>v1</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="mf">29.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="w">    </span><span class="nv">elevated</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a><span class="w">      </span><span class="nv">allowFrom</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a><span class="w">        </span><span class="nv">whatsapp</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;+15555550123&quot;</span><span class="p">],</span>
<a id="__codelineno-74-7" name="__codelineno-74-7" href="#__codelineno-74-7"></a><span class="w">        </span><span class="nv">discord</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;steipete&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1234567890123&quot;</span><span class="p">],</span>
<a id="__codelineno-74-8" name="__codelineno-74-8" href="#__codelineno-74-8"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-74-9" name="__codelineno-74-9" href="#__codelineno-74-9"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-74-10" name="__codelineno-74-10" href="#__codelineno-74-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-74-11" name="__codelineno-74-11" href="#__codelineno-74-11"></a><span class="p">}</span>
</code></pre></div>
<p>エージェント毎のオーバーライド(さらなる制限):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="mf">30.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="w">    </span><span class="nv">list</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a><span class="w">        </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;family&quot;</span><span class="p">,</span>
<a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a><span class="w">        </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a><span class="w">          </span><span class="nv">elevated</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-75-10" name="__codelineno-75-10" href="#__codelineno-75-10"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-75-11" name="__codelineno-75-11" href="#__codelineno-75-11"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-75-12" name="__codelineno-75-12" href="#__codelineno-75-12"></a><span class="p">}</span>
</code></pre></div>
<p>設定内でインライン環境変数を指定することもできます。これらは、プロセス環境にキーが存在しない場合にのみ適用されます（同じく上書きしません）。</p>
<ul>
<li><code>tools.elevated</code> はグローバルベースラインです。 <code>agents.list[].tools.elevated</code> は、さらに制限することができます (両方とも許可する必要があります)。</li>
<li><code>/上に昇格|オフ|ask|full</code> はセッションごとの状態を保存します。インラインディレクティブは単一のメッセージに適用されます。</li>
<li><code>exec</code>が高くなってホスト上で実行され、サンドボックス化がバイパスされます。</li>
<li>ツールポリシーが適用されます; <code>exec</code>が拒否された場合、昇格は使用できません。</li>
</ul>
<p><code>agents.defaults.maxConcurrent</code> は、セッション間で並列に
実行できる埋め込みエージェントの実行数を設定します。 各セッションはまだシリアル化されています(一度に1つのセッションキーにつき1つの実行
)。 デフォルト: 1.</p>
<h3 id="agentsdefaultssandbox"><code>agents.defaults.sandbox</code><a class="headerlink" href="#agentsdefaultssandbox" title="Permanent link">&para;</a></h3>
<p>埋め込みエージェント用のオプションの <strong>Docker サンドボックス</strong> です。 メイン以外の
セッションを対象としていないため、ホストシステムにアクセスできません。</p>
<p>詳細: <a href="../../gateway/sandboxing">Sandboxing</a></p>
<p>デフォルト (有効な場合):</p>
<ul>
<li>scope: <code>"agent"</code> (1 container + workspace per agent)</li>
<li>Debian bookworm-slim based image</li>
<li>ファイルが存在しない場合、OpenClaw は安全寄りのデフォルト（組み込み Pi エージェント + 送信者ごとのセッション + ワークスペース <code>~/.openclaw/workspace</code>）を使用します。通常、設定が必要になるのは次の場合です。</li>
<li><code>"none"</code>: <code>~/.openclaw/sandboxes</code>の下でスコープごとのサンドボックスワークスペースを使用します</li>
<li><code>"ro"</code>: サンドボックスのワークスペースを<code>/workspace</code>に保ち、<code>/agent</code>でエージェントワークスペースを読み取り専用にマウントします (<code>write</code>/<code>edit</code>/<code>apply_patch</code>)</li>
<li><code>"rw"</code>: <code>/workspace</code> でエージェントワークスペースを読み書きする</li>
<li>自動プルーン：アイドル &gt; 24 時間 または 経過 &gt; 7 日</li>
<li>tool policy: allow only <code>exec</code>, <code>process</code>, <code>read</code>, <code>write</code>, <code>edit</code>, <code>apply_patch</code>, <code>sessions_list</code>, <code>sessions_history</code>, <code>sessions_send</code>, <code>sessions_spawn</code>, <code>session_status</code> (deny wins)</li>
<li><code>tools.sandbox.tools</code> を使用して設定し、<code>agents.list[].tools.sandbox.tools</code> を使用してエージェントごとに上書きする</li>
<li>sandbox ポリシーでサポートされているツールグループの短縮形: <code>group:runtime</code>, <code>group:fs</code>, <code>group:sessions</code>, <code>group:memory</code> (<a href="../../gateway/sandbox-vs-tool-policy-vs-elevated#tool-groups-shorthands">Sandbox vs Tool Policy vs Elevated</a>) を参照してください。</li>
<li>オプションのサンドボックス化ブラウザ (Chromium + CDP, noVNC observer)</li>
<li>ノブを硬化させる: <code>network</code>, <code>user</code>, <code>pidsLimit</code>, <code>memory</code>, <code>cpus</code>, <code>ulimits</code>, <code>seccompProfile</code>, <code>apparmorProfile</code></li>
</ul>
<p>警告: <code>scope: "shared"は共有コンテナと共有ワークスペースを意味します。 
セッション間隔離はありません。 セッションごとの分離には</code>scope: "session"` を使用します。</p>
<p>レガシー: <code>perSession</code> はまだサポートされています (<code>true</code> → <code>scope: "session"</code>,
<code>false</code> → <code>scope: "shared"</code>).</p>
<p><code>setupCommand</code> はコンテナが作成された後に <strong>1回</strong> 実行されます (<code>sh -lc</code>を介してコンテナの中に入ります)。
パッケージをインストールする場合は、ネットワーク egress、書き込み可能なルート FS 、および root ユーザーを確認してください。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="mf">31.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="w">      </span><span class="nv">sandbox</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="w">        </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;non-main&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// off | non-main | all</span>
<a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a><span class="w">        </span><span class="nv">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;agent&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// session | agent | shared (agent is default)</span>
<a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a><span class="w">        </span><span class="nv">workspaceAccess</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// none | ro | rw</span>
<a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a><span class="w">        </span><span class="nv">workspaceRoot</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/sandboxes&quot;</span><span class="p">,</span>
<a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a><span class="w">        </span><span class="nv">docker</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a><span class="w">          </span><span class="nv">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openclaw-sandbox:bookworm-slim&quot;</span><span class="p">,</span>
<a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a><span class="w">          </span><span class="nv">containerPrefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openclaw-sbx-&quot;</span><span class="p">,</span>
<a id="__codelineno-76-12" name="__codelineno-76-12" href="#__codelineno-76-12"></a><span class="w">          </span><span class="nv">workdir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/workspace&quot;</span><span class="p">,</span>
<a id="__codelineno-76-13" name="__codelineno-76-13" href="#__codelineno-76-13"></a><span class="w">          </span><span class="nv">readOnlyRoot</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-76-14" name="__codelineno-76-14" href="#__codelineno-76-14"></a><span class="w">          </span><span class="nv">tmpfs</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;/tmp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/var/tmp&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/run&quot;</span><span class="p">],</span>
<a id="__codelineno-76-15" name="__codelineno-76-15" href="#__codelineno-76-15"></a><span class="w">          </span><span class="nv">network</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;none&quot;</span><span class="p">,</span>
<a id="__codelineno-76-16" name="__codelineno-76-16" href="#__codelineno-76-16"></a><span class="w">          </span><span class="nv">user</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000:1000&quot;</span><span class="p">,</span>
<a id="__codelineno-76-17" name="__codelineno-76-17" href="#__codelineno-76-17"></a><span class="w">          </span><span class="nv">capDrop</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;ALL&quot;</span><span class="p">],</span>
<a id="__codelineno-76-18" name="__codelineno-76-18" href="#__codelineno-76-18"></a><span class="w">          </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">LANG</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;C.UTF-8&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-76-19" name="__codelineno-76-19" href="#__codelineno-76-19"></a><span class="w">          </span><span class="nv">setupCommand</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;apt-get update &amp;&amp; apt-get install -y git curl jq&quot;</span><span class="p">,</span>
<a id="__codelineno-76-20" name="__codelineno-76-20" href="#__codelineno-76-20"></a><span class="w">          </span><span class="c1">// Per-agent override (multi-agent): agents.list[].sandbox.docker.*</span>
<a id="__codelineno-76-21" name="__codelineno-76-21" href="#__codelineno-76-21"></a><span class="w">          </span><span class="nv">pidsLimit</span><span class="p">:</span><span class="w"> </span><span class="mf">256</span><span class="p">,</span>
<a id="__codelineno-76-22" name="__codelineno-76-22" href="#__codelineno-76-22"></a><span class="w">          </span><span class="nv">memory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1g&quot;</span><span class="p">,</span>
<a id="__codelineno-76-23" name="__codelineno-76-23" href="#__codelineno-76-23"></a><span class="w">          </span><span class="nv">memorySwap</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2g&quot;</span><span class="p">,</span>
<a id="__codelineno-76-24" name="__codelineno-76-24" href="#__codelineno-76-24"></a><span class="w">          </span><span class="nv">cpus</span><span class="p">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span>
<a id="__codelineno-76-25" name="__codelineno-76-25" href="#__codelineno-76-25"></a><span class="w">          </span><span class="nv">ulimits</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-26" name="__codelineno-76-26" href="#__codelineno-76-26"></a><span class="w">            </span><span class="nv">nofile</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">soft</span><span class="p">:</span><span class="w"> </span><span class="mf">1024</span><span class="p">,</span><span class="w"> </span><span class="nv">hard</span><span class="p">:</span><span class="w"> </span><span class="mf">2048</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-76-27" name="__codelineno-76-27" href="#__codelineno-76-27"></a><span class="w">            </span><span class="nv">nproc</span><span class="p">:</span><span class="w"> </span><span class="mf">256</span><span class="p">,</span>
<a id="__codelineno-76-28" name="__codelineno-76-28" href="#__codelineno-76-28"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-76-29" name="__codelineno-76-29" href="#__codelineno-76-29"></a><span class="w">          </span><span class="nv">seccompProfile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/seccomp.json&quot;</span><span class="p">,</span>
<a id="__codelineno-76-30" name="__codelineno-76-30" href="#__codelineno-76-30"></a><span class="w">          </span><span class="nv">apparmorProfile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openclaw-sandbox&quot;</span><span class="p">,</span>
<a id="__codelineno-76-31" name="__codelineno-76-31" href="#__codelineno-76-31"></a><span class="w">          </span><span class="nv">dns</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;1.1.1.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;8.8.8.8&quot;</span><span class="p">],</span>
<a id="__codelineno-76-32" name="__codelineno-76-32" href="#__codelineno-76-32"></a><span class="w">          </span><span class="nv">extraHosts</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;internal.service:10.0.0.5&quot;</span><span class="p">],</span>
<a id="__codelineno-76-33" name="__codelineno-76-33" href="#__codelineno-76-33"></a><span class="w">          </span><span class="nv">binds</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/home/user/source:/source:rw&quot;</span><span class="p">],</span>
<a id="__codelineno-76-34" name="__codelineno-76-34" href="#__codelineno-76-34"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-76-35" name="__codelineno-76-35" href="#__codelineno-76-35"></a><span class="w">        </span><span class="nv">browser</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-36" name="__codelineno-76-36" href="#__codelineno-76-36"></a><span class="w">          </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-76-37" name="__codelineno-76-37" href="#__codelineno-76-37"></a><span class="w">          </span><span class="nv">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openclaw-sandbox-browser:bookworm-slim&quot;</span><span class="p">,</span>
<a id="__codelineno-76-38" name="__codelineno-76-38" href="#__codelineno-76-38"></a><span class="w">          </span><span class="nv">containerPrefix</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openclaw-sbx-browser-&quot;</span><span class="p">,</span>
<a id="__codelineno-76-39" name="__codelineno-76-39" href="#__codelineno-76-39"></a><span class="w">          </span><span class="nv">cdpPort</span><span class="p">:</span><span class="w"> </span><span class="mf">9222</span><span class="p">,</span>
<a id="__codelineno-76-40" name="__codelineno-76-40" href="#__codelineno-76-40"></a><span class="w">          </span><span class="nv">vncPort</span><span class="p">:</span><span class="w"> </span><span class="mf">5900</span><span class="p">,</span>
<a id="__codelineno-76-41" name="__codelineno-76-41" href="#__codelineno-76-41"></a><span class="w">          </span><span class="nv">noVncPort</span><span class="p">:</span><span class="w"> </span><span class="mf">6080</span><span class="p">,</span>
<a id="__codelineno-76-42" name="__codelineno-76-42" href="#__codelineno-76-42"></a><span class="w">          </span><span class="nv">headless</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-76-43" name="__codelineno-76-43" href="#__codelineno-76-43"></a><span class="w">          </span><span class="nv">enableNoVnc</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-76-44" name="__codelineno-76-44" href="#__codelineno-76-44"></a><span class="w">          </span><span class="nv">allowHostControl</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-76-45" name="__codelineno-76-45" href="#__codelineno-76-45"></a><span class="w">          </span><span class="nv">allowedControlUrls</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;http://10.0.0.42:18791&quot;</span><span class="p">],</span>
<a id="__codelineno-76-46" name="__codelineno-76-46" href="#__codelineno-76-46"></a><span class="w">          </span><span class="nv">allowedControlHosts</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;browser.lab.local&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;10.0.0.42&quot;</span><span class="p">],</span>
<a id="__codelineno-76-47" name="__codelineno-76-47" href="#__codelineno-76-47"></a><span class="w">          </span><span class="nv">allowedControlPorts</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">18791</span><span class="p">],</span>
<a id="__codelineno-76-48" name="__codelineno-76-48" href="#__codelineno-76-48"></a><span class="w">          </span><span class="nv">autoStart</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-76-49" name="__codelineno-76-49" href="#__codelineno-76-49"></a><span class="w">          </span><span class="nv">autoStartTimeoutMs</span><span class="p">:</span><span class="w"> </span><span class="mf">12000</span><span class="p">,</span>
<a id="__codelineno-76-50" name="__codelineno-76-50" href="#__codelineno-76-50"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-76-51" name="__codelineno-76-51" href="#__codelineno-76-51"></a><span class="w">        </span><span class="nv">prune</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-52" name="__codelineno-76-52" href="#__codelineno-76-52"></a><span class="w">          </span><span class="nv">idleHours</span><span class="p">:</span><span class="w"> </span><span class="mf">24</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0 disables idle pruning</span>
<a id="__codelineno-76-53" name="__codelineno-76-53" href="#__codelineno-76-53"></a><span class="w">          </span><span class="nv">maxAgeDays</span><span class="p">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="c1">// 0 disables max-age pruning</span>
<a id="__codelineno-76-54" name="__codelineno-76-54" href="#__codelineno-76-54"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-76-55" name="__codelineno-76-55" href="#__codelineno-76-55"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-76-56" name="__codelineno-76-56" href="#__codelineno-76-56"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-76-57" name="__codelineno-76-57" href="#__codelineno-76-57"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-76-58" name="__codelineno-76-58" href="#__codelineno-76-58"></a><span class="w">  </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-59" name="__codelineno-76-59" href="#__codelineno-76-59"></a><span class="w">    </span><span class="nv">sandbox</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-60" name="__codelineno-76-60" href="#__codelineno-76-60"></a><span class="w">      </span><span class="nv">tools</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-76-61" name="__codelineno-76-61" href="#__codelineno-76-61"></a><span class="w">        </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-76-62" name="__codelineno-76-62" href="#__codelineno-76-62"></a><span class="w">          </span><span class="s">&quot;exec&quot;</span><span class="p">,</span>
<a id="__codelineno-76-63" name="__codelineno-76-63" href="#__codelineno-76-63"></a><span class="w">          </span><span class="s">&quot;process&quot;</span><span class="p">,</span>
<a id="__codelineno-76-64" name="__codelineno-76-64" href="#__codelineno-76-64"></a><span class="w">          </span><span class="s">&quot;read&quot;</span><span class="p">,</span>
<a id="__codelineno-76-65" name="__codelineno-76-65" href="#__codelineno-76-65"></a><span class="w">          </span><span class="s">&quot;write&quot;</span><span class="p">,</span>
<a id="__codelineno-76-66" name="__codelineno-76-66" href="#__codelineno-76-66"></a><span class="w">          </span><span class="s">&quot;edit&quot;</span><span class="p">,</span>
<a id="__codelineno-76-67" name="__codelineno-76-67" href="#__codelineno-76-67"></a><span class="w">          </span><span class="s">&quot;apply_patch&quot;</span><span class="p">,</span>
<a id="__codelineno-76-68" name="__codelineno-76-68" href="#__codelineno-76-68"></a><span class="w">          </span><span class="s">&quot;sessions_list&quot;</span><span class="p">,</span>
<a id="__codelineno-76-69" name="__codelineno-76-69" href="#__codelineno-76-69"></a><span class="w">          </span><span class="s">&quot;sessions_history&quot;</span><span class="p">,</span>
<a id="__codelineno-76-70" name="__codelineno-76-70" href="#__codelineno-76-70"></a><span class="w">          </span><span class="s">&quot;sessions_send&quot;</span><span class="p">,</span>
<a id="__codelineno-76-71" name="__codelineno-76-71" href="#__codelineno-76-71"></a><span class="w">          </span><span class="s">&quot;sessions_spawn&quot;</span><span class="p">,</span>
<a id="__codelineno-76-72" name="__codelineno-76-72" href="#__codelineno-76-72"></a><span class="w">          </span><span class="s">&quot;session_status&quot;</span><span class="p">,</span>
<a id="__codelineno-76-73" name="__codelineno-76-73" href="#__codelineno-76-73"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-76-74" name="__codelineno-76-74" href="#__codelineno-76-74"></a><span class="w">        </span><span class="nv">deny</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;browser&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;canvas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;nodes&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;cron&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;discord&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;gateway&quot;</span><span class="p">],</span>
<a id="__codelineno-76-75" name="__codelineno-76-75" href="#__codelineno-76-75"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-76-76" name="__codelineno-76-76" href="#__codelineno-76-76"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-76-77" name="__codelineno-76-77" href="#__codelineno-76-77"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-76-78" name="__codelineno-76-78" href="#__codelineno-76-78"></a><span class="p">}</span>
</code></pre></div>
<p><code>$include</code> ディレクティブを使用して、設定を複数ファイルに分割できます。これは次の用途に便利です。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>scripts/sandbox-setup.sh
</code></pre></div>
<p>注意: Sandbox コンテナはデフォルトで <code>network: "none"</code> に設定します。エージェントのアウトバウンドアクセスが必要な場合は、<code>agents.defaults.sandbox.docker.network</code>
に `bridge" (またはカスタムネットワーク) を設定します。</p>
<p>注意: 受信添付ファイルは <code>media/inbound/*</code> のアクティブなワークスペースにステージされます。 <code>workspaceAccess: "rw"</code>では、ファイルがエージェントのワークスペースに書き込まれることを意味します。</p>
<p>注意: <code>docker.binds</code> は、追加のホストディレクトリをマウントします。グローバルとエージェントごとのバインディングはマージされます。</p>
<p>オプションのブラウザー画像を以下で作成します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>scripts/sandbox-browser-setup.sh
</code></pre></div>
<p><code>agents.defaults.sandbox.browser.enabled=true</code> の場合、ブラウザツールはサンドボックス化された
Chromium インスタンス (CDP) を使用します。 noVNC が有効になっている場合 (headless=falseの場合のデフォルト)、
noVNC URL はエージェントが参照できるようにシステムプロンプトに注入されます。
メイン設定で <code>browser.enabled</code> は必要ありません。sandbox control
URL はセッションごとに注入されます。</p>
<ol>
<li><code>agents.defaults.sandbox.browser.allowHostControl</code>（既定値: false）を有効にすると、サンドボックス化されたセッションが、ブラウザツール（<code>target: "host"</code>）を介して <strong>ホスト</strong> のブラウザ制御サーバーを明示的に対象にできるようになります。 厳格な
    サンドボックスの分離が必要な場合は、これをオフにしてください。</li>
</ol>
<p>リモートコントロールの許可リスト:</p>
<ul>
<li><code>allowedControlUrls</code>: <code>target: "custom"</code>で許可されている正確な制御URL。</li>
<li><code>allowedControlHosts</code>: 許可されたホスト名(ホスト名のみ、ポートなし)。</li>
<li><code>allowedControlPorts</code>: ポート許可 (デフォルト: http=80, https=443)。
  デフォルト: すべての許可リストが未設定（制限なし）です。 <code>allowHostControl</code> のデフォルトは false です。</li>
</ul>
<h3 id="models-url"><code>models</code> (カスタム プロバイダー + ベース URL)<a class="headerlink" href="#models-url" title="Permanent link">&para;</a></h3>
<p>OpenClawは<strong>pi-coding-agent</strong>モデルカタログを使用しています。 カスタム プロバイダー
(LiteLLM、ローカル OpenAI 互換サーバー、Anthropic プロキシなど) を追加できます。
<code>~/.openclaw/agents/&lt;agentId&gt;/agent/models.json</code> を書くか、 <code>models.providers</code> の下にある
OpenClaw設定内で同じスキーマを定義することによって。
プロバイダごとのプロバイダの概要 + 例: <a href="../../concepts/model-providers">/concepts/model-providers</a></p>
<p>Gateway は、UI エディター向けに設定の JSON Schema 表現を <code>config.schema</code> 経由で公開します。<br />
Control UI はこのスキーマからフォームを生成し、エスケープハッチとして <strong>Raw JSON</strong> エディターを提供します。</p>
<ul>
<li>デフォルトの動作: <strong>マージ</strong> (既存のプロバイダを保持し、名前を上書きします)</li>
<li><code>models.mode: "replace"</code>を設定してファイルの内容を上書きする</li>
</ul>
<p><code>agents.defaults.model.primary</code> (provider/model) でモデルを選択します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="mf">33.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;custom-proxy/llama-3.1-8b&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a><span class="w">        </span><span class="nv">&quot;custom-proxy/llama-3.1-8b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-79-9" name="__codelineno-79-9" href="#__codelineno-79-9"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-79-10" name="__codelineno-79-10" href="#__codelineno-79-10"></a><span class="w">  </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-11" name="__codelineno-79-11" href="#__codelineno-79-11"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span><span class="p">,</span>
<a id="__codelineno-79-12" name="__codelineno-79-12" href="#__codelineno-79-12"></a><span class="w">    </span><span class="nv">providers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-13" name="__codelineno-79-13" href="#__codelineno-79-13"></a><span class="w">      </span><span class="nv">&quot;custom-proxy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-14" name="__codelineno-79-14" href="#__codelineno-79-14"></a><span class="w">        </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://localhost:4000/v1&quot;</span><span class="p">,</span>
<a id="__codelineno-79-15" name="__codelineno-79-15" href="#__codelineno-79-15"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;LITELLM_KEY&quot;</span><span class="p">,</span>
<a id="__codelineno-79-16" name="__codelineno-79-16" href="#__codelineno-79-16"></a><span class="w">        </span><span class="nv">api</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai-completions&quot;</span><span class="p">,</span>
<a id="__codelineno-79-17" name="__codelineno-79-17" href="#__codelineno-79-17"></a><span class="w">        </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-79-18" name="__codelineno-79-18" href="#__codelineno-79-18"></a><span class="w">          </span><span class="p">{</span>
<a id="__codelineno-79-19" name="__codelineno-79-19" href="#__codelineno-79-19"></a><span class="w">            </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;llama-3.1-8b&quot;</span><span class="p">,</span>
<a id="__codelineno-79-20" name="__codelineno-79-20" href="#__codelineno-79-20"></a><span class="w">            </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Llama 3.1 8B&quot;</span><span class="p">,</span>
<a id="__codelineno-79-21" name="__codelineno-79-21" href="#__codelineno-79-21"></a><span class="w">            </span><span class="nv">reasoning</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-79-22" name="__codelineno-79-22" href="#__codelineno-79-22"></a><span class="w">            </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;text&quot;</span><span class="p">],</span>
<a id="__codelineno-79-23" name="__codelineno-79-23" href="#__codelineno-79-23"></a><span class="w">            </span><span class="nv">cost</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">output</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheRead</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheWrite</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-79-24" name="__codelineno-79-24" href="#__codelineno-79-24"></a><span class="w">            </span><span class="nv">contextWindow</span><span class="p">:</span><span class="w"> </span><span class="mf">128000</span><span class="p">,</span>
<a id="__codelineno-79-25" name="__codelineno-79-25" href="#__codelineno-79-25"></a><span class="w">            </span><span class="nv">maxTokens</span><span class="p">:</span><span class="w"> </span><span class="mf">32000</span><span class="p">,</span>
<a id="__codelineno-79-26" name="__codelineno-79-26" href="#__codelineno-79-26"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-79-27" name="__codelineno-79-27" href="#__codelineno-79-27"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-79-28" name="__codelineno-79-28" href="#__codelineno-79-28"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-79-29" name="__codelineno-79-29" href="#__codelineno-79-29"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-79-30" name="__codelineno-79-30" href="#__codelineno-79-30"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-79-31" name="__codelineno-79-31" href="#__codelineno-79-31"></a><span class="p">}</span>
</code></pre></div>
<h3 id="opencode-zen">OpenCode Zen (マルチモデル プロキシ)<a class="headerlink" href="#opencode-zen" title="Permanent link">&para;</a></h3>
<p>OpenCode Zenは、モデルごとのエンドポイントを備えたマルチモデルゲートウェイです。 34. OpenClaw は pi-ai の組み込み <code>opencode</code> プロバイダーを使用します。<a href="https://opencode.ai/auth">https://opencode.ai/auth</a> から <code>OPENCODE_API_KEY</code>（または <code>OPENCODE_ZEN_API_KEY</code>）を設定してください。</p>
<p>パラメータ：</p>
<ul>
<li>model refs は <code>opencode/&lt;modelId&gt;</code> を使用します(例: <code>opencode/claude-opus-4-6</code>)。</li>
<li><code>agents.defaults.models</code> で許可リストを有効にする場合は、使用予定の各モデルを追加します。</li>
<li>ショートカット: <code>openclawオン --auth-choice opencode-zen</code>。</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="mf">35.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;opencode/claude-opus-4-6&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;opencode/claude-opus-4-6&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Opus&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-80-7" name="__codelineno-80-7" href="#__codelineno-80-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-80-8" name="__codelineno-80-8" href="#__codelineno-80-8"></a><span class="p">}</span>
</code></pre></div>
<h3 id="zai-glm-47">Z.AI (GLM-4.7) — プロバイダエイリアスのサポート<a class="headerlink" href="#zai-glm-47" title="Permanent link">&para;</a></h3>
<p>Z.AI モデルは、組み込みの <code>zai</code> プロバイダー経由で利用できます。 環境で <code>ZAI_API_KEY</code>
を設定し、プロバイダ/モデルでモデルを参照します。</p>
<p>ショートカット: <code>openclawon --auth-choice zai-api-key</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="p">{</span>
<a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zai/glm-4.7&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;zai/glm-4.7&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a><span class="p">}</span>
</code></pre></div>
<p>ネストされたインクルード</p>
<ul>
<li><code>z.ai/*</code> と <code>z-ai/*</code> はエイリアスとして受け入れられ、<code>zai/*</code> に正規化されます。</li>
<li><code>ZAI_API_KEY</code> が見つからない場合、 <code>zai/*</code> へのリクエストは実行時に認証エラーで失敗します。</li>
<li>例エラー: <code>プロバイダー "zai" の API キーが見つかりません。</code></li>
<li>Z.AI の一般的な API エンドポイントは <code>https://api.z.ai/api/paas/v4</code> です。 GLMコーディング
  リクエストは専用のコーディングエンドポイント <code>https://api.zai/api/coding/paas/v4</code> を使用します。
  組み込みの <code>zai</code> プロバイダはコーディングエンドポイントを使用します。 一般的な
  エンドポイントが必要な場合は、ベース URL
  をオーバーライドする <code>models.providers</code> のカスタムプロバイダを定義します (上のカスタムプロバイダセクションを参照してください)。</li>
<li>docs/configsで偽のプレースホルダを使用してください。実際のAPIキーはコミットしないでください。</li>
</ul>
<h3 id="moonshot-aikimi">Moonshot AI（Kimi）<a class="headerlink" href="#moonshot-aikimi" title="Permanent link">&para;</a></h3>
<p>Moonshot の OpenAI 互換エンドポイントを使用:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="mf">36.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="w">  </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">MOONSHOT_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-...&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-82-4" name="__codelineno-82-4" href="#__codelineno-82-4"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-82-5" name="__codelineno-82-5" href="#__codelineno-82-5"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;moonshot/kimi-k2.5&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-82-6" name="__codelineno-82-6" href="#__codelineno-82-6"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;moonshot/kimi-k2.5&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Kimi K2.5&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-82-7" name="__codelineno-82-7" href="#__codelineno-82-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-82-8" name="__codelineno-82-8" href="#__codelineno-82-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-82-9" name="__codelineno-82-9" href="#__codelineno-82-9"></a><span class="w">  </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-82-10" name="__codelineno-82-10" href="#__codelineno-82-10"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span><span class="p">,</span>
<a id="__codelineno-82-11" name="__codelineno-82-11" href="#__codelineno-82-11"></a><span class="w">    </span><span class="nv">providers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-82-12" name="__codelineno-82-12" href="#__codelineno-82-12"></a><span class="w">      </span><span class="nv">moonshot</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-82-13" name="__codelineno-82-13" href="#__codelineno-82-13"></a><span class="w">        </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.moonshot.ai/v1&quot;</span><span class="p">,</span>
<a id="__codelineno-82-14" name="__codelineno-82-14" href="#__codelineno-82-14"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${MOONSHOT_API_KEY}&quot;</span><span class="p">,</span>
<a id="__codelineno-82-15" name="__codelineno-82-15" href="#__codelineno-82-15"></a><span class="w">        </span><span class="nv">api</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai-completions&quot;</span><span class="p">,</span>
<a id="__codelineno-82-16" name="__codelineno-82-16" href="#__codelineno-82-16"></a><span class="w">        </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-82-17" name="__codelineno-82-17" href="#__codelineno-82-17"></a><span class="w">          </span><span class="p">{</span>
<a id="__codelineno-82-18" name="__codelineno-82-18" href="#__codelineno-82-18"></a><span class="w">            </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kimi-k2.5&quot;</span><span class="p">,</span>
<a id="__codelineno-82-19" name="__codelineno-82-19" href="#__codelineno-82-19"></a><span class="w">            </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Kimi K2.5&quot;</span><span class="p">,</span>
<a id="__codelineno-82-20" name="__codelineno-82-20" href="#__codelineno-82-20"></a><span class="w">            </span><span class="nv">reasoning</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-82-21" name="__codelineno-82-21" href="#__codelineno-82-21"></a><span class="w">            </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;text&quot;</span><span class="p">],</span>
<a id="__codelineno-82-22" name="__codelineno-82-22" href="#__codelineno-82-22"></a><span class="w">            </span><span class="nv">cost</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">output</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheRead</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheWrite</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-82-23" name="__codelineno-82-23" href="#__codelineno-82-23"></a><span class="w">            </span><span class="nv">contextWindow</span><span class="p">:</span><span class="w"> </span><span class="mf">256000</span><span class="p">,</span>
<a id="__codelineno-82-24" name="__codelineno-82-24" href="#__codelineno-82-24"></a><span class="w">            </span><span class="nv">maxTokens</span><span class="p">:</span><span class="w"> </span><span class="mf">8192</span><span class="p">,</span>
<a id="__codelineno-82-25" name="__codelineno-82-25" href="#__codelineno-82-25"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-82-26" name="__codelineno-82-26" href="#__codelineno-82-26"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-82-27" name="__codelineno-82-27" href="#__codelineno-82-27"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-82-28" name="__codelineno-82-28" href="#__codelineno-82-28"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-82-29" name="__codelineno-82-29" href="#__codelineno-82-29"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-82-30" name="__codelineno-82-30" href="#__codelineno-82-30"></a><span class="p">}</span>
</code></pre></div>
<p>配列は置換</p>
<ul>
<li>環境で <code>MOONSHOT_API_KEY</code> を設定するか、<code>openclawオン --auth-choice moonshot-api-key</code> を使用します。</li>
<li>Model ref: <code>moonshot/kimi-k2.5</code></li>
<li>中国のエンドポイントのいずれか:</li>
<li><code>openclawオン --auth-choice moonshot-api-key-cn</code> を実行します (ウィザードは<code>https://api.moonshot.cn/v1</code>を設定します)。</li>
<li><code>models.providers.moonshot</code> に <code>baseUrl: "https://api.moonshot.cn/v1"</code> を手動で設定します。</li>
</ul>
<h3 id="kimi-coding">Kimi Coding<a class="headerlink" href="#kimi-coding" title="Permanent link">&para;</a></h3>
<p>Moonshot AIのキミコーディングエンドポイントを使用（アントロピー互換、組み込みプロバイダー）：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="p">{</span>
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="w">  </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">KIMI_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-...&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kimi-coding/k2p5&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;kimi-coding/k2p5&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Kimi K2.5&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a><span class="p">}</span>
</code></pre></div>
<p>注記：</p>
<ul>
<li>環境で <code>KIMI_API_KEY</code> を設定するか、<code>openclawオン --auth-choice kimi-code-api-key</code> を使用します。</li>
<li>Model ref: <code>kimi-coding/k2p5</code></li>
</ul>
<h3 id="anthropic">合成（Anthropic互換）<a class="headerlink" href="#anthropic" title="Permanent link">&para;</a></h3>
<p>SyntheticのAnthropic互換エンドポイントを使用してください:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="p">{</span>
<a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a><span class="w">  </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">SYNTHETIC_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-...&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-84-3" name="__codelineno-84-3" href="#__codelineno-84-3"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-4" name="__codelineno-84-4" href="#__codelineno-84-4"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-5" name="__codelineno-84-5" href="#__codelineno-84-5"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;synthetic/hf:MiniMaxAI/MiniMax-M2.1&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-84-6" name="__codelineno-84-6" href="#__codelineno-84-6"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">&quot;synthetic/hf:MiniMaxAI/MiniMax-M2.1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;MiniMax M2.1&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-84-7" name="__codelineno-84-7" href="#__codelineno-84-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-8" name="__codelineno-84-8" href="#__codelineno-84-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-84-9" name="__codelineno-84-9" href="#__codelineno-84-9"></a><span class="w">  </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-10" name="__codelineno-84-10" href="#__codelineno-84-10"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span><span class="p">,</span>
<a id="__codelineno-84-11" name="__codelineno-84-11" href="#__codelineno-84-11"></a><span class="w">    </span><span class="nv">providers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-12" name="__codelineno-84-12" href="#__codelineno-84-12"></a><span class="w">      </span><span class="nv">synthetic</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-84-13" name="__codelineno-84-13" href="#__codelineno-84-13"></a><span class="w">        </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.synthetic.new/anthropic&quot;</span><span class="p">,</span>
<a id="__codelineno-84-14" name="__codelineno-84-14" href="#__codelineno-84-14"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SYNTHETIC_API_KEY}&quot;</span><span class="p">,</span>
<a id="__codelineno-84-15" name="__codelineno-84-15" href="#__codelineno-84-15"></a><span class="w">        </span><span class="nv">api</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anthropic-messages&quot;</span><span class="p">,</span>
<a id="__codelineno-84-16" name="__codelineno-84-16" href="#__codelineno-84-16"></a><span class="w">        </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-84-17" name="__codelineno-84-17" href="#__codelineno-84-17"></a><span class="w">          </span><span class="p">{</span>
<a id="__codelineno-84-18" name="__codelineno-84-18" href="#__codelineno-84-18"></a><span class="w">            </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hf:MiniMaxAI/MiniMax-M2.1&quot;</span><span class="p">,</span>
<a id="__codelineno-84-19" name="__codelineno-84-19" href="#__codelineno-84-19"></a><span class="w">            </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;MiniMax M2.1&quot;</span><span class="p">,</span>
<a id="__codelineno-84-20" name="__codelineno-84-20" href="#__codelineno-84-20"></a><span class="w">            </span><span class="nv">reasoning</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-84-21" name="__codelineno-84-21" href="#__codelineno-84-21"></a><span class="w">            </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;text&quot;</span><span class="p">],</span>
<a id="__codelineno-84-22" name="__codelineno-84-22" href="#__codelineno-84-22"></a><span class="w">            </span><span class="nv">cost</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">output</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheRead</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheWrite</span><span class="p">:</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-84-23" name="__codelineno-84-23" href="#__codelineno-84-23"></a><span class="w">            </span><span class="nv">contextWindow</span><span class="p">:</span><span class="w"> </span><span class="mf">192000</span><span class="p">,</span>
<a id="__codelineno-84-24" name="__codelineno-84-24" href="#__codelineno-84-24"></a><span class="w">            </span><span class="nv">maxTokens</span><span class="p">:</span><span class="w"> </span><span class="mf">65536</span><span class="p">,</span>
<a id="__codelineno-84-25" name="__codelineno-84-25" href="#__codelineno-84-25"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-84-26" name="__codelineno-84-26" href="#__codelineno-84-26"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-84-27" name="__codelineno-84-27" href="#__codelineno-84-27"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-84-28" name="__codelineno-84-28" href="#__codelineno-84-28"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-84-29" name="__codelineno-84-29" href="#__codelineno-84-29"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-84-30" name="__codelineno-84-30" href="#__codelineno-84-30"></a><span class="p">}</span>
</code></pre></div>
<p>gpt-5.2-chat-latest</p>
<ul>
<li><code>SYNTHETIC_API_KEY</code> を設定するか、 <code>openclawオン --auth-choice synthetic-api-key</code> を使用してください。</li>
<li>Model ref: <code>synthetic/hf:MiniMaxAI/MiniMax-M2.1</code></li>
<li>Anthropic クライアントが追加するため、Base URL は <code>/v1</code> を省略してください。</li>
</ul>
<h3 id="lm">ローカルモデル (LMスタジオ) — 推奨設定<a class="headerlink" href="#lm" title="Permanent link">&para;</a></h3>
<p>現在のローカルガイダンスについては、<a href="../../gateway/local-models">/gateway/local-models</a> を参照してください。 TL;DR: LM Studio Responses API を介して MiniMax M2.1 を深刻なハードウェア上で実行し、ホストされたモデルをフォールバックのためにマージし続けます。</p>
<h3 id="minimax-m21">MiniMax M2.1<a class="headerlink" href="#minimax-m21" title="Permanent link">&para;</a></h3>
<p>LMスタジオなしでMiniMax M2.1を直接使用:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="mf">37.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="w">  </span><span class="nv">agent</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="w">    </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;minimax/MiniMax-M2.1&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="w">    </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a><span class="w">      </span><span class="nv">&quot;anthropic/claude-opus-4-6&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Opus&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a><span class="w">      </span><span class="nv">&quot;minimax/MiniMax-M2.1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Minimax&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a><span class="w">  </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span><span class="p">,</span>
<a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a><span class="w">    </span><span class="nv">providers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a><span class="w">      </span><span class="nv">minimax</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-85-13" name="__codelineno-85-13" href="#__codelineno-85-13"></a><span class="w">        </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.minimax.io/anthropic&quot;</span><span class="p">,</span>
<a id="__codelineno-85-14" name="__codelineno-85-14" href="#__codelineno-85-14"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${MINIMAX_API_KEY}&quot;</span><span class="p">,</span>
<a id="__codelineno-85-15" name="__codelineno-85-15" href="#__codelineno-85-15"></a><span class="w">        </span><span class="nv">api</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anthropic-messages&quot;</span><span class="p">,</span>
<a id="__codelineno-85-16" name="__codelineno-85-16" href="#__codelineno-85-16"></a><span class="w">        </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-85-17" name="__codelineno-85-17" href="#__codelineno-85-17"></a><span class="w">          </span><span class="p">{</span>
<a id="__codelineno-85-18" name="__codelineno-85-18" href="#__codelineno-85-18"></a><span class="w">            </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;MiniMax-M2.1&quot;</span><span class="p">,</span>
<a id="__codelineno-85-19" name="__codelineno-85-19" href="#__codelineno-85-19"></a><span class="w">            </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;MiniMax M2.1&quot;</span><span class="p">,</span>
<a id="__codelineno-85-20" name="__codelineno-85-20" href="#__codelineno-85-20"></a><span class="w">            </span><span class="nv">reasoning</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="p">,</span>
<a id="__codelineno-85-21" name="__codelineno-85-21" href="#__codelineno-85-21"></a><span class="w">            </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;text&quot;</span><span class="p">],</span>
<a id="__codelineno-85-22" name="__codelineno-85-22" href="#__codelineno-85-22"></a><span class="w">            </span><span class="c1">// Pricing: update in models.json if you need exact cost tracking.</span>
<a id="__codelineno-85-23" name="__codelineno-85-23" href="#__codelineno-85-23"></a><span class="w">            </span><span class="nv">cost</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">input</span><span class="p">:</span><span class="w"> </span><span class="mf">15</span><span class="p">,</span><span class="w"> </span><span class="nv">output</span><span class="p">:</span><span class="w"> </span><span class="mf">60</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheRead</span><span class="p">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nv">cacheWrite</span><span class="p">:</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-85-24" name="__codelineno-85-24" href="#__codelineno-85-24"></a><span class="w">            </span><span class="nv">contextWindow</span><span class="p">:</span><span class="w"> </span><span class="mf">200000</span><span class="p">,</span>
<a id="__codelineno-85-25" name="__codelineno-85-25" href="#__codelineno-85-25"></a><span class="w">            </span><span class="nv">maxTokens</span><span class="p">:</span><span class="w"> </span><span class="mf">8192</span><span class="p">,</span>
<a id="__codelineno-85-26" name="__codelineno-85-26" href="#__codelineno-85-26"></a><span class="w">          </span><span class="p">},</span>
<a id="__codelineno-85-27" name="__codelineno-85-27" href="#__codelineno-85-27"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-85-28" name="__codelineno-85-28" href="#__codelineno-85-28"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-85-29" name="__codelineno-85-29" href="#__codelineno-85-29"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-85-30" name="__codelineno-85-30" href="#__codelineno-85-30"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-85-31" name="__codelineno-85-31" href="#__codelineno-85-31"></a><span class="p">}</span>
</code></pre></div>
<p>上書き：</p>
<ul>
<li><code>MINIMAX_API_KEY</code>環境変数を設定するか、<code>openclawオン --auth-choice minimax-api</code>を使用してください。</li>
<li>利用可能なモデル: <code>MiniMax-M2.1</code> (デフォルト)。</li>
<li>正確なコストトラッキングが必要な場合は、 <code>models.json</code> で価格を更新してください。</li>
</ul>
<h3 id="cerebras-glm-46-47">Cerebras (GLM 4.6 / 4.7)<a class="headerlink" href="#cerebras-glm-46-47" title="Permanent link">&para;</a></h3>
<p>OpenAI対応エンドポイント経由でCerebraを使用:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="mf">38.</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a><span class="w">  </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">CEREBRAS_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-...&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a><span class="w">  </span><span class="nv">agents</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a><span class="w">    </span><span class="nv">defaults</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a><span class="w">        </span><span class="nv">primary</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cerebras/zai-glm-4.7&quot;</span><span class="p">,</span>
<a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a><span class="w">        </span><span class="nv">fallbacks</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;cerebras/zai-glm-4.6&quot;</span><span class="p">],</span>
<a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a><span class="w">      </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a><span class="w">        </span><span class="nv">&quot;cerebras/zai-glm-4.7&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GLM 4.7 (Cerebras)&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a><span class="w">        </span><span class="nv">&quot;cerebras/zai-glm-4.6&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GLM 4.6 (Cerebras)&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-86-13" name="__codelineno-86-13" href="#__codelineno-86-13"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-86-14" name="__codelineno-86-14" href="#__codelineno-86-14"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-86-15" name="__codelineno-86-15" href="#__codelineno-86-15"></a><span class="w">  </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-16" name="__codelineno-86-16" href="#__codelineno-86-16"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;merge&quot;</span><span class="p">,</span>
<a id="__codelineno-86-17" name="__codelineno-86-17" href="#__codelineno-86-17"></a><span class="w">    </span><span class="nv">providers</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-18" name="__codelineno-86-18" href="#__codelineno-86-18"></a><span class="w">      </span><span class="nv">cerebras</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-86-19" name="__codelineno-86-19" href="#__codelineno-86-19"></a><span class="w">        </span><span class="nv">baseUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.cerebras.ai/v1&quot;</span><span class="p">,</span>
<a id="__codelineno-86-20" name="__codelineno-86-20" href="#__codelineno-86-20"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${CEREBRAS_API_KEY}&quot;</span><span class="p">,</span>
<a id="__codelineno-86-21" name="__codelineno-86-21" href="#__codelineno-86-21"></a><span class="w">        </span><span class="nv">api</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai-completions&quot;</span><span class="p">,</span>
<a id="__codelineno-86-22" name="__codelineno-86-22" href="#__codelineno-86-22"></a><span class="w">        </span><span class="nv">models</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-86-23" name="__codelineno-86-23" href="#__codelineno-86-23"></a><span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zai-glm-4.7&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GLM 4.7 (Cerebras)&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-86-24" name="__codelineno-86-24" href="#__codelineno-86-24"></a><span class="w">          </span><span class="p">{</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;zai-glm-4.6&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GLM 4.6 (Cerebras)&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-86-25" name="__codelineno-86-25" href="#__codelineno-86-25"></a><span class="w">        </span><span class="p">],</span>
<a id="__codelineno-86-26" name="__codelineno-86-26" href="#__codelineno-86-26"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-86-27" name="__codelineno-86-27" href="#__codelineno-86-27"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-86-28" name="__codelineno-86-28" href="#__codelineno-86-28"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-86-29" name="__codelineno-86-29" href="#__codelineno-86-29"></a><span class="p">}</span>
</code></pre></div>
<p><code>config.apply</code> を使用すると、設定全体を検証・書き込みし、1 ステップで Gateway を再起動できます。<br />
再起動センチネルを書き込み、Gateway 復帰後に最後にアクティブだったセッションへ ping を送信します。</p>
<ul>
<li>Cerebrasには<code>大脳/zai-glm-4.7</code>を使用します。Z.AIダイレクトには<code>zai/glm-4.7</code>を使用します。</li>
<li>環境または config で <code>CEREBRAS_API_KEY</code> を設定します。</li>
</ul>
<p>設定内でインライン環境変数を指定することもできます。これらは、プロセス環境にキーが存在しない場合にのみ適用されます（同じく上書きしません）。</p>
<ul>
<li>サポートされているAPI: <code>openai-completions</code> 、 <code>openai-responses</code> 、 <code>anthropic-messages</code> 、
  <code>google-generative-ai</code></li>
<li>カスタム認証には、 <code>authHeader: true</code> + <code>headers</code> を使用します。</li>
<li>警告：<code>config.apply</code> は <strong>設定全体</strong> を置き換えます。<br />
  一部のキーのみを変更したい場合は、<code>config.patch</code> または <code>openclaw config set</code> を使用してください。<br />
<code>~/.openclaw/openclaw.json</code> のバックアップを保持してください。</li>
</ul>
<h3 id="_17"><code>セッション</code><a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>セッションスコープ、リセットポリシー、リセットトリガー、およびセッションストアが書き込まれる場所を制御します。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="p">{</span>
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="w">  </span><span class="nv">session</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="w">    </span><span class="nv">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;per-sender&quot;</span><span class="p">,</span>
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a><span class="w">    </span><span class="nv">dmScope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">,</span>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a><span class="w">    </span><span class="nv">identityLinks</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a><span class="w">      </span><span class="nv">alice</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;telegram:123456789&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;discord:987654321012345678&quot;</span><span class="p">],</span>
<a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a><span class="w">    </span><span class="nv">reset</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a><span class="w">      </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span><span class="p">,</span>
<a id="__codelineno-87-10" name="__codelineno-87-10" href="#__codelineno-87-10"></a><span class="w">      </span><span class="nv">atHour</span><span class="p">:</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span>
<a id="__codelineno-87-11" name="__codelineno-87-11" href="#__codelineno-87-11"></a><span class="w">      </span><span class="nv">idleMinutes</span><span class="p">:</span><span class="w"> </span><span class="mf">60</span><span class="p">,</span>
<a id="__codelineno-87-12" name="__codelineno-87-12" href="#__codelineno-87-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-87-13" name="__codelineno-87-13" href="#__codelineno-87-13"></a><span class="w">    </span><span class="nv">resetByType</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-87-14" name="__codelineno-87-14" href="#__codelineno-87-14"></a><span class="w">      </span><span class="nv">thread</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;daily&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">atHour</span><span class="p">:</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-87-15" name="__codelineno-87-15" href="#__codelineno-87-15"></a><span class="w">      </span><span class="nv">direct</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;idle&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">idleMinutes</span><span class="p">:</span><span class="w"> </span><span class="mf">240</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-87-16" name="__codelineno-87-16" href="#__codelineno-87-16"></a><span class="w">      </span><span class="nv">group</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;idle&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">idleMinutes</span><span class="p">:</span><span class="w"> </span><span class="mf">120</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-87-17" name="__codelineno-87-17" href="#__codelineno-87-17"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-87-18" name="__codelineno-87-18" href="#__codelineno-87-18"></a><span class="w">    </span><span class="nv">resetTriggers</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;/new&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/reset&quot;</span><span class="p">],</span>
<a id="__codelineno-87-19" name="__codelineno-87-19" href="#__codelineno-87-19"></a><span class="w">    </span><span class="c1">// 既定では ~/.openclaw/agents/&lt;agentId&gt;/sessions/sessions.json のエージェント単位</span>
<a id="__codelineno-87-20" name="__codelineno-87-20" href="#__codelineno-87-20"></a><span class="w">    </span><span class="c1">// {agentId} テンプレートで上書きできます:</span>
<a id="__codelineno-87-21" name="__codelineno-87-21" href="#__codelineno-87-21"></a><span class="w">    </span><span class="nv">store</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/agents/{agentId}/sessions/sessions.json&quot;</span><span class="p">,</span>
<a id="__codelineno-87-22" name="__codelineno-87-22" href="#__codelineno-87-22"></a><span class="w">    </span><span class="c1">// ダイレクトチャットは agent:&lt;agentId&gt;:&lt;mainKey&gt; に集約されます（既定: &quot;main&quot;）。</span>
<a id="__codelineno-87-23" name="__codelineno-87-23" href="#__codelineno-87-23"></a><span class="w">    </span><span class="nv">mainKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">,</span>
<a id="__codelineno-87-24" name="__codelineno-87-24" href="#__codelineno-87-24"></a><span class="w">    </span><span class="nv">agentToAgent</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-87-25" name="__codelineno-87-25" href="#__codelineno-87-25"></a><span class="w">      </span><span class="c1">// リクエスター／ターゲット間の最大ピンポン返信ターン数（0–5）。</span>
<a id="__codelineno-87-26" name="__codelineno-87-26" href="#__codelineno-87-26"></a><span class="w">      </span><span class="nv">maxPingPongTurns</span><span class="p">:</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span>
<a id="__codelineno-87-27" name="__codelineno-87-27" href="#__codelineno-87-27"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-87-28" name="__codelineno-87-28" href="#__codelineno-87-28"></a><span class="w">    </span><span class="nv">sendPolicy</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-87-29" name="__codelineno-87-29" href="#__codelineno-87-29"></a><span class="w">      </span><span class="nv">rules</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nv">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deny&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">match</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">channel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;discord&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">chatType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;group&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}],</span>
<a id="__codelineno-87-30" name="__codelineno-87-30" href="#__codelineno-87-30"></a><span class="w">      </span><span class="nv">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;allow&quot;</span><span class="p">,</span>
<a id="__codelineno-87-31" name="__codelineno-87-31" href="#__codelineno-87-31"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-87-32" name="__codelineno-87-32" href="#__codelineno-87-32"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-87-33" name="__codelineno-87-33" href="#__codelineno-87-33"></a><span class="p">}</span>
</code></pre></div>
<p>フィールド：</p>
<ul>
<li><code>mainKey</code>: 直接チャットバケットキー (デフォルト: <code>"main"</code>)。 <code>agentId</code>を変更せずにプライマリDMスレッドを「名前を変更」したい場合に便利です。</li>
<li>Sandbox note: <code>agents.defaults.sandbox.mode: "non-main"</code> はこのキーを使用してメインセッションを検出します。 <code>mainKey</code> (groups/channels) と一致しないセッションキーはすべてサンドボックス化されています。</li>
<li><code>dmScope</code>: DM セッションがグループ化される方法 (デフォルト: <code>"main"</code>)。</li>
<li><code>main</code>: すべてのDMが継続性のためのメインセッションを共有します。</li>
<li><code>per-peer</code>: チャンネル間の送信者IDでDMを分離します。</li>
<li><code>per-channel-peer</code>: チャンネルごとのDMと送信者を分離します(マルチユーザー受信ボックスに推奨)。</li>
<li><code>per-account-channel-peer</code>: アカウント+チャンネル+送信者あたりのDMを隔離します (マルチアカウント受信ボックスに推奨)。</li>
<li>セキュアDMモード(推奨): <code>session.dmScope: "per-channel-peer"</code> を設定します。複数の人がBot（共有インボックス、マルチ個人許可リスト、または<code>dmPolicy: "open"</code>）をDMできるようにします。</li>
<li><code>identityLinks</code>: <code>per-peer</code> 、 <code>per-channel-peer</code> 、 <code>per-channel-peer</code> 、 <code>per-account-channel-peer</code> を使用すると、同じ人がチャンネル間でDMセッションを共有するようにします。</li>
<li>例: <code>alice: ["telegram:123456789", "discord:987654321012345678"]</code> 。</li>
<li><code>reset</code>: primary reset policy ゲートウェイホストのローカル時間午前4時に、デフォルトでは毎日リセットされます。</li>
<li><code>mode</code>: <code>daily</code> または <code>idle</code> (デフォルト: <code>reset</code> が存在する場合は<code>daily</code> )。</li>
<li><code>atHour</code>: 毎日のリセット境界の ローカル時間 (0-23) 。</li>
<li><code>idleMinutes</code>: アイドルウィンドウを分単位でスライドする 毎日+アイドルが設定されている場合、いずれかの方が最初の勝利に失効します。</li>
<li><code>resetByType</code>: <code>direct</code>、<code>group</code>、<code>thread</code> ごとのセッション単位の上書き。 レガシーの <code>dm</code> キーは <code>direct</code> のエイリアスとして受け付けられます。</li>
<li>レガシーの <code>session.idleMinutes</code> を<code>reset</code>/<code>resetByType</code>を設定しない場合、後方互換性のためにOpenClawはアイドルのみのモードに留まります。</li>
<li><code>heartbeatIdleMinutes</code>: ハートビートチェックのアイドルオーバーライドオプション（有効にするとデイリーリセットが適用されます）。</li>
<li><code>agentToAgent.maxPingPongTurns</code>: requester/target (0–5, default 5) の間で最大応答が返されます。</li>
<li><code>sendPolicy.default</code>: ルールが一致しない場合、<code>allow</code> または <code>deny</code> フォールバック。</li>
<li><code>sendPolicy.rules[]</code>: <code>channel</code>, <code>chatType</code> (<code>direct|group|room</code>), or <code>keyPrefix</code> (例: <code>cron:</code>). 最初の拒否が勝利します; そうでなければ許可します。</li>
</ul>
<h3 id="skills-skillsconfig"><code>skills</code> (skillsconfig)<a class="headerlink" href="#skills-skillsconfig" title="Permanent link">&para;</a></h3>
<ol>
<li>バンドルされた許可リスト、インストール設定、追加のスキルフォルダー、およびスキルごとの上書きを制御します。 <strong>バンドル</strong>スキルと<code>~/.openclaw/skills</code>に適用されます（ワークスペーススキル
    は名前の競合で勝利します）。</li>
</ol>
<p>フィールド：</p>
<ul>
<li><code>allowBundled</code>：<strong>同梱</strong> skills のみを対象とした任意の許可リスト。設定されている場合、リスト内の同梱 skills のみが有効になります（マネージド／ワークスペース skills には影響しません）。 設定されている場合、
  バンドルされたスキルのみが対象となります(管理スキル/ワークスペーススキルは影響を受けません)。</li>
<li><code>load.extraDirs</code>: スキャン対象とする追加の Skill ディレクトリ（優先度は最も低い）。</li>
<li><code>install.preferBrew</code>: 利用可能な場合に brew インストーラーを優先します（デフォルト: true）。</li>
<li><code>install.nodeManager</code>: node installer preference(<code>npm</code> | <code>pnpm</code> | <code>yarn</code>, default: npm).</li>
<li><code>entries.&lt;skillKey&gt;</code>: スキルごとの設定が上書きされます。</li>
</ul>
<p>Skill ごとのフィールド:</p>
<ul>
<li><code>enabled</code>: <code>false</code> を設定すると、同梱／インストール済みであっても Skill を無効化します。</li>
<li><code>env</code>: エージェント実行時に注入される環境変数（未設定の場合のみ）。</li>
<li><code>apiKey</code>: プライマリenvを宣言するスキルのオプションの利便性（例: <code>nano-banana-pro</code> → <code>GEMINI_API_KEY</code>）。</li>
</ul>
<p>例：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="p">{</span>
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="w">  </span><span class="nv">skills</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="w">    </span><span class="nv">allowBundled</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;gemini&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;peekaboo&quot;</span><span class="p">],</span>
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a><span class="w">    </span><span class="nv">load</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a><span class="w">      </span><span class="nv">extraDirs</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;~/Projects/agent-scripts/skills&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~/Projects/oss/some-skill-pack/skills&quot;</span><span class="p">],</span>
<a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a><span class="w">    </span><span class="nv">install</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a><span class="w">      </span><span class="nv">preferBrew</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a><span class="w">      </span><span class="nv">nodeManager</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;npm&quot;</span><span class="p">,</span>
<a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a><span class="w">    </span><span class="nv">entries</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-88-12" name="__codelineno-88-12" href="#__codelineno-88-12"></a><span class="w">      </span><span class="nv">&quot;nano-banana-pro&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-88-13" name="__codelineno-88-13" href="#__codelineno-88-13"></a><span class="w">        </span><span class="nv">apiKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GEMINI_KEY_HERE&quot;</span><span class="p">,</span>
<a id="__codelineno-88-14" name="__codelineno-88-14" href="#__codelineno-88-14"></a><span class="w">        </span><span class="nv">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-88-15" name="__codelineno-88-15" href="#__codelineno-88-15"></a><span class="w">          </span><span class="nv">GEMINI_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GEMINI_KEY_HERE&quot;</span><span class="p">,</span>
<a id="__codelineno-88-16" name="__codelineno-88-16" href="#__codelineno-88-16"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-88-17" name="__codelineno-88-17" href="#__codelineno-88-17"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-88-18" name="__codelineno-88-18" href="#__codelineno-88-18"></a><span class="w">      </span><span class="nv">peekaboo</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-88-19" name="__codelineno-88-19" href="#__codelineno-88-19"></a><span class="w">      </span><span class="nv">sag</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-88-20" name="__codelineno-88-20" href="#__codelineno-88-20"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-88-21" name="__codelineno-88-21" href="#__codelineno-88-21"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-88-22" name="__codelineno-88-22" href="#__codelineno-88-22"></a><span class="p">}</span>
</code></pre></div>
<h3 id="plugins-extensions"><code>plugins</code> (extensions)<a class="headerlink" href="#plugins-extensions" title="Permanent link">&para;</a></h3>
<p>プラグインの検出、許可/拒否、およびプラグインごとの設定を制御します。 プラグインは <code>~/.openclaw/extensions</code> から
読み込まれます。<code>&lt;workspace&gt;/.openclaw/extensions</code> に加えて、
<code>plugins.load.paths</code> エントリがあります。 <strong>設定の変更にはゲートウェイの再起動が必要です。</strong>
完全に使用するには <a href="../../tools/plugin">/plugin</a> を参照してください。</p>
<p>フィールド：</p>
<ul>
<li><code>enabled</code>: プラグインの読み込みをマスター切り替えます (デフォルト: true)。</li>
<li><code>allow</code>: オプションのプラグインIDのallowlist; 設定された場合、リストされたプラグインのみがロードされます。</li>
<li><code>deny</code>: オプションのプラグインIDのdenylist(denylist)です。</li>
<li><code>load.paths</code>: 追加のプラグインファイルまたはロードするディレクトリ (absolute または <code>~</code>) 。</li>
<li><code>entries.&lt;pluginId&gt;</code>: プラグインごとのオーバーライド。</li>
<li><code>enabled</code>: <code>false</code>を無効にします。</li>
<li><code>config</code>: プラグイン固有の設定オブジェクト (指定された場合、プラグインによって検証されます)。</li>
</ul>
<p>環境変数 + <code>.env</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="p">{</span>
<a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a><span class="w">  </span><span class="nv">plugins</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="w">    </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-89-4" name="__codelineno-89-4" href="#__codelineno-89-4"></a><span class="w">    </span><span class="nv">allow</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;voice-call&quot;</span><span class="p">],</span>
<a id="__codelineno-89-5" name="__codelineno-89-5" href="#__codelineno-89-5"></a><span class="w">    </span><span class="nv">load</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-6" name="__codelineno-89-6" href="#__codelineno-89-6"></a><span class="w">      </span><span class="nv">paths</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;~/Projects/oss/voice-call-extension&quot;</span><span class="p">],</span>
<a id="__codelineno-89-7" name="__codelineno-89-7" href="#__codelineno-89-7"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-89-8" name="__codelineno-89-8" href="#__codelineno-89-8"></a><span class="w">    </span><span class="nv">entries</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-9" name="__codelineno-89-9" href="#__codelineno-89-9"></a><span class="w">      </span><span class="nv">&quot;voice-call&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-10" name="__codelineno-89-10" href="#__codelineno-89-10"></a><span class="w">        </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-89-11" name="__codelineno-89-11" href="#__codelineno-89-11"></a><span class="w">        </span><span class="nv">config</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-89-12" name="__codelineno-89-12" href="#__codelineno-89-12"></a><span class="w">          </span><span class="nv">provider</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;twilio&quot;</span><span class="p">,</span>
<a id="__codelineno-89-13" name="__codelineno-89-13" href="#__codelineno-89-13"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-89-14" name="__codelineno-89-14" href="#__codelineno-89-14"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-89-15" name="__codelineno-89-15" href="#__codelineno-89-15"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-89-16" name="__codelineno-89-16" href="#__codelineno-89-16"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-89-17" name="__codelineno-89-17" href="#__codelineno-89-17"></a><span class="p">}</span>
</code></pre></div>
<h3 id="browser-openclaw-managed-browser"><code>browser</code> (openclaw-managed browser)<a class="headerlink" href="#browser-openclaw-managed-browser" title="Permanent link">&para;</a></h3>
<p>OpenClawはオープンクローのための<strong>専用の、分離された</strong> Chrome/Brave/Edge/Chromiumインスタンスを開始し、小さなループバック制御サービスを公開することができます。
プロファイルは、<code>profiles（プロファイル）を介して**リモート** Chromiumベースのブラウザを指すことができます。&lt;name&gt;.cdpUrl</code>。 リモート
プロファイルはアタッチのみのプロファイルです（開始/停止/リセットは無効です）。</p>
<p><code>browser.cdpUrl</code> は、レガシー単一プロファイルの設定で、<code>cdpPort</code>のみを設定するプロファイルのベース
スキーム/ホストとして残ります。</p>
<p>既定：</p>
<ul>
<li>有効: <code>true</code></li>
<li>evaluateEnabled: <code>true</code> (<code>false</code>を設定すると<code>act:evaluate</code>と<code>wait --fn</code>)</li>
<li>制御サービス: loopback only (<code>gateway.port</code>から派生したポート, デフォルト <code>18791</code>)</li>
<li>CDP URL: <code>http://127.0.0.1:18792</code> (制御サービス + 1、レガシーシングルプロファイル)</li>
<li>profile color: <code>#FF4500</code> (lobster-orange)</li>
<li>注意: 制御サーバは実行中のゲートウェイ (OpenClaw.app menubar、または <code>openclawゲートウェイ</code>) によって起動されます。</li>
<li>自動検出: Chromium ベースの場合は既定のブラウザ; そうでない場合は Chrome → Brave → Edge → Chromium → Chrome Canary 。</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="p">{</span>
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="w">  </span><span class="nv">browser</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="w">    </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a><span class="w">    </span><span class="nv">evaluateEnabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="w">    </span><span class="c1">// cdpUrl: &quot;http://127.0.0.1:18792&quot;, // legacy single-profile override</span>
<a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a><span class="w">    </span><span class="nv">defaultProfile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;chrome&quot;</span><span class="p">,</span>
<a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a><span class="w">    </span><span class="nv">profiles</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a><span class="w">      </span><span class="nv">openclaw</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">cdpPort</span><span class="p">:</span><span class="w"> </span><span class="mf">18800</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#FF4500&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a><span class="w">      </span><span class="nv">work</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">cdpPort</span><span class="p">:</span><span class="w"> </span><span class="mf">18801</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#0066CC&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a><span class="w">      </span><span class="nv">remote</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">cdpUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://10.0.0.42:9222&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#00AA00&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a><span class="w">    </span><span class="nv">color</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#FF4500&quot;</span><span class="p">,</span>
<a id="__codelineno-90-13" name="__codelineno-90-13" href="#__codelineno-90-13"></a><span class="w">    </span><span class="c1">// Advanced:</span>
<a id="__codelineno-90-14" name="__codelineno-90-14" href="#__codelineno-90-14"></a><span class="w">    </span><span class="c1">// headless: false,</span>
<a id="__codelineno-90-15" name="__codelineno-90-15" href="#__codelineno-90-15"></a><span class="w">    </span><span class="c1">// noSandbox: false,</span>
<a id="__codelineno-90-16" name="__codelineno-90-16" href="#__codelineno-90-16"></a><span class="w">    </span><span class="c1">// executablePath: &quot;/Applications/Brave Browser.app/Contents/MacOS/Brave Browser&quot;,</span>
<a id="__codelineno-90-17" name="__codelineno-90-17" href="#__codelineno-90-17"></a><span class="w">    </span><span class="c1">// attachOnly: false, // set true when tunneling a remote CDP to localhost</span>
<a id="__codelineno-90-18" name="__codelineno-90-18" href="#__codelineno-90-18"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-90-19" name="__codelineno-90-19" href="#__codelineno-90-19"></a><span class="p">}</span>
</code></pre></div>
<h3 id="ui_1"><code>ui</code>（外観）<a class="headerlink" href="#ui_1" title="Permanent link">&para;</a></h3>
<p>UIクロムのネイティブアプリで使用される任意のアクセントカラー(例:トークモードバブルの色)。</p>
<p>未設定の場合、クライアントはミュートされたライトブルーに戻ります。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="p">{</span>
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a><span class="w">  </span><span class="nv">ui</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a><span class="w">    </span><span class="nv">seamColor</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#FF4500&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// hex (RRGGBB or #RRGGBB)</span>
<a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a><span class="w">    </span><span class="c1">// Optional: Control UI assistant identity override.</span>
<a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a><span class="w">    </span><span class="c1">// If unset, the Control UI uses the active agent identity (config or IDENTITY.md).</span>
<a id="__codelineno-91-6" name="__codelineno-91-6" href="#__codelineno-91-6"></a><span class="w">    </span><span class="nv">assistant</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-91-7" name="__codelineno-91-7" href="#__codelineno-91-7"></a><span class="w">      </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;OpenClaw&quot;</span><span class="p">,</span>
<a id="__codelineno-91-8" name="__codelineno-91-8" href="#__codelineno-91-8"></a><span class="w">      </span><span class="nv">avatar</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CB&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// emoji, short text, or image URL/data URI</span>
<a id="__codelineno-91-9" name="__codelineno-91-9" href="#__codelineno-91-9"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-91-10" name="__codelineno-91-10" href="#__codelineno-91-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-91-11" name="__codelineno-91-11" href="#__codelineno-91-11"></a><span class="p">}</span>
</code></pre></div>
<h3 id="gateway-bind"><code>gateway</code> (ゲートウェイサーバーモード + bind)<a class="headerlink" href="#gateway-bind" title="Permanent link">&para;</a></h3>
<p>このマシンがGatewayを実行するかどうかを明示的に宣言するには、 <code>gateway.mode</code> を使用します。</p>
<p>既定：</p>
<ul>
<li>モード: <strong>unset</strong> (「自動起動しない」として扱われます)</li>
<li>bind: <code>loopback</code></li>
<li>port: <code>18789</code> (WS + HTTPの単一ポート)</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="p">{</span>
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="w">  </span><span class="nv">gateway</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;local&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// or &quot;remote&quot;</span>
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="w">    </span><span class="nv">port</span><span class="p">:</span><span class="w"> </span><span class="mf">18789</span><span class="p">,</span><span class="w"> </span><span class="c1">// WS + HTTP multiplex</span>
<a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="w">    </span><span class="nv">bind</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;loopback&quot;</span><span class="p">,</span>
<a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a><span class="w">    </span><span class="c1">// controlUi: { enabled: true, basePath: &quot;/openclaw&quot; }</span>
<a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a><span class="w">    </span><span class="c1">// auth: { mode: &quot;token&quot;, token: &quot;your-token&quot; } // token gates WS + Control UI access</span>
<a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a><span class="w">    </span><span class="c1">// tailscale: { mode: &quot;off&quot; | &quot;serve&quot; | &quot;funnel&quot; }</span>
<a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a><span class="p">}</span>
</code></pre></div>
<p>UIベースパスの制御:</p>
<ul>
<li><code>gateway.controlUi.basePath</code> は、Control UI が提供されるURLプレフィックスを設定します。</li>
<li>例: <code>"/ui"</code>, <code>"/openclaw"</code>, <code>"/apps/openclaw"</code>.</li>
<li>デフォルト: root (<code>/</code>) (変更なし)。</li>
<li><code>gateway.controlUi.root</code> は Control UI アセットのファイルシステムルートを設定します (デフォルト: <code>dist/control-ui</code>)。</li>
<li><code>gateway.controlUi.allowInsecureAuth</code> は、
  デバイスIDが省略されたとき(通常は HTTP 上)に制御UIのトークン専用の認証を許可します。 デフォルト: <code>false</code> HTTPS
  (Tailscale Serve) または <code>127.0.0.1</code> を優先します。</li>
<li><code>gateway.controlUi.dangerouslyDisableDeviceAuth</code> は
  Control UI (トークン/パスワードのみ) のデバイス識別チェックを無効にします。 デフォルト: <code>false</code> ブレイクグラスのみ</li>
</ul>
<p>関連ドキュメント：</p>
<ul>
<li><a href="../../web/control-ui">コントロール UI</a></li>
<li><a href="../../tools/web">Web overview</a></li>
<li><a href="../../gateway/tailscale">Tailscale</a></li>
<li><a href="../../gateway/remote">リモートアクセス</a></li>
</ul>
<p>信頼されたプロキシ:</p>
<ul>
<li><code>gateway.trustedProxies</code>: ゲートウェイの前で TLS を終了させるリバースプロキシ IP のリスト。</li>
<li>これらのIPのいずれかから接続される場合 OpenClawは<code>x-forwarded-for</code>(または<code>x-real-ip</code>)を使用して、ローカルペアリングチェックとHTTP認証/ローカルチェックのクライアントIPを決定します。</li>
<li>プロキシのみを完全に制御し、<code>x-forwarded-for</code> の着信を<strong>上書き</strong>してください。</li>
</ul>
<p>環境変数での指定：</p>
<ul>
<li><code>gateway.mode</code> が <code>local</code> に設定されていない限り、 <code>openclawゲートウェイ</code> は起動を拒否します(またはオーバーライドフラグを渡します)。</li>
<li><code>gateway.port</code> は、WebSocket + HTTP (制御UI、フック、A2UI)に使用される単一の多重化ポートを制御します。</li>
<li>OpenAI チャット完了エンドポイント: <strong>デフォルトで無効</strong>; <code>gateway.http.endpoints.chatCompletions.enabled: true</code> で有効にします。</li>
<li>前提: <code>--port</code> &gt; <code>OPENCLAW_GATEWAY_PORT</code> &gt; <code>gateway.port</code> &gt; デフォルトの <code>18789</code> 。</li>
<li>ゲートウェイ認証はデフォルトで必要です(token/password または Tailscale Serve ID)。 非ループバックバインディングには共有トークン/パスワードが必要です。</li>
<li>オンボーディング ウィザードは、(ループバック時でも) デフォルトでゲートウェイ トークンを生成します。</li>
<li><code>gateway.remote.token</code>は、リモートCLI呼び出しに対してのみ**です。ローカルゲートウェイ認証を有効にしません。 <code>gateway.token</code> は無視されます。</li>
</ul>
<p>認証とテールスケール:</p>
<ul>
<li><code>gateway.auth.mode</code> はハンドシェイク要件 (<code>token</code> または <code>password</code>) を設定します。 未設定の場合、トークン認証は仮定されます。</li>
<li><code>gateway.auth.token</code> にはトークン認証用の共有トークンが格納されています (CLIによって同じマシン上で使用されます)。</li>
<li><code>gateway.auth.mode</code> が設定されている場合は、そのメソッドのみが受け付けられます (オプションの Tailscale ヘッダーを加えてください)。</li>
<li><code>gateway.auth.password</code> はここに設定するか、 <code>OPENCLAW_GATEWAY_PASSWORD</code> （推奨） を介して設定できます。</li>
<li><code>gateway.auth.allowTailscale</code> は、リクエストがループバックに到達し、<code>x-forwarded-for</code>、<code>x-forwarded-proto</code>、<code>x-forwarded-host</code> が付与されている場合に、Tailscale Serve の ID ヘッダー（<code>tailscale-user-login</code>）を認証として満たすことを許可します。 OpenClaw
  は、
  <code>tailscale whois</code> を介して <code>x-forwarded-for</code> アドレスを解決して身元を確認します。 <code>true</code> の場合、Serve リクエストにはトークン／パスワードは不要です。明示的な資格情報を要求するには <code>false</code> に設定してください。 デフォルトは
  <code>true</code> で、<code>tailscale.mode = "serve"</code> と auth モードが <code>password</code> ではありません。</li>
<li><code>gateway.tailscale.mode: "serve"</code> は Tailscale Serve (tailnet only loopback bind) を使用します。</li>
<li><code>gateway.tailscale.mode: "funnel"</code> はダッシュボードを公開します。auth が必要です。</li>
<li><code>gateway.tailscale.resetOnExit</code> シャットダウン時にServe/Funnel設定をリセットします。</li>
</ul>
<p>リモートクライアントのデフォルト (CLI):</p>
<ul>
<li><code>gateway.remote.url</code> は、<code>gateway.mode = "remote"</code>のときにCLIコールのデフォルトのゲートウェイWebSocket URLを設定します。</li>
<li><code>gateway.remote.transport</code> はmacOSのリモートトランスポートを選択します (<code>ssh</code> デフォルト、 <code>direct</code> for ws/ws)。 <code>direct</code> の場合、 <code>gateway.remote.url</code> は <code>ws://</code> または <code>wss://</code> でなければなりません。 <code>ws://host</code> のデフォルトは <code>18789</code> です。</li>
<li><code>gateway.remote.token</code> は、リモート呼び出しのトークンを提供します (認証なしで unset のままにします)。</li>
<li><code>gateway.remote.password</code> はリモート呼び出しのパスワードを提供します (認証なしで未設定のままにしてください)。</li>
</ul>
<p>macOS アプリの動作:</p>
<ul>
<li>OpenClaw.app は <code>~/.openclaw/openclaw.json</code> を監視し、<code>gateway.mode</code> または <code>gateway.remote.url</code> が変更されたときにスイッチモードが動作します。</li>
<li><code>gateway.mode</code> が unset されていて、 <code>gateway.remote.url</code> が設定されている場合、macOS アプリはリモートモードとして扱います。</li>
<li>macOS アプリで接続モードを変更すると、<code>gateway.mode</code> (および <code>gateway.remote.url</code> + <code>gateway.remote.transport</code> )を設定ファイルに書き戻します。</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="p">{</span>
<a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a><span class="w">  </span><span class="nv">gateway</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;remote&quot;</span><span class="p">,</span>
<a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a><span class="w">    </span><span class="nv">remote</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a><span class="w">      </span><span class="nv">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ws://gateway.tailnet:18789&quot;</span><span class="p">,</span>
<a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a><span class="w">      </span><span class="nv">token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-token&quot;</span><span class="p">,</span>
<a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a><span class="w">      </span><span class="nv">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-password&quot;</span><span class="p">,</span>
<a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a><span class="p">}</span>
</code></pre></div>
<p>ダイレクト転送の例 (macOS アプリ)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="p">{</span>
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="w">  </span><span class="nv">gateway</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="w">    </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;remote&quot;</span><span class="p">,</span>
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a><span class="w">    </span><span class="nv">remote</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="w">      </span><span class="nv">transport</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;direct&quot;</span><span class="p">,</span>
<a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a><span class="w">      </span><span class="nv">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wss://gateway.example.ts.net&quot;</span><span class="p">,</span>
<a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a><span class="w">      </span><span class="nv">token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your-token&quot;</span><span class="p">,</span>
<a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-94-10" name="__codelineno-94-10" href="#__codelineno-94-10"></a><span class="p">}</span>
</code></pre></div>
<h3 id="gatewayreload-config-hot-reload"><code>gateway.reload</code> (Config hot reload)<a class="headerlink" href="#gatewayreload-config-hot-reload" title="Permanent link">&para;</a></h3>
<p>ゲートウェイは <code>~/.openclaw/openclaw.json</code> (または <code>OPENCLAW_CONFIG_PATH</code> ) を監視し、変更を自動的に適用します。</p>
<p>モード:</p>
<ul>
<li><code>hybrid</code> (default): ホット適用の安全な変更。重要な変更がある場合はゲートウェイを再起動してください。</li>
<li><code>hot</code>: ホットセーフな変更のみを適用します。再起動が必要な場合はログに記録します。</li>
<li><code>restart</code>: 設定変更時にゲートウェイを再起動します。</li>
<li><code>off</code>: ホットリロードを無効にする</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="p">{</span>
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a><span class="w">  </span><span class="nv">gateway</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a><span class="w">    </span><span class="nv">reload</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a><span class="w">      </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hybrid&quot;</span><span class="p">,</span>
<a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a><span class="w">      </span><span class="nv">debounceMs</span><span class="p">:</span><span class="w"> </span><span class="mf">300</span><span class="p">,</span>
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a><span class="p">}</span>
</code></pre></div>
<h4 id="hot-reload-matrix-files-impact">Hot reload matrix (files + impact)<a class="headerlink" href="#hot-reload-matrix-files-impact" title="Permanent link">&para;</a></h4>
<p>見られたファイル:</p>
<ul>
<li>OpenClaw は、スキーマに完全一致する設定のみを受け付けます。<br />
  未知のキー、不正な型、無効な値がある場合、安全のため Gateway（ゲートウェイ）は <strong>起動を拒否</strong> します。</li>
</ul>
<p>ホット適用 (完全なゲートウェイの再起動はありません):</p>
<ul>
<li><code>hooks</code> (webhook auth/path/mappings) + <code>hooks.gmail</code> (Gmail ウォッチャーを再起動)</li>
<li><code>browser</code> (ブラウザ制御サーバの再起動)</li>
<li><code>cron</code> (cronサービスの再起動+同時更新)</li>
<li><code>agents.defaults.heartbeat</code> (heartbeat runner restart)</li>
<li><code>web</code> (WhatsApp Web チャンネル再起動)</li>
<li><code>telegram</code> 、 <code>discord</code> 、 <code>signal</code> 、 <code>imessage</code> (チャネルの再起動)</li>
<li><code>agent</code>, <code>models</code>, <code>routing</code>, <code>messages</code>, <code>session</code>, <code>whatsapp</code>, <code>logging</code>, <code>skills</code>, <code>ui</code>, <code>talk</code>, <code>identity</code>, <code>wizard</code>(dynamic reads)</li>
</ul>
<p>完全なゲートウェイの再起動が必要です:</p>
<ul>
<li><code>gateway</code> (port/bind/auth/control UI/tailscale)</li>
<li><code>bridge</code> (レガシー)</li>
<li><code>検出</code></li>
<li><code>canvasHost</code></li>
<li><code>プラグイン</code></li>
<li>任意の不明/サポートされていない設定パス（デフォルトでは安全のために再起動）</li>
</ul>
<h3 id="_18">複数インスタンスの単離性<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>複数のゲートウェイを1つのホスト(冗長性またはレスキューボット)で実行するには、インスタンスごとの状態 + 設定を分離し、一意のポートを使用します。</p>
<ul>
<li><code>OPENCLAW_CONFIG_PATH</code> (インスタンス毎の設定)</li>
<li><code>OPENCLAW_STATE_DIR</code> (sessions/creds)</li>
<li><code>agents.defaults.workspace</code> (memores)</li>
<li><code>gateway.port</code> (インスタンス毎に一意)</li>
</ul>
<p>便利フラグ（CLI）</p>
<ul>
<li><code>openclaw --dev …</code> → <code>~/.openclaw-dev</code> を使用してください + ベースの <code>19001</code> からポート</li>
<li><code>openclaw --profile &lt;name&gt; …</code> → <code>~/.openclaw-&lt;name&gt;</code> （config/env/flags経由のポート）</li>
</ul>
<p>派生したポートマッピング(ゲートウェイ/ブラウザー/キャンバス)については、<a href="../../cli/gateway">ゲートウェイランブック</a>を参照してください。
ブラウザー/CDPポートの分離の詳細については、<a href="../../gateway/multiple-gateways">Multiple gateways</a>を参照してください。</p>
<p>openai</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="nv">OPENCLAW_CONFIG_PATH</span><span class="o">=</span>~/.openclaw/a.json<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="nv">OPENCLAW_STATE_DIR</span><span class="o">=</span>~/.openclaw-a<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>openclawゲートウェイ<span class="w"> </span>---port<span class="w"> </span><span class="m">19001</span>
</code></pre></div>
<h3 id="gateway-webhooks"><code>フック</code> (Gateway webhooks)<a class="headerlink" href="#gateway-webhooks" title="Permanent link">&para;</a></h3>
<p>ゲートウェイHTTPサーバーでシンプルなHTTPWebhookエンドポイントを有効にします。</p>
<p>既定：</p>
<ul>
<li>有効: <code>false</code></li>
<li>path: <code>/hooks</code></li>
<li>maxBodyBytes: <code>262144</code> (256 KB)</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="p">{</span>
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="w">  </span><span class="nv">hooks</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="w">    </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="w">    </span><span class="nv">token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;shared-secret&quot;</span><span class="p">,</span>
<a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a><span class="w">    </span><span class="nv">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/hooks&quot;</span><span class="p">,</span>
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a><span class="w">    </span><span class="nv">presets</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;gmail&quot;</span><span class="p">],</span>
<a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a><span class="w">    </span><span class="nv">transformsDir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/hooks&quot;</span><span class="p">,</span>
<a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a><span class="w">    </span><span class="nv">mappings</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a><span class="w">      </span><span class="p">{</span>
<a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a><span class="w">        </span><span class="nv">match</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gmail&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-97-11" name="__codelineno-97-11" href="#__codelineno-97-11"></a><span class="w">        </span><span class="nv">action</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;agent&quot;</span><span class="p">,</span>
<a id="__codelineno-97-12" name="__codelineno-97-12" href="#__codelineno-97-12"></a><span class="w">        </span><span class="nv">wakeMode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;now&quot;</span><span class="p">,</span>
<a id="__codelineno-97-13" name="__codelineno-97-13" href="#__codelineno-97-13"></a><span class="w">        </span><span class="nv">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Gmail&quot;</span><span class="p">,</span>
<a id="__codelineno-97-14" name="__codelineno-97-14" href="#__codelineno-97-14"></a><span class="w">        </span><span class="nv">sessionKey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hook:gmail:{{messages[0].id}}&quot;</span><span class="p">,</span>
<a id="__codelineno-97-15" name="__codelineno-97-15" href="#__codelineno-97-15"></a><span class="w">        </span><span class="nv">messageTemplate</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;From: {{messages[0].from}}</span><span class="se">\n</span><span class="s">Subject: {{messages[0].subject}}</span><span class="se">\n</span><span class="s">{{messages[0].snippet}}&quot;</span><span class="p">,</span>
<a id="__codelineno-97-16" name="__codelineno-97-16" href="#__codelineno-97-16"></a><span class="w">        </span><span class="nv">deliver</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-97-17" name="__codelineno-97-17" href="#__codelineno-97-17"></a><span class="w">        </span><span class="nv">channel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;last&quot;</span><span class="p">,</span>
<a id="__codelineno-97-18" name="__codelineno-97-18" href="#__codelineno-97-18"></a><span class="w">        </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openai/gpt-5.2-mini&quot;</span><span class="p">,</span>
<a id="__codelineno-97-19" name="__codelineno-97-19" href="#__codelineno-97-19"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-97-20" name="__codelineno-97-20" href="#__codelineno-97-20"></a><span class="w">    </span><span class="p">],</span>
<a id="__codelineno-97-21" name="__codelineno-97-21" href="#__codelineno-97-21"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-97-22" name="__codelineno-97-22" href="#__codelineno-97-22"></a><span class="p">}</span>
</code></pre></div>
<p>要求にはフックトークンを含める必要があります:</p>
<ul>
<li><code>Authorization: Bearer &lt;token&gt;</code> または **</li>
<li><code>x-openclaw-token: &lt;token&gt;</code></li>
</ul>
<p>エンドポイント:</p>
<ul>
<li><code>POST /hooks/wake</code> → <code>{ text, mode?: "now"|"next-heartbeat" }</code></li>
<li><code>POST /hooks/agent</code> → <code>{ message, name?, sessionKey?, wakeMode?, deliver?, channel?, to?, model?, thinking?, timeoutSeconds? }</code> を返却</li>
<li><code>POST /hooks/&lt;name&gt;</code> → <code>hooks.mappings</code> で解決</li>
</ul>
<p><code>/hooks/agent</code> は常にサマリーをメインセッションに投稿します（オプションで、 <code>wakeMode: "now"</code>を介してハートビートをトリガーすることもできます）。</p>
<p>マッピングノート:</p>
<ul>
<li><code>match.path</code> は <code>/hooks</code> の後のサブパスにマッチします。(例: <code>/hooks/gmail</code> → <code>gmail</code>)。</li>
<li><code>match.source</code> はペイロードフィールドに一致します(例: <code>{ source: "gmail" }</code>) ので、一般的な <code>/hooks/ingest</code> パスを使用できます。</li>
<li>ペイロードから読み込んだ「{{messages[0].subject}}」のようなテンプレート。</li>
<li><code>transform</code>はフックアクションを返すJS/TSモジュールを指すことができます。</li>
<li><code>deliver: true</code> は最終返信をチャンネルに送信します。<code>channel</code> のデフォルトは <code>last</code> (WhatsAppに戻ります) です。</li>
<li>事前の配信ルートがない場合は、 <code>channel</code> + <code>to</code> を明示的に設定してください(Telegram/Discord/Google Chat/Slack/Signal/iMessage/MS Teamsには必須)。</li>
<li><code>model</code> は、このフック実行のための LLM を上書きします（<code>provider/model</code> または alias; <code>agents.defaults.models</code> が設定されている場合は許可しなければなりません）。</li>
</ul>
<p>Gmailヘルパー設定 (<code>openclaw webhooks gmail setup</code> / <code>run</code>で使用):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="p">{</span>
<a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a><span class="w">  </span><span class="nv">hooks</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a><span class="w">    </span><span class="nv">gmail</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="w">      </span><span class="nv">account</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openclaw@gmail.com&quot;</span><span class="p">,</span>
<a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a><span class="w">      </span><span class="nv">topic</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;projects/&lt;project-id&gt;/topics/gog-gmail-watch&quot;</span><span class="p">,</span>
<a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a><span class="w">      </span><span class="nv">subscription</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gog-gmail-watch-push&quot;</span><span class="p">,</span>
<a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a><span class="w">      </span><span class="nv">pushToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;shared-push-token&quot;</span><span class="p">,</span>
<a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a><span class="w">      </span><span class="nv">hookUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://127.0.0.1:18789/hooks/gmail&quot;</span><span class="p">,</span>
<a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a><span class="w">      </span><span class="nv">includeBody</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a><span class="w">      </span><span class="nv">maxBytes</span><span class="p">:</span><span class="w"> </span><span class="mf">20000</span><span class="p">,</span>
<a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a><span class="w">      </span><span class="nv">renewEveryMinutes</span><span class="p">:</span><span class="w"> </span><span class="mf">720</span><span class="p">,</span>
<a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a><span class="w">      </span><span class="nv">serve</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">bind</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">port</span><span class="p">:</span><span class="w"> </span><span class="mf">8788</span><span class="p">,</span><span class="w"> </span><span class="nv">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a><span class="w">      </span><span class="nv">tailscale</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;funnel&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/gmail-pubsub&quot;</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a>
<a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a><span class="w">      </span><span class="c1">// Optional: use a cheaper model for Gmail hook processing</span>
<a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a><span class="w">      </span><span class="c1">// Falls back to agents.defaults.model.fallbacks, then primary, on auth/rate-limit/timeout</span>
<a id="__codelineno-98-17" name="__codelineno-98-17" href="#__codelineno-98-17"></a><span class="w">      </span><span class="nv">model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openrouter/meta-llama/llama-3.3-70b-instruct:free&quot;</span><span class="p">,</span>
<a id="__codelineno-98-18" name="__codelineno-98-18" href="#__codelineno-98-18"></a><span class="w">      </span><span class="c1">// Optional: default thinking level for Gmail hooks</span>
<a id="__codelineno-98-19" name="__codelineno-98-19" href="#__codelineno-98-19"></a><span class="w">      </span><span class="nv">thinking</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;off&quot;</span><span class="p">,</span>
<a id="__codelineno-98-20" name="__codelineno-98-20" href="#__codelineno-98-20"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-98-21" name="__codelineno-98-21" href="#__codelineno-98-21"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-98-22" name="__codelineno-98-22" href="#__codelineno-98-22"></a><span class="p">}</span>
</code></pre></div>
<p>Gmail フックのモデルオーバーライド:</p>
<ul>
<li><code>hooks.gmail.model</code> は Gmail フック処理に使用するモデルを指定します (デフォルトは session primary です)。</li>
<li><code>agents.defaults.models</code>から<code>provider/model</code>参照またはエイリアスを受け付けます。</li>
<li><code>agents.defaults.model.fallbacks</code>に戻り、<code>agents.defaults.model.primary</code>、auth/rate-limit/timeoutに戻ります。</li>
<li><code>agents.defaults.models</code> が設定されている場合は、許可リストにフックモデルを含めます。</li>
<li>起動時に、設定されたモデルがモデル カタログまたは許可リストにない場合に警告します。</li>
<li><code>hooks.gmail.thinking</code> はGmailフックのデフォルトの思考レベルを設定し、フックあたりの思考`で上書きされます。</li>
</ul>
<p>ゲートウェイの自動スタート:</p>
<ul>
<li><code>hooks.enabled=true</code> と <code>hooks.gmail.account</code> が設定されている場合、ゲートウェイは起動時に
  <code>gog gmail watch serve</code> を起動し、ウォッチを自動的に更新します。</li>
<li><code>OPENCLAW_SKIP_GMAIL_WATCHER=1</code> を設定すると、自動起動を無効にします。</li>
<li>Gateway と並行して別の <code>gog gmail watch serve</code> を実行しないでください。<code>listen tcp 127.0.0.1:8788: bind: address already in use</code> で失敗します。</li>
</ul>
<p>注: <code>tailscale.mode</code> が有効な場合、OpenClaw は Tailscale が <code>/gmail-pubsub</code> を正しくプロキシできるよう、<code>serve.path</code> の既定値を <code>/</code> に設定します（設定されたパスプレフィックスは削除されます）。
接頭辞付きパスを受け取るバックエンドが必要な場合は、
<code>hooks.gmail.tailscale.target</code> にフルURLを設定してください (<code>serve.path</code>を整列させます)。</p>
<h3 id="canvashost-lantailnet-canvas"><code>canvasHost</code> (LAN/tailnet Canvas ファイルサーバー + ライブリロード)<a class="headerlink" href="#canvashost-lantailnet-canvas" title="Permanent link">&para;</a></h3>
<p>GatewayはHTTP経由でHTML/CSS/JSのディレクトリを提供するため、iOS/Androidノードは単に<code>canvas.navigate</code>を使用できます。</p>
<p>デフォルトのルート: <code>~/ 。 penclaw/workspace/canvas</code><br />
デフォルトポート: <code>18793</code> (openclawブラウザのCDPポート<code>18792</code>を避けるために選択)<br />
サーバーはノードが到達できるように、<strong>ゲートウェイバインドホスト</strong> (LANまたはTailnet) 上でリッスンします。</p>
<p>サーバー:</p>
<ul>
<li><code>canvasHost.root</code> の下にあるファイルを提供します</li>
<li>送信済みの HTML に小さなライブリロードクライアントを注入します</li>
<li>ディレクトリを監視し、<code>/__openclaw__/ws</code>でWebSocketエンドポイントを再ロードします。</li>
<li>ディレクトリが空の場合はスターター<code>index.html</code>を自動的に作成します（すぐに何かが表示されるようになります）</li>
<li><code>/__openclaw__/a2ui/</code>でもA2UIを提供し、ノードに<code>canvasHostUrl</code>
  (Canvas/A2UIのノードで常に使用) として宣伝されます。</li>
</ul>
<p>ディレクトリが大きい場合、または<code>EMFILE</code>を押してください:</p>
<ul>
<li>config: <code>canvasHost: { liveReload: false }</code></li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="p">{</span>
<a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a><span class="w">  </span><span class="nv">canvasHost</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a><span class="w">    </span><span class="nv">root</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;~/.openclaw/workspace/canvas&quot;</span><span class="p">,</span>
<a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a><span class="w">    </span><span class="nv">port</span><span class="p">:</span><span class="w"> </span><span class="mf">18793</span><span class="p">,</span>
<a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a><span class="w">    </span><span class="nv">liveReload</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a><span class="p">}</span>
</code></pre></div>
<p><code>canvasHost.*</code> への変更にはゲートウェイの再起動が必要です（設定の再読み込みは再起動されます）。</p>
<p>無効化するには：</p>
<ul>
<li>config: <code>canvasHost: { enabled: false }</code></li>
<li>env: <code>OPENCLAW_SKIP_CANVAS_HOST=1</code></li>
</ul>
<h3 id="bridge-tcp"><code>bridge</code> (レガシーTCPブリッジ、削除)<a class="headerlink" href="#bridge-tcp" title="Permanent link">&para;</a></h3>
<p>現在のビルドには TCP ブリッジリスナーが含まれなくなりました。<code>bridge.*</code> 設定キーは無視されます。
ノードはゲートウェイWebSocketに接続します。 この項目は歴史的参考として残されている。</p>
<p>従来の動作:</p>
<ul>
<li>ゲートウェイはノード(iOS/Android)の簡単なTCPブリッジ(通常はポート<code>18790</code>)を公開することができます。</li>
</ul>
<p>既定：</p>
<ul>
<li>有効: <code>true</code></li>
<li>ポート: <code>18790</code></li>
<li>bind: <code>lan</code> (<code>0.0.0.0</code>にバインド)</li>
</ul>
<p>Bind modes:</p>
<ul>
<li><code>lan</code>: <code>0.0.0.0</code> (LAN/Wi-Fiやテールスケールを含む任意のインターフェースに到達可能)</li>
<li><code>tailnet</code>: マシンの Tailscale IP にのみバインドする（ウィーン <unk> Londonに推奨）</li>
<li><code>loopback</code>: <code>127.0.0.1</code> (ローカルのみ)</li>
<li><code>auto</code>: tailnet IP があれば, else <code>lan</code></li>
</ul>
<p>TLS:</p>
<ul>
<li><code>bridge.tls.enabled</code>: ブリッジ接続 (有効な場合は TLS のみ) の TLS を有効にします。</li>
<li><code>bridge.tls.autoGenerate</code>: 証明書/キーが存在しないときに自己署名証明書を生成します (デフォルト: true)。</li>
<li><code>bridge.tls.certPath</code> / <code>bridge.tls.keyPath</code>: PEM paths for the bridge certificate + private key.</li>
<li><code>bridge.tls.caPath</code>: オプションの PEM CA バンドル (カスタムルーツまたは future mTLS) 。</li>
</ul>
<p>TLS が有効な場合、Gateway は検出用 TXT レコードに <code>bridgeTls=1</code> と <code>bridgeTlsSha256</code> を広告し、ノードが証明書をピン留めできるようにします。 手動接続では、
フィンガープリントがまだ保存されていない場合、trust-on-first-useを使用します。
自動生成された証明書はPATH上で<code>openssl</code>を必要とします。生成に失敗した場合、ブリッジは起動しません。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="p">{</span>
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a><span class="w">  </span><span class="nv">bridge</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a><span class="w">    </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="w">    </span><span class="nv">port</span><span class="p">:</span><span class="w"> </span><span class="mf">18790</span><span class="p">,</span>
<a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a><span class="w">    </span><span class="nv">bind</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tailnet&quot;</span><span class="p">,</span>
<a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a><span class="w">    </span><span class="nv">tls</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a><span class="w">      </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a><span class="w">      </span><span class="c1">// Uses ~/.openclaw/bridge/tls/bridge-{cert,key}.pem when omitted.</span>
<a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a><span class="w">      </span><span class="c1">// certPath: &quot;~/.openclaw/bridge/tls/bridge-cert.pem&quot;,</span>
<a id="__codelineno-100-10" name="__codelineno-100-10" href="#__codelineno-100-10"></a><span class="w">      </span><span class="c1">// keyPath: &quot;~/.openclaw/bridge/tls/bridge-key.pem&quot;</span>
<a id="__codelineno-100-11" name="__codelineno-100-11" href="#__codelineno-100-11"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-100-12" name="__codelineno-100-12" href="#__codelineno-100-12"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-100-13" name="__codelineno-100-13" href="#__codelineno-100-13"></a><span class="p">}</span>
</code></pre></div>
<h3 id="discoverymdns-bonjour-mdns"><code>discovery.mdns</code> (Bonjour / mDNS ブロードキャストモード)<a class="headerlink" href="#discoverymdns-bonjour-mdns" title="Permanent link">&para;</a></h3>
<p>LAN mDNS ディスカバリブロードキャストを制御します (<code>_openclaw-gw._tcp</code>)。</p>
<ul>
<li><code>minimal</code> (デフォルト): TXTレコードから <code>cliPath</code> + <code>sshPort</code> を省略します</li>
<li><code>full</code>: TXTレコードに<code>cliPath</code> + <code>sshPort</code> を含む</li>
<li><code>off</code>: mDNS ブロードキャストを完全に無効にする</li>
<li>ホスト名: デフォルトは <code>openclaw</code> (<code>openclaw.local</code>を宣伝します)。 <code>OPENCLAW_MDNS_HOSTNAME</code> で上書きします。</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="p">{</span>
<a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a><span class="w">  </span><span class="nv">discovery</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mdns</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;minimal&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a><span class="p">}</span>
</code></pre></div>
<h3 id="discoverywidearea-area-bonjour-dnssd"><code>discovery.wideArea</code> (ワイド-Area Bonjour / ユニキャストDNS‐SD)<a class="headerlink" href="#discoverywidearea-area-bonjour-dnssd" title="Permanent link">&para;</a></h3>
<p>有効にすると、ゲートウェイは設定されたディスカバリドメインを使用して、<code>~/.openclaw/dns/</code>の下の<code>_openclaw-gw._tcp</code>にユニキャストDNS-SDゾーンを書き込みます(例: <code>openclaw.internal.</code>)。</p>
<p>iOS/Androidをネットワーク(Vienna <unk> London)間で発見するには、以下をペアリングしてください：</p>
<ul>
<li>選択したドメインを提供するゲートウェイホスト上の DNS サーバー (CoreDNS を推奨)</li>
<li>クライアントがゲートウェイDNSサーバーを介してそのドメインを解決するために、Tailscale <strong>split DNS</strong></li>
</ul>
<p>ワンタイムセットアップヘルパー (ゲートウェイホスト):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a>openclaw<span class="w"> </span>dns<span class="w"> </span>setup<span class="w"> </span>--apply
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="p">{</span>
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a><span class="w">  </span><span class="nv">discovery</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">wideArea</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a><span class="p">}</span>
</code></pre></div>
<h2 id="_19">メディアモデルテンプレート変数<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<p>テンプレートプレースホルダは、 <code>tools.media.*.models[].args</code> と <code>tools.media.models[].args</code> (および将来テンプレートされた引数フィールド)で展開されます。</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>説明</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{{Body}}</code></td>
<td>受信メッセージ本文の全文</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{RawBody}}</code></td>
<td>生の受信メッセージ本文（履歴／送信者ラッパーなし。コマンド解析に最適）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{BodyStripped}}</code></td>
<td>グループメンションを除去した本文（エージェントの既定に最適）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{From}}</code></td>
<td>送信者識別子（WhatsApp では E.164。チャネルにより異なる場合あり）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{To}}</code></td>
<td>宛先識別子</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{MessageSid}}</code></td>
<td>チャネルのメッセージ ID（利用可能な場合）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{SessionId}}</code></td>
<td>現在のセッション UUID</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{IsNewSession}}</code></td>
<td>新しいセッションが作成された場合は <code>"true"</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{MediaUrl}}</code></td>
<td>受信メディアの疑似 URL（存在する場合）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{MediaPath}}</code></td>
<td>ローカルのメディアパス（ダウンロードされた場合）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{MediaType}}</code></td>
<td>メディア種別（image/audio/document/…）</td>
<td><code>{{Transcript}}</code></td>
<td>音声文字起こし（有効時）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{Prompt}}</code></td>
<td>CLI エントリ向けに解決されたメディアプロンプト</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{MaxChars}}</code></td>
<td>CLI エントリ向けに解決された最大出力文字数</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{ChatType}}</code></td>
<td><code>"direct"</code> または <code>"group"</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{GroupSubject}}</code></td>
<td>グループの件名（ベストエフォート）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{GroupMembers}}</code></td>
<td>グループメンバーのプレビュー（ベストエフォート）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{SenderName}}</code></td>
<td>送信者の表示名（ベストエフォート）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{SenderE164}}</code></td>
<td>送信者の電話番号（ベストエフォート）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>{{Provider}}</code></td>
<td>プロバイダのヒント（whatsapp</td>
<td>telegram</td>
<td>discord</td>
<td>googlechat</td>
<td>slack</td>
<td>signal</td>
<td>imessage</td>
<td>msteams</td>
<td>webchat</td>
<td>…）</td>
</tr>
</tbody>
</table>
<h2 id="cron">Cron (ゲートウェイスケジューラ)<a class="headerlink" href="#cron" title="Permanent link">&para;</a></h2>
<p>Cronは、ウェイクアップとスケジュールされたジョブのためのゲートウェイ所有のスケジューラです。 機能の概要と CLI の例については <a href="../../automation/cron-jobs">Cron jobs</a> を参照してください。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="p">{</span>
<a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a><span class="w">  </span><span class="nv">cron</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a><span class="w">    </span><span class="nv">enabled</span><span class="p">:</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="w">    </span><span class="nv">maxConcurrentRuns</span><span class="p">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span>
<a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a><span class="p">}</span>
</code></pre></div>
<hr />
<p><em>次へ：<a href="../../concepts/agent">Agent Runtime</a></em> 🦞</p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Community translations maintained by <a href="http://blog.law-kelly.com/2026/02/open-source-means-open-language.html">John Kelly</a>. Improve translations on <a href="https://crowdin.com/project/66aa453b091ff31e16a4cecfeef31b17">Crowdin</a>.

    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/openclaw/openclaw" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://crowdin.com/project/66aa453b091ff31e16a4cecfeef31b17" target="_blank" rel="noopener" title="crowdin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "toc.follow"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>